/*! For license information please see main.js.LICENSE.txt */
!(function () {
  var e = {
      9713: function (e) {
        e.exports = function (e, t, n) {
          return (
            t in e
              ? Object.defineProperty(e, t, {
                  value: n,
                  enumerable: !0,
                  configurable: !0,
                  writable: !0,
                })
              : (e[t] = n),
            e
          );
        };
      },
      7154: function (e) {
        function t() {
          return (
            (e.exports = t =
              Object.assign ||
              function (e) {
                for (var t = 1; t < arguments.length; t++) {
                  var n = arguments[t];
                  for (var r in n)
                    Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r]);
                }
                return e;
              }),
            t.apply(this, arguments)
          );
        }
        e.exports = t;
      },
      5318: function (e) {
        e.exports = function (e) {
          return e && e.__esModule ? e : { default: e };
        };
      },
      862: function (e, t, n) {
        var r = n(8);
        function i() {
          if ("function" !== typeof WeakMap) return null;
          var e = new WeakMap();
          return (
            (i = function () {
              return e;
            }),
            e
          );
        }
        e.exports = function (e) {
          if (e && e.__esModule) return e;
          if (null === e || ("object" !== r(e) && "function" !== typeof e))
            return { default: e };
          var t = i();
          if (t && t.has(e)) return t.get(e);
          var n = {},
            o = Object.defineProperty && Object.getOwnPropertyDescriptor;
          for (var a in e)
            if (Object.prototype.hasOwnProperty.call(e, a)) {
              var s = o ? Object.getOwnPropertyDescriptor(e, a) : null;
              s && (s.get || s.set)
                ? Object.defineProperty(n, a, s)
                : (n[a] = e[a]);
            }
          return ((n.default = e), t && t.set(e, n), n);
        };
      },
      6479: function (e, t, n) {
        var r = n(7316);
        e.exports = function (e, t) {
          if (null == e) return {};
          var n,
            i,
            o = r(e, t);
          if (Object.getOwnPropertySymbols) {
            var a = Object.getOwnPropertySymbols(e);
            for (i = 0; i < a.length; i++)
              ((n = a[i]),
                t.indexOf(n) >= 0 ||
                  (Object.prototype.propertyIsEnumerable.call(e, n) &&
                    (o[n] = e[n])));
          }
          return o;
        };
      },
      7316: function (e) {
        e.exports = function (e, t) {
          if (null == e) return {};
          var n,
            r,
            i = {},
            o = Object.keys(e);
          for (r = 0; r < o.length; r++)
            ((n = o[r]), t.indexOf(n) >= 0 || (i[n] = e[n]));
          return i;
        };
      },
      8: function (e) {
        function t(n) {
          return (
            "function" === typeof Symbol && "symbol" === typeof Symbol.iterator
              ? (e.exports = t =
                  function (e) {
                    return typeof e;
                  })
              : (e.exports = t =
                  function (e) {
                    return e &&
                      "function" === typeof Symbol &&
                      e.constructor === Symbol &&
                      e !== Symbol.prototype
                      ? "symbol"
                      : typeof e;
                  }),
            t(n)
          );
        }
        e.exports = t;
      },
      705: function (e, t, n) {
        "use strict";
        var r = n(6976).default,
          i = n(2071).default,
          o = -1,
          a = 2,
          s = 3,
          l = 4,
          c = 5,
          u = 6,
          d = c,
          p = "\x1b[31m",
          f = "\x1b[32m",
          h = "\x1b[33m",
          v = "\x1b[34m",
          g = "\x1b[0m",
          m = "\x1b[1m",
          x = (function () {
            function e(t) {
              var n =
                arguments.length > 1 && void 0 !== arguments[1]
                  ? arguments[1]
                  : {};
              (r(this, e),
                (this.appName = t),
                (this.useColor =
                  "undefined" === typeof n.useColor || n.useColor),
                this.setLogLevel(n.logLevel));
            }
            return (
              i(e, [
                {
                  key: "verbose",
                  value: function () {
                    if (a >= this.logLevel) {
                      var e = Array.from(arguments);
                      return (
                        e.unshift(this._makeHeader("V", m + v)),
                        console.error.apply(console, e),
                        0
                      );
                    }
                    return o;
                  },
                },
                {
                  key: "debug",
                  value: function () {
                    if (s >= this.logLevel) {
                      var e = Array.from(arguments);
                      return (
                        e.unshift(this._makeHeader("D", m + v)),
                        console.log.apply(console, e),
                        0
                      );
                    }
                    return o;
                  },
                },
                {
                  key: "info",
                  value: function () {
                    if (l >= this.logLevel) {
                      var e = Array.from(arguments);
                      return (
                        e.unshift(this._makeHeader("I", m + f)),
                        console.log.apply(console, e),
                        0
                      );
                    }
                    return o;
                  },
                },
                {
                  key: "warn",
                  value: function () {
                    if (c >= this.logLevel) {
                      var e = Array.from(arguments);
                      return (
                        e.unshift(this._makeHeader("W", m + h)),
                        console.log.apply(console, e),
                        0
                      );
                    }
                    return o;
                  },
                },
                {
                  key: "error",
                  value: function () {
                    if (u >= this.logLevel) {
                      var e = Array.from(arguments);
                      return (
                        e.unshift(this._makeHeader("E", m + p)),
                        console.error.apply(console, e),
                        0
                      );
                    }
                    return o;
                  },
                },
                {
                  key: "setLogLevel",
                  value: function (e) {
                    switch (e) {
                      case "verbose":
                        this.logLevel = a;
                        break;
                      case "debug":
                        this.logLevel = s;
                        break;
                      case "info":
                        this.logLevel = l;
                        break;
                      case "warn":
                        this.logLevel = c;
                        break;
                      case "error":
                        this.logLevel = u;
                        break;
                      default:
                        return (
                          this.warn(
                            "Unknown log level string: ".concat(
                              e,
                              ", please specify one of verbose, debug, info, warn, error.",
                            ),
                          ),
                          (this.logLevel = d),
                          o
                        );
                    }
                    return 0;
                  },
                },
                {
                  key: "_makeHeader",
                  value: function (e, t) {
                    var n = ""
                      .concat(e, "/")
                      .concat(this.appName, "(")
                      .concat(
                        (function () {
                          var e = 6e4 * new Date().getTimezoneOffset(),
                            t = Date.now() - e;
                          return new Date(t)
                            .toISOString()
                            .replace(/Z|-|:/g, "");
                        })(),
                        "):",
                      );
                    return this.useColor && t ? t + n + g : n;
                  },
                },
              ]),
              e
            );
          })();
        e.exports = { Logger: x, RET_FAIL: o, RET_SUCCESS: 0 };
      },
      8942: function (e, t, n) {
        var r = "__lodash_hash_undefined__",
          i = "[object Function]",
          o = "[object GeneratorFunction]",
          a = /^\[object .+?Constructor\]$/,
          s = "object" == typeof n.g && n.g && n.g.Object === Object && n.g,
          l = "object" == typeof self && self && self.Object === Object && self,
          c = s || l || Function("return this")();
        var u = Array.prototype,
          d = Function.prototype,
          p = Object.prototype,
          f = c["__core-js_shared__"],
          h = (function () {
            var e = /[^.]+$/.exec((f && f.keys && f.keys.IE_PROTO) || "");
            return e ? "Symbol(src)_1." + e : "";
          })(),
          v = d.toString,
          g = p.hasOwnProperty,
          m = p.toString,
          x = RegExp(
            "^" +
              v
                .call(g)
                .replace(/[\\^$.*+?()[\]{}|]/g, "\\$&")
                .replace(
                  /hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,
                  "$1.*?",
                ) +
              "$",
          ),
          w = u.splice,
          b = I(c, "Map"),
          y = I(Object, "create");
        function k(e) {
          var t = -1,
            n = e ? e.length : 0;
          for (this.clear(); ++t < n; ) {
            var r = e[t];
            this.set(r[0], r[1]);
          }
        }
        function C(e) {
          var t = -1,
            n = e ? e.length : 0;
          for (this.clear(); ++t < n; ) {
            var r = e[t];
            this.set(r[0], r[1]);
          }
        }
        function j(e) {
          var t = -1,
            n = e ? e.length : 0;
          for (this.clear(); ++t < n; ) {
            var r = e[t];
            this.set(r[0], r[1]);
          }
        }
        function S(e, t) {
          for (var n, r, i = e.length; i--; )
            if ((n = e[i][0]) === (r = t) || (n !== n && r !== r)) return i;
          return -1;
        }
        function _(e) {
          if (!A(e) || ((t = e), h && h in t)) return !1;
          var t,
            n =
              (function (e) {
                var t = A(e) ? m.call(e) : "";
                return t == i || t == o;
              })(e) ||
              (function (e) {
                var t = !1;
                if (null != e && "function" != typeof e.toString)
                  try {
                    t = !!(e + "");
                  } catch (n) {}
                return t;
              })(e)
                ? x
                : a;
          return n.test(
            (function (e) {
              if (null != e) {
                try {
                  return v.call(e);
                } catch (t) {}
                try {
                  return e + "";
                } catch (t) {}
              }
              return "";
            })(e),
          );
        }
        function E(e, t) {
          var n = e.__data__;
          return (function (e) {
            var t = typeof e;
            return "string" == t ||
              "number" == t ||
              "symbol" == t ||
              "boolean" == t
              ? "__proto__" !== e
              : null === e;
          })(t)
            ? n["string" == typeof t ? "string" : "hash"]
            : n.map;
        }
        function I(e, t) {
          var n = (function (e, t) {
            return null == e ? void 0 : e[t];
          })(e, t);
          return _(n) ? n : void 0;
        }
        function P(e, t) {
          if ("function" != typeof e || (t && "function" != typeof t))
            throw new TypeError("Expected a function");
          var n = function n() {
            var r = arguments,
              i = t ? t.apply(this, r) : r[0],
              o = n.cache;
            if (o.has(i)) return o.get(i);
            var a = e.apply(this, r);
            return ((n.cache = o.set(i, a)), a);
          };
          return ((n.cache = new (P.Cache || j)()), n);
        }
        function A(e) {
          var t = typeof e;
          return !!e && ("object" == t || "function" == t);
        }
        ((k.prototype.clear = function () {
          this.__data__ = y ? y(null) : {};
        }),
          (k.prototype.delete = function (e) {
            return this.has(e) && delete this.__data__[e];
          }),
          (k.prototype.get = function (e) {
            var t = this.__data__;
            if (y) {
              var n = t[e];
              return n === r ? void 0 : n;
            }
            return g.call(t, e) ? t[e] : void 0;
          }),
          (k.prototype.has = function (e) {
            var t = this.__data__;
            return y ? void 0 !== t[e] : g.call(t, e);
          }),
          (k.prototype.set = function (e, t) {
            return ((this.__data__[e] = y && void 0 === t ? r : t), this);
          }),
          (C.prototype.clear = function () {
            this.__data__ = [];
          }),
          (C.prototype.delete = function (e) {
            var t = this.__data__,
              n = S(t, e);
            return (
              !(n < 0) && (n == t.length - 1 ? t.pop() : w.call(t, n, 1), !0)
            );
          }),
          (C.prototype.get = function (e) {
            var t = this.__data__,
              n = S(t, e);
            return n < 0 ? void 0 : t[n][1];
          }),
          (C.prototype.has = function (e) {
            return S(this.__data__, e) > -1;
          }),
          (C.prototype.set = function (e, t) {
            var n = this.__data__,
              r = S(n, e);
            return (r < 0 ? n.push([e, t]) : (n[r][1] = t), this);
          }),
          (j.prototype.clear = function () {
            this.__data__ = {
              hash: new k(),
              map: new (b || C)(),
              string: new k(),
            };
          }),
          (j.prototype.delete = function (e) {
            return E(this, e).delete(e);
          }),
          (j.prototype.get = function (e) {
            return E(this, e).get(e);
          }),
          (j.prototype.has = function (e) {
            return E(this, e).has(e);
          }),
          (j.prototype.set = function (e, t) {
            return (E(this, e).set(e, t), this);
          }),
          (P.Cache = j),
          (e.exports = P));
      },
      9285: function (e, t, n) {
        var r = "Expected a function",
          i = /^\s+|\s+$/g,
          o = /^[-+]0x[0-9a-f]+$/i,
          a = /^0b[01]+$/i,
          s = /^0o[0-7]+$/i,
          l = parseInt,
          c = "object" == typeof n.g && n.g && n.g.Object === Object && n.g,
          u = "object" == typeof self && self && self.Object === Object && self,
          d = c || u || Function("return this")(),
          p = Object.prototype.toString,
          f = Math.max,
          h = Math.min,
          v = function () {
            return d.Date.now();
          };
        function g(e, t, n) {
          var i,
            o,
            a,
            s,
            l,
            c,
            u = 0,
            d = !1,
            p = !1,
            g = !0;
          if ("function" != typeof e) throw new TypeError(r);
          function w(t) {
            var n = i,
              r = o;
            return ((i = o = void 0), (u = t), (s = e.apply(r, n)));
          }
          function b(e) {
            return ((u = e), (l = setTimeout(k, t)), d ? w(e) : s);
          }
          function y(e) {
            var n = e - c;
            return void 0 === c || n >= t || n < 0 || (p && e - u >= a);
          }
          function k() {
            var e = v();
            if (y(e)) return C(e);
            l = setTimeout(
              k,
              (function (e) {
                var n = t - (e - c);
                return p ? h(n, a - (e - u)) : n;
              })(e),
            );
          }
          function C(e) {
            return ((l = void 0), g && i ? w(e) : ((i = o = void 0), s));
          }
          function j() {
            var e = v(),
              n = y(e);
            if (((i = arguments), (o = this), (c = e), n)) {
              if (void 0 === l) return b(c);
              if (p) return ((l = setTimeout(k, t)), w(c));
            }
            return (void 0 === l && (l = setTimeout(k, t)), s);
          }
          return (
            (t = x(t) || 0),
            m(n) &&
              ((d = !!n.leading),
              (a = (p = "maxWait" in n) ? f(x(n.maxWait) || 0, t) : a),
              (g = "trailing" in n ? !!n.trailing : g)),
            (j.cancel = function () {
              (void 0 !== l && clearTimeout(l),
                (u = 0),
                (i = c = o = l = void 0));
            }),
            (j.flush = function () {
              return void 0 === l ? s : C(v());
            }),
            j
          );
        }
        function m(e) {
          var t = typeof e;
          return !!e && ("object" == t || "function" == t);
        }
        function x(e) {
          if ("number" == typeof e) return e;
          if (
            (function (e) {
              return (
                "symbol" == typeof e ||
                ((function (e) {
                  return !!e && "object" == typeof e;
                })(e) &&
                  "[object Symbol]" == p.call(e))
              );
            })(e)
          )
            return NaN;
          if (m(e)) {
            var t = "function" == typeof e.valueOf ? e.valueOf() : e;
            e = m(t) ? t + "" : t;
          }
          if ("string" != typeof e) return 0 === e ? e : +e;
          e = e.replace(i, "");
          var n = a.test(e);
          return n || s.test(e)
            ? l(e.slice(2), n ? 2 : 8)
            : o.test(e)
              ? NaN
              : +e;
        }
        e.exports = function (e, t, n) {
          var i = !0,
            o = !0;
          if ("function" != typeof e) throw new TypeError(r);
          return (
            m(n) &&
              ((i = "leading" in n ? !!n.leading : i),
              (o = "trailing" in n ? !!n.trailing : o)),
            g(e, t, { leading: i, maxWait: t, trailing: o })
          );
        };
      },
      5808: function (e, t, n) {
        var r = n(6899).default,
          i = n(9576).default,
          o = n(6976).default,
          a = n(2071).default,
          s = n(7104).default,
          l = n(1985).default;
        !(function () {
          "use strict";
          var e;
          function t() {
            return (
              (t = Object.assign
                ? Object.assign.bind()
                : function (e) {
                    for (var t = 1; t < arguments.length; t++) {
                      var n = arguments[t];
                      for (var r in n)
                        ({}).hasOwnProperty.call(n, r) && (e[r] = n[r]);
                    }
                    return e;
                  }),
              t.apply(null, arguments)
            );
          }
          function n(e, t) {
            if (null == e) return {};
            var n = {};
            for (var r in e)
              if ({}.hasOwnProperty.call(e, r)) {
                if (-1 !== t.indexOf(r)) continue;
                n[r] = e[r];
              }
            return n;
          }
          var c = "undefined" != typeof window ? window : void 0,
            u = "undefined" != typeof globalThis ? globalThis : c,
            d = Array.prototype,
            p = d.forEach,
            f = d.indexOf,
            h = null == u ? void 0 : u.navigator,
            v = null == u ? void 0 : u.document,
            g = null == u ? void 0 : u.location,
            m = null == u ? void 0 : u.fetch,
            x =
              null != u &&
              u.XMLHttpRequest &&
              "withCredentials" in new u.XMLHttpRequest()
                ? u.XMLHttpRequest
                : void 0,
            w = null == u ? void 0 : u.AbortController,
            b = null == h ? void 0 : h.userAgent,
            y = null != c ? c : {},
            k = { DEBUG: !1, LIB_VERSION: "1.255.1" },
            C = "$copy_autocapture",
            j = [
              "$snapshot",
              "$pageview",
              "$pageleave",
              "$set",
              "survey dismissed",
              "survey sent",
              "survey shown",
              "$identify",
              "$groupidentify",
              "$create_alias",
              "$$client_ingestion_warning",
              "$web_experiment_applied",
              "$feature_enrollment_update",
              "$feature_flag_called",
            ],
            S = (function (e) {
              return ((e.GZipJS = "gzip-js"), (e.Base64 = "base64"), e);
            })({}),
            _ = ["fatal", "error", "warning", "log", "info", "debug"];
          function E(e, t) {
            return -1 !== e.indexOf(t);
          }
          var I = function (e) {
              return e.trim();
            },
            P = function (e) {
              return e.replace(/^\$/, "");
            },
            A = Array.isArray,
            F = Object.prototype,
            L = F.hasOwnProperty,
            O = F.toString,
            Z =
              A ||
              function (e) {
                return "[object Array]" === O.call(e);
              },
            N = function (e) {
              return "function" == typeof e;
            },
            D = function (e) {
              return e === Object(e) && !Z(e);
            },
            T = function (e) {
              if (D(e)) {
                for (var t in e) if (L.call(e, t)) return !1;
                return !0;
              }
              return !1;
            },
            R = function (e) {
              return void 0 === e;
            },
            B = function (e) {
              return "[object String]" == O.call(e);
            },
            M = function (e) {
              return B(e) && 0 === e.trim().length;
            },
            z = function (e) {
              return null === e;
            },
            H = function (e) {
              return R(e) || z(e);
            },
            U = function (e) {
              return "[object Number]" == O.call(e);
            },
            V = function (e) {
              return "[object Boolean]" === O.call(e);
            },
            W = function (e) {
              return E(j, e);
            },
            q = (function e(t) {
              var n = {
                _log: function (e) {
                  if (
                    c &&
                    (k.DEBUG || y.POSTHOG_DEBUG) &&
                    !R(c.console) &&
                    c.console
                  ) {
                    for (
                      var n =
                          ("__rrweb_original__" in c.console[e])
                            ? c.console[e].__rrweb_original__
                            : c.console[e],
                        r = arguments.length,
                        i = new Array(r > 1 ? r - 1 : 0),
                        o = 1;
                      o < r;
                      o++
                    )
                      i[o - 1] = arguments[o];
                    n.apply(void 0, [t].concat(i));
                  }
                },
                info: function () {
                  for (
                    var e = arguments.length, t = new Array(e), r = 0;
                    r < e;
                    r++
                  )
                    t[r] = arguments[r];
                  n._log.apply(n, ["log"].concat(t));
                },
                warn: function () {
                  for (
                    var e = arguments.length, t = new Array(e), r = 0;
                    r < e;
                    r++
                  )
                    t[r] = arguments[r];
                  n._log.apply(n, ["warn"].concat(t));
                },
                error: function () {
                  for (
                    var e = arguments.length, t = new Array(e), r = 0;
                    r < e;
                    r++
                  )
                    t[r] = arguments[r];
                  n._log.apply(n, ["error"].concat(t));
                },
                critical: function () {
                  for (
                    var e, n = arguments.length, r = new Array(n), i = 0;
                    i < n;
                    i++
                  )
                    r[i] = arguments[i];
                  (e = console).error.apply(e, [t].concat(r));
                },
                uninitializedWarning: function (e) {
                  n.error("You must initialize PostHog before calling " + e);
                },
                createLogger: function (n) {
                  return e(t + " " + n);
                },
              };
              return n;
            })("[PostHog.js]"),
            $ = q.createLogger,
            G = {};
          function Y(e, t, n) {
            if (Z(e))
              if (p && e.forEach === p) e.forEach(t, n);
              else if ("length" in e && e.length === +e.length)
                for (var r = 0, i = e.length; r < i; r++)
                  if (r in e && t.call(n, e[r], r) === G) return;
          }
          function K(e, t, n) {
            if (!H(e)) {
              if (Z(e)) return Y(e, t, n);
              if (
                (function (e) {
                  return e instanceof FormData;
                })(e)
              ) {
                var r,
                  i = l(e.entries());
                try {
                  for (i.s(); !(r = i.n()).done; ) {
                    var o = r.value;
                    if (t.call(n, o[1], o[0]) === G) return;
                  }
                } catch (s) {
                  i.e(s);
                } finally {
                  i.f();
                }
              } else
                for (var a in e)
                  if (L.call(e, a) && t.call(n, e[a], a) === G) return;
            }
          }
          var Q = function (e) {
              for (
                var t = arguments.length,
                  n = new Array(t > 1 ? t - 1 : 0),
                  r = 1;
                r < t;
                r++
              )
                n[r - 1] = arguments[r];
              return (
                Y(n, function (t) {
                  for (var n in t) void 0 !== t[n] && (e[n] = t[n]);
                }),
                e
              );
            },
            X = function (e) {
              for (
                var t = arguments.length,
                  n = new Array(t > 1 ? t - 1 : 0),
                  r = 1;
                r < t;
                r++
              )
                n[r - 1] = arguments[r];
              return (
                Y(n, function (t) {
                  Y(t, function (t) {
                    e.push(t);
                  });
                }),
                e
              );
            };
          function J(e) {
            for (var t = Object.keys(e), n = t.length, r = new Array(n); n--; )
              r[n] = [t[n], e[t[n]]];
            return r;
          }
          var ee = function (e) {
              try {
                return e();
              } catch (e) {
                return;
              }
            },
            te = function (e) {
              return function () {
                try {
                  for (
                    var t = arguments.length, n = new Array(t), r = 0;
                    r < t;
                    r++
                  )
                    n[r] = arguments[r];
                  return e.apply(this, n);
                } catch (e) {
                  (q.critical(
                    "Implementation error. Please turn on debug mode and open a ticket on https://app.posthog.com/home#panel=support%3Asupport%3A.",
                  ),
                    q.critical(e));
                }
              };
            },
            ne = function (e) {
              var t = {};
              return (
                K(e, function (e, n) {
                  ((B(e) && e.length > 0) || U(e)) && (t[n] = e);
                }),
                t
              );
            };
          var re = ["herokuapp.com", "vercel.app", "netlify.app"];
          function ie(e) {
            var t = null == e ? void 0 : e.hostname;
            if (!B(t)) return !1;
            var n,
              r = t.split(".").slice(-2).join("."),
              i = l(re);
            try {
              for (i.s(); !(n = i.n()).done; ) {
                if (r === n.value) return !1;
              }
            } catch (o) {
              i.e(o);
            } finally {
              i.f();
            }
            return !0;
          }
          function oe(e, t) {
            for (var n = 0; n < e.length; n++) if (t(e[n])) return e[n];
          }
          function ae(e, t, n, r) {
            var i = null != r ? r : {},
              o = i.capture,
              a = void 0 !== o && o,
              s = i.passive,
              l = void 0 === s || s;
            null == e || e.addEventListener(t, n, { capture: a, passive: l });
          }
          var se = "$people_distinct_id",
            le = "__alias",
            ce = "__timers",
            ue = "$autocapture_disabled_server_side",
            de = "$heatmaps_enabled_server_side",
            pe = "$exception_capture_enabled_server_side",
            fe = "$error_tracking_suppression_rules",
            he = "$web_vitals_enabled_server_side",
            ve = "$dead_clicks_enabled_server_side",
            ge = "$web_vitals_allowed_metrics",
            me = "$session_recording_enabled_server_side",
            xe = "$console_log_recording_enabled_server_side",
            we = "$session_recording_network_payload_capture",
            be = "$session_recording_masking",
            ye = "$session_recording_canvas_recording",
            ke = "$replay_sample_rate",
            Ce = "$replay_minimum_duration",
            je = "$replay_script_config",
            Se = "$sesid",
            _e = "$session_is_sampled",
            Ee = "$session_recording_url_trigger_activated_session",
            Ie = "$session_recording_event_trigger_activated_session",
            Pe = "$enabled_feature_flags",
            Ae = "$early_access_features",
            Fe = "$feature_flag_details",
            Le = "$stored_person_properties",
            Oe = "$stored_group_properties",
            Ze = "$surveys",
            Ne = "$surveys_activated",
            De = "$flag_call_reported",
            Te = "$user_state",
            Re = "$client_session_props",
            Be = "$capture_rate_limit",
            Me = "$initial_campaign_params",
            ze = "$initial_referrer_info",
            He = "$initial_person_info",
            Ue = "$epp",
            Ve = "__POSTHOG_TOOLBAR__",
            We = "$posthog_cookieless",
            qe = [
              se,
              le,
              "__cmpns",
              ce,
              me,
              de,
              Se,
              Pe,
              fe,
              Te,
              Ae,
              Fe,
              Oe,
              Le,
              Ze,
              De,
              Re,
              Be,
              Me,
              ze,
              Ue,
              He,
            ];
          function $e(e) {
            return (
              e instanceof Element &&
              (e.id === Ve ||
                !(
                  null == e.closest ||
                  !e.closest(".toolbar-global-fade-container")
                ))
            );
          }
          function Ge(e) {
            return !!e && 1 === e.nodeType;
          }
          function Ye(e, t) {
            return (
              !!e && !!e.tagName && e.tagName.toLowerCase() === t.toLowerCase()
            );
          }
          function Ke(e) {
            return !!e && 3 === e.nodeType;
          }
          function Qe(e) {
            return !!e && 11 === e.nodeType;
          }
          function Xe(e) {
            return e ? I(e).split(/\s+/) : [];
          }
          function Je(e) {
            var t = null == c ? void 0 : c.location.href;
            return !!(
              t &&
              e &&
              e.some(function (e) {
                return t.match(e);
              })
            );
          }
          function et(e) {
            var t = "";
            switch (typeof e.className) {
              case "string":
                t = e.className;
                break;
              case "object":
                t =
                  (e.className && "baseVal" in e.className
                    ? e.className.baseVal
                    : null) ||
                  e.getAttribute("class") ||
                  "";
                break;
              default:
                t = "";
            }
            return Xe(t);
          }
          function tt(e) {
            return H(e)
              ? null
              : I(e)
                  .split(/(\s+)/)
                  .filter(function (e) {
                    return ht(e);
                  })
                  .join("")
                  .replace(/[\r\n]/g, " ")
                  .replace(/[ ]+/g, " ")
                  .substring(0, 255);
          }
          function nt(e) {
            var t = "";
            return (
              at(e) &&
                !st(e) &&
                e.childNodes &&
                e.childNodes.length &&
                K(e.childNodes, function (e) {
                  var n;
                  Ke(e) &&
                    e.textContent &&
                    (t +=
                      null !== (n = tt(e.textContent)) && void 0 !== n
                        ? n
                        : "");
                }),
              I(t)
            );
          }
          function rt(e) {
            return R(e.target)
              ? e.srcElement || null
              : null != (t = e.target) && t.shadowRoot
                ? e.composedPath()[0] || null
                : e.target || null;
            var t;
          }
          var it = [
            "a",
            "button",
            "form",
            "input",
            "select",
            "textarea",
            "label",
          ];
          function ot(e) {
            var t = e.parentNode;
            return !(!t || !Ge(t)) && t;
          }
          function at(e) {
            for (var t = e; t.parentNode && !Ye(t, "body"); t = t.parentNode) {
              var n = et(t);
              if (E(n, "ph-sensitive") || E(n, "ph-no-capture")) return !1;
            }
            if (E(et(e), "ph-include")) return !0;
            var r = e.type || "";
            if (B(r))
              switch (r.toLowerCase()) {
                case "hidden":
                case "password":
                  return !1;
              }
            var i = e.name || e.id || "";
            return (
              !B(i) ||
              !/^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i.test(
                i.replace(/[^a-zA-Z0-9]/g, ""),
              )
            );
          }
          function st(e) {
            return !!(
              (Ye(e, "input") &&
                !["button", "checkbox", "submit", "reset"].includes(e.type)) ||
              Ye(e, "select") ||
              Ye(e, "textarea") ||
              "true" === e.getAttribute("contenteditable")
            );
          }
          var lt =
              "(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11})",
            ct = new RegExp("^(?:" + lt + ")$"),
            ut = new RegExp(lt),
            dt = "\\d{3}-?\\d{2}-?\\d{4}",
            pt = new RegExp("^(" + dt + ")$"),
            ft = new RegExp("(" + dt + ")");
          function ht(e, t) {
            if ((void 0 === t && (t = !0), H(e))) return !1;
            if (B(e)) {
              if (
                ((e = I(e)), (t ? ct : ut).test((e || "").replace(/[- ]/g, "")))
              )
                return !1;
              if ((t ? pt : ft).test(e)) return !1;
            }
            return !0;
          }
          function vt(e) {
            var t = nt(e);
            return ht((t = (t + " " + gt(e)).trim())) ? t : "";
          }
          function gt(e) {
            var t = "";
            return (
              e &&
                e.childNodes &&
                e.childNodes.length &&
                K(e.childNodes, function (e) {
                  var n;
                  if (
                    e &&
                    "span" ===
                      (null == (n = e.tagName) ? void 0 : n.toLowerCase())
                  )
                    try {
                      var r = nt(e);
                      ((t = (t + " " + r).trim()),
                        e.childNodes &&
                          e.childNodes.length &&
                          (t = (t + " " + gt(e)).trim()));
                    } catch (e) {
                      q.error("[AutoCapture]", e);
                    }
                }),
              t
            );
          }
          function mt(e) {
            return (function (e) {
              var n = e.map(function (e) {
                var n,
                  r,
                  i = "";
                if ((e.tag_name && (i += e.tag_name), e.attr_class)) {
                  var o,
                    a = l((e.attr_class.sort(), e.attr_class));
                  try {
                    for (a.s(); !(o = a.n()).done; ) {
                      i += "." + o.value.replace(/"/g, "");
                    }
                  } catch (d) {
                    a.e(d);
                  } finally {
                    a.f();
                  }
                }
                var c = t(
                    {},
                    e.text ? { text: e.text } : {},
                    {
                      "nth-child":
                        null !== (n = e.nth_child) && void 0 !== n ? n : 0,
                      "nth-of-type":
                        null !== (r = e.nth_of_type) && void 0 !== r ? r : 0,
                    },
                    e.href ? { href: e.href } : {},
                    e.attr_id ? { attr_id: e.attr_id } : {},
                    e.attributes,
                  ),
                  u = {};
                return (
                  J(c)
                    .sort(function (e, t) {
                      var n = s(e, 1)[0],
                        r = s(t, 1)[0];
                      return n.localeCompare(r);
                    })
                    .forEach(function (e) {
                      var t = s(e, 2),
                        n = t[0],
                        r = t[1];
                      return (u[xt(n.toString())] = xt(r.toString()));
                    }),
                  (i += ":") +
                    J(u)
                      .map(function (e) {
                        var t = s(e, 2);
                        return t[0] + '="' + t[1] + '"';
                      })
                      .join("")
                );
              });
              return n.join(";");
            })(
              (function (e) {
                return e.map(function (e) {
                  var t,
                    n,
                    r = {
                      text: null == (t = e.$el_text) ? void 0 : t.slice(0, 400),
                      tag_name: e.tag_name,
                      href:
                        null == (n = e.attr__href) ? void 0 : n.slice(0, 2048),
                      attr_class: wt(e),
                      attr_id: e.attr__id,
                      nth_child: e.nth_child,
                      nth_of_type: e.nth_of_type,
                      attributes: {},
                    };
                  return (
                    J(e)
                      .filter(function (e) {
                        return 0 === s(e, 1)[0].indexOf("attr__");
                      })
                      .forEach(function (e) {
                        var t = s(e, 2),
                          n = t[0],
                          i = t[1];
                        return (r.attributes[n] = i);
                      }),
                    r
                  );
                });
              })(e),
            );
          }
          function xt(e) {
            return e.replace(/"|\\"/g, '\\"');
          }
          function wt(e) {
            var t = e.attr__class;
            return t ? (Z(t) ? t : Xe(t)) : void 0;
          }
          var bt = (function () {
              function e() {
                (o(this, e), (this.clicks = []));
              }
              return (
                a(e, [
                  {
                    key: "isRageClick",
                    value: function (e, t, n) {
                      var r = this.clicks[this.clicks.length - 1];
                      if (
                        r &&
                        Math.abs(e - r.x) + Math.abs(t - r.y) < 30 &&
                        n - r.timestamp < 1e3
                      ) {
                        if (
                          (this.clicks.push({ x: e, y: t, timestamp: n }),
                          3 === this.clicks.length)
                        )
                          return !0;
                      } else this.clicks = [{ x: e, y: t, timestamp: n }];
                      return !1;
                    },
                  },
                ]),
                e
              );
            })(),
            yt = ["localhost", "127.0.0.1"],
            kt = function (e) {
              var t = null == v ? void 0 : v.createElement("a");
              return R(t) ? null : ((t.href = e), t);
            },
            Ct = function (e, t) {
              for (
                var n,
                  r = ((e.split("#")[0] || "").split(/\?(.*)/)[1] || "")
                    .replace(/^\?+/g, "")
                    .split("&"),
                  i = 0;
                i < r.length;
                i++
              ) {
                var o = r[i].split("=");
                if (o[0] === t) {
                  n = o;
                  break;
                }
              }
              if (!Z(n) || n.length < 2) return "";
              var a = n[1];
              try {
                a = decodeURIComponent(a);
              } catch (e) {
                q.error("Skipping decoding for malformed query param: " + a);
              }
              return a.replace(/\+/g, " ");
            },
            jt = function (e, t, n) {
              if (!e || !t || !t.length) return e;
              for (
                var r = e.split("#"),
                  i = r[0] || "",
                  o = r[1],
                  a = i.split("?"),
                  s = a[1],
                  l = a[0],
                  c = (s || "").split("&"),
                  u = [],
                  d = 0;
                d < c.length;
                d++
              ) {
                var p = c[d].split("=");
                Z(p) &&
                  (t.includes(p[0]) ? u.push(p[0] + "=" + n) : u.push(c[d]));
              }
              var f = l;
              return (
                null != s && (f += "?" + u.join("&")),
                null != o && (f += "#" + o),
                f
              );
            },
            St = function (e, t) {
              var n = e.match(new RegExp(t + "=([^&]*)"));
              return n ? n[1] : null;
            },
            _t = $("[AutoCapture]");
          function Et(e, t) {
            return t.length > e ? t.slice(0, e) + "..." : t;
          }
          function It(e) {
            if (e.previousElementSibling) return e.previousElementSibling;
            var t = e;
            do {
              t = t.previousSibling;
            } while (t && !Ge(t));
            return t;
          }
          function Pt(e, t) {
            for (
              var n,
                r,
                i = t.e,
                o = t.maskAllElementAttributes,
                a = t.maskAllText,
                s = t.elementAttributeIgnoreList,
                l = t.elementsChainAsString,
                u = [e],
                d = e;
              d.parentNode && !Ye(d, "body");
            )
              Qe(d.parentNode)
                ? (u.push(d.parentNode.host), (d = d.parentNode.host))
                : (u.push(d.parentNode), (d = d.parentNode));
            var p,
              f = [],
              h = {},
              v = !1,
              g = !1;
            if (
              (K(u, function (e) {
                var t = at(e);
                ("a" === e.tagName.toLowerCase() &&
                  ((v = e.getAttribute("href")), (v = t && v && ht(v) && v)),
                  E(et(e), "ph-no-capture") && (g = !0),
                  f.push(
                    (function (e, t, n, r) {
                      var i = e.tagName.toLowerCase(),
                        o = { tag_name: i };
                      it.indexOf(i) > -1 &&
                        !n &&
                        ("a" === i.toLowerCase() || "button" === i.toLowerCase()
                          ? (o.$el_text = Et(1024, vt(e)))
                          : (o.$el_text = Et(1024, nt(e))));
                      var a = et(e);
                      (a.length > 0 &&
                        (o.classes = a.filter(function (e) {
                          return "" !== e;
                        })),
                        K(e.attributes, function (n) {
                          var i;
                          if (
                            (!st(e) ||
                              -1 !==
                                ["name", "id", "class", "aria-label"].indexOf(
                                  n.name,
                                )) &&
                            (null == r || !r.includes(n.name)) &&
                            !t &&
                            ht(n.value) &&
                            ((i = n.name),
                            !B(i) ||
                              ("_ngcontent" !== i.substring(0, 10) &&
                                "_nghost" !== i.substring(0, 7)))
                          ) {
                            var a = n.value;
                            ("class" === n.name && (a = Xe(a).join(" ")),
                              (o["attr__" + n.name] = Et(1024, a)));
                          }
                        }));
                      for (var s = 1, l = 1, c = e; (c = It(c)); )
                        (s++, c.tagName === e.tagName && l++);
                      return ((o.nth_child = s), (o.nth_of_type = l), o);
                    })(e, o, a, s),
                  ));
                var n = (function (e) {
                  if (!at(e)) return {};
                  var t = {};
                  return (
                    K(e.attributes, function (e) {
                      if (
                        e.name &&
                        0 === e.name.indexOf("data-ph-capture-attribute")
                      ) {
                        var n = e.name.replace(
                            "data-ph-capture-attribute-",
                            "",
                          ),
                          r = e.value;
                        n && r && ht(r) && (t[n] = r);
                      }
                    }),
                    t
                  );
                })(e);
                Q(h, n);
              }),
              g)
            )
              return { props: {}, explicitNoCapture: g };
            if (
              (a ||
                ("a" === e.tagName.toLowerCase() ||
                "button" === e.tagName.toLowerCase()
                  ? (f[0].$el_text = vt(e))
                  : (f[0].$el_text = nt(e))),
              v)
            ) {
              var m, x;
              f[0].attr__href = v;
              var w = null == (m = kt(v)) ? void 0 : m.host,
                b = null == c || null == (x = c.location) ? void 0 : x.host;
              w && b && w !== b && (p = v);
            }
            return {
              props: Q(
                { $event_type: i.type, $ce_version: 1 },
                l ? {} : { $elements: f },
                { $elements_chain: mt(f) },
                null != (n = f[0]) && n.$el_text
                  ? { $el_text: null == (r = f[0]) ? void 0 : r.$el_text }
                  : {},
                p && "click" === i.type ? { $external_click_url: p } : {},
                h,
              ),
            };
          }
          var At = (function () {
            function e(t) {
              (o(this, e),
                (this._initialized = !1),
                (this._isDisabledServerSide = null),
                (this.rageclicks = new bt()),
                (this._elementsChainAsString = !1),
                (this.instance = t),
                (this._elementSelectors = null));
            }
            return (
              a(e, [
                {
                  key: "_config",
                  get: function () {
                    var e,
                      t,
                      n = D(this.instance.config.autocapture)
                        ? this.instance.config.autocapture
                        : {};
                    return (
                      (n.url_allowlist =
                        null == (e = n.url_allowlist)
                          ? void 0
                          : e.map(function (e) {
                              return new RegExp(e);
                            })),
                      (n.url_ignorelist =
                        null == (t = n.url_ignorelist)
                          ? void 0
                          : t.map(function (e) {
                              return new RegExp(e);
                            })),
                      n
                    );
                  },
                },
                {
                  key: "_addDomEventHandlers",
                  value: function () {
                    var e = this;
                    if (this.isBrowserSupported()) {
                      if (c && v) {
                        var t = function t(n) {
                          n = n || (null == c ? void 0 : c.event);
                          try {
                            e._captureEvent(n);
                          } catch (t) {
                            _t.error("Failed to capture event", t);
                          }
                        };
                        if (
                          (ae(v, "submit", t, { capture: !0 }),
                          ae(v, "change", t, { capture: !0 }),
                          ae(v, "click", t, { capture: !0 }),
                          this._config.capture_copied_text)
                        ) {
                          var n = function (t) {
                            ((t = t || (null == c ? void 0 : c.event)),
                              e._captureEvent(t, C));
                          };
                          (ae(v, "copy", n, { capture: !0 }),
                            ae(v, "cut", n, { capture: !0 }));
                        }
                      }
                    } else
                      _t.info(
                        "Disabling Automatic Event Collection because this browser is not supported",
                      );
                  },
                },
                {
                  key: "startIfEnabled",
                  value: function () {
                    this.isEnabled &&
                      !this._initialized &&
                      (this._addDomEventHandlers(), (this._initialized = !0));
                  },
                },
                {
                  key: "onRemoteConfig",
                  value: function (e) {
                    (e.elementsChainAsString &&
                      (this._elementsChainAsString = e.elementsChainAsString),
                      this.instance.persistence &&
                        this.instance.persistence.register(
                          i({}, ue, !!e.autocapture_opt_out),
                        ),
                      (this._isDisabledServerSide = !!e.autocapture_opt_out),
                      this.startIfEnabled());
                  },
                },
                {
                  key: "setElementSelectors",
                  value: function (e) {
                    this._elementSelectors = e;
                  },
                },
                {
                  key: "getElementSelectors",
                  value: function (e) {
                    var t,
                      n = [];
                    return (
                      null == (t = this._elementSelectors) ||
                        t.forEach(function (t) {
                          var r = null == v ? void 0 : v.querySelectorAll(t);
                          null == r ||
                            r.forEach(function (r) {
                              e === r && n.push(t);
                            });
                        }),
                      n
                    );
                  },
                },
                {
                  key: "isEnabled",
                  get: function () {
                    var e,
                      t,
                      n =
                        null == (e = this.instance.persistence)
                          ? void 0
                          : e.props[ue],
                      r = this._isDisabledServerSide;
                    if (z(r) && !V(n) && !this.instance._shouldDisableFlags())
                      return !1;
                    var i =
                      null !== (t = this._isDisabledServerSide) && void 0 !== t
                        ? t
                        : !!n;
                    return !!this.instance.config.autocapture && !i;
                  },
                },
                {
                  key: "_captureEvent",
                  value: function (e, t) {
                    if (
                      (void 0 === t && (t = "$autocapture"), this.isEnabled)
                    ) {
                      var n,
                        r = rt(e);
                      (Ke(r) && (r = r.parentNode || null),
                        "$autocapture" === t &&
                          "click" === e.type &&
                          e instanceof MouseEvent &&
                          this.instance.config.rageclick &&
                          null != (n = this.rageclicks) &&
                          n.isRageClick(
                            e.clientX,
                            e.clientY,
                            new Date().getTime(),
                          ) &&
                          this._captureEvent(e, "$rageclick"));
                      var i = t === C;
                      if (
                        r &&
                        (function (e, t, n, r, i) {
                          var o, a, s;
                          if (
                            (void 0 === n && (n = void 0),
                            !c || !e || Ye(e, "html") || !Ge(e))
                          )
                            return !1;
                          if (
                            null != (o = n) &&
                            o.url_allowlist &&
                            !Je(n.url_allowlist)
                          )
                            return !1;
                          if (
                            null != (a = n) &&
                            a.url_ignorelist &&
                            Je(n.url_ignorelist)
                          )
                            return !1;
                          if (null != (s = n) && s.dom_event_allowlist) {
                            var u = n.dom_event_allowlist;
                            if (
                              u &&
                              !u.some(function (e) {
                                return t.type === e;
                              })
                            )
                              return !1;
                          }
                          for (
                            var d = !1, p = [e], f = !0, h = e;
                            h.parentNode && !Ye(h, "body");
                          )
                            if (Qe(h.parentNode))
                              (p.push(h.parentNode.host),
                                (h = h.parentNode.host));
                            else {
                              if (!(f = ot(h))) break;
                              if (r || it.indexOf(f.tagName.toLowerCase()) > -1)
                                d = !0;
                              else {
                                var v = c.getComputedStyle(f);
                                v &&
                                  "pointer" === v.getPropertyValue("cursor") &&
                                  (d = !0);
                              }
                              (p.push(f), (h = f));
                            }
                          if (
                            !(function (e, t) {
                              var n = null == t ? void 0 : t.element_allowlist;
                              if (R(n)) return !0;
                              var r,
                                i,
                                o = function (e) {
                                  if (
                                    n.some(function (t) {
                                      return e.tagName.toLowerCase() === t;
                                    })
                                  )
                                    return { v: !0 };
                                },
                                a = l(e);
                              try {
                                for (a.s(); !(i = a.n()).done; )
                                  if ((r = o(i.value))) return r.v;
                              } catch (s) {
                                a.e(s);
                              } finally {
                                a.f();
                              }
                              return !1;
                            })(p, n)
                          )
                            return !1;
                          if (
                            !(function (e, t) {
                              var n =
                                null == t ? void 0 : t.css_selector_allowlist;
                              if (R(n)) return !0;
                              var r,
                                i,
                                o = function (e) {
                                  if (
                                    n.some(function (t) {
                                      return e.matches(t);
                                    })
                                  )
                                    return { v: !0 };
                                },
                                a = l(e);
                              try {
                                for (a.s(); !(i = a.n()).done; )
                                  if ((r = o(i.value))) return r.v;
                              } catch (s) {
                                a.e(s);
                              } finally {
                                a.f();
                              }
                              return !1;
                            })(p, n)
                          )
                            return !1;
                          var g = c.getComputedStyle(e);
                          if (
                            g &&
                            "pointer" === g.getPropertyValue("cursor") &&
                            "click" === t.type
                          )
                            return !0;
                          var m = e.tagName.toLowerCase();
                          switch (m) {
                            case "html":
                              return !1;
                            case "form":
                              return (i || ["submit"]).indexOf(t.type) >= 0;
                            case "input":
                            case "select":
                            case "textarea":
                              return (
                                (i || ["change", "click"]).indexOf(t.type) >= 0
                              );
                            default:
                              return d
                                ? (i || ["click"]).indexOf(t.type) >= 0
                                : (i || ["click"]).indexOf(t.type) >= 0 &&
                                    (it.indexOf(m) > -1 ||
                                      "true" ===
                                        e.getAttribute("contenteditable"));
                          }
                        })(r, e, this._config, i, i ? ["copy", "cut"] : void 0)
                      ) {
                        var o = Pt(r, {
                            e: e,
                            maskAllElementAttributes:
                              this.instance.config.mask_all_element_attributes,
                            maskAllText: this.instance.config.mask_all_text,
                            elementAttributeIgnoreList:
                              this._config.element_attribute_ignorelist,
                            elementsChainAsString: this._elementsChainAsString,
                          }),
                          a = o.props;
                        if (o.explicitNoCapture) return !1;
                        var s = this.getElementSelectors(r);
                        if (
                          (s && s.length > 0 && (a.$element_selectors = s),
                          t === C)
                        ) {
                          var u,
                            d = tt(
                              null == c || null == (u = c.getSelection())
                                ? void 0
                                : u.toString(),
                            ),
                            p = e.type || "clipboard";
                          if (!d) return !1;
                          ((a.$selected_content = d), (a.$copy_type = p));
                        }
                        return (this.instance.capture(t, a), !0);
                      }
                    }
                  },
                },
                {
                  key: "isBrowserSupported",
                  value: function () {
                    return N(null == v ? void 0 : v.querySelectorAll);
                  },
                },
              ]),
              e
            );
          })();
          (Math.trunc ||
            (Math.trunc = function (e) {
              return e < 0 ? Math.ceil(e) : Math.floor(e);
            }),
            Number.isInteger ||
              (Number.isInteger = function (e) {
                return U(e) && isFinite(e) && Math.floor(e) === e;
              }));
          var Ft,
            Lt = "0123456789abcdef",
            Ot = (function () {
              function e(t) {
                if ((o(this, e), (this.bytes = t), 16 !== t.length))
                  throw new TypeError("not 128-bit length");
              }
              return (
                a(
                  e,
                  [
                    {
                      key: "toString",
                      value: function () {
                        for (var e = "", t = 0; t < this.bytes.length; t++)
                          ((e =
                            e +
                            Lt.charAt(this.bytes[t] >>> 4) +
                            Lt.charAt(15 & this.bytes[t])),
                            (3 !== t && 5 !== t && 7 !== t && 9 !== t) ||
                              (e += "-"));
                        if (36 !== e.length)
                          throw new Error("Invalid UUIDv7 was generated");
                        return e;
                      },
                    },
                    {
                      key: "clone",
                      value: function () {
                        return new e(this.bytes.slice(0));
                      },
                    },
                    {
                      key: "equals",
                      value: function (e) {
                        return 0 === this.compareTo(e);
                      },
                    },
                    {
                      key: "compareTo",
                      value: function (e) {
                        for (var t = 0; t < 16; t++) {
                          var n = this.bytes[t] - e.bytes[t];
                          if (0 !== n) return Math.sign(n);
                        }
                        return 0;
                      },
                    },
                  ],
                  [
                    {
                      key: "fromFieldsV7",
                      value: function (t, n, r, i) {
                        if (
                          !Number.isInteger(t) ||
                          !Number.isInteger(n) ||
                          !Number.isInteger(r) ||
                          !Number.isInteger(i) ||
                          t < 0 ||
                          n < 0 ||
                          r < 0 ||
                          i < 0 ||
                          t > 0xffffffffffff ||
                          n > 4095 ||
                          r > 1073741823 ||
                          i > 4294967295
                        )
                          throw new RangeError("invalid field value");
                        var o = new Uint8Array(16);
                        return (
                          (o[0] = t / Math.pow(2, 40)),
                          (o[1] = t / Math.pow(2, 32)),
                          (o[2] = t / Math.pow(2, 24)),
                          (o[3] = t / Math.pow(2, 16)),
                          (o[4] = t / Math.pow(2, 8)),
                          (o[5] = t),
                          (o[6] = 112 | (n >>> 8)),
                          (o[7] = n),
                          (o[8] = 128 | (r >>> 24)),
                          (o[9] = r >>> 16),
                          (o[10] = r >>> 8),
                          (o[11] = r),
                          (o[12] = i >>> 24),
                          (o[13] = i >>> 16),
                          (o[14] = i >>> 8),
                          (o[15] = i),
                          new e(o)
                        );
                      },
                    },
                  ],
                ),
                e
              );
            })(),
            Zt = (function () {
              function e() {
                (o(this, e),
                  (this._timestamp = 0),
                  (this._counter = 0),
                  (this._random = new Dt()));
              }
              return (
                a(e, [
                  {
                    key: "generate",
                    value: function () {
                      var e = this.generateOrAbort();
                      if (R(e)) {
                        this._timestamp = 0;
                        var t = this.generateOrAbort();
                        if (R(t))
                          throw new Error(
                            "Could not generate UUID after timestamp reset",
                          );
                        return t;
                      }
                      return e;
                    },
                  },
                  {
                    key: "generateOrAbort",
                    value: function () {
                      var e = Date.now();
                      if (e > this._timestamp)
                        ((this._timestamp = e), this._resetCounter());
                      else {
                        if (!(e + 1e4 > this._timestamp)) return;
                        (this._counter++,
                          this._counter > 4398046511103 &&
                            (this._timestamp++, this._resetCounter()));
                      }
                      return Ot.fromFieldsV7(
                        this._timestamp,
                        Math.trunc(this._counter / Math.pow(2, 30)),
                        this._counter & (Math.pow(2, 30) - 1),
                        this._random.nextUint32(),
                      );
                    },
                  },
                  {
                    key: "_resetCounter",
                    value: function () {
                      this._counter =
                        1024 * this._random.nextUint32() +
                        (1023 & this._random.nextUint32());
                    },
                  },
                ]),
                e
              );
            })(),
            Nt = function (e) {
              if (
                "undefined" != typeof UUIDV7_DENY_WEAK_RNG &&
                UUIDV7_DENY_WEAK_RNG
              )
                throw new Error("no cryptographically strong RNG available");
              for (var t = 0; t < e.length; t++)
                e[t] =
                  65536 * Math.trunc(65536 * Math.random()) +
                  Math.trunc(65536 * Math.random());
              return e;
            };
          c &&
            !R(c.crypto) &&
            crypto.getRandomValues &&
            (Nt = function (e) {
              return crypto.getRandomValues(e);
            });
          var Dt = (function () {
              function e() {
                (o(this, e),
                  (this._buffer = new Uint32Array(8)),
                  (this._cursor = 1 / 0));
              }
              return (
                a(e, [
                  {
                    key: "nextUint32",
                    value: function () {
                      return (
                        this._cursor >= this._buffer.length &&
                          (Nt(this._buffer), (this._cursor = 0)),
                        this._buffer[this._cursor++]
                      );
                    },
                  },
                ]),
                e
              );
            })(),
            Tt = function () {
              return Rt().toString();
            },
            Rt = function () {
              return (Ft || (Ft = new Zt())).generate();
            },
            Bt = "",
            Mt = /[a-z0-9][a-z0-9-]+\.[a-z]{2,}$/i;
          var zt = {
              _is_supported: function () {
                return !!v;
              },
              _error: function (e) {
                q.error("cookieStore error: " + e);
              },
              _get: function (e) {
                if (v) {
                  try {
                    for (
                      var t = e + "=",
                        n = v.cookie.split(";").filter(function (e) {
                          return e.length;
                        }),
                        r = 0;
                      r < n.length;
                      r++
                    ) {
                      for (var i = n[r]; " " == i.charAt(0); )
                        i = i.substring(1, i.length);
                      if (0 === i.indexOf(t))
                        return decodeURIComponent(
                          i.substring(t.length, i.length),
                        );
                    }
                  } catch (e) {}
                  return null;
                }
              },
              _parse: function (e) {
                var t;
                try {
                  t = JSON.parse(zt._get(e)) || {};
                } catch (e) {}
                return t;
              },
              _set: function (e, t, n, r, i) {
                if (v)
                  try {
                    var o = "",
                      a = "",
                      s = (function (e, t) {
                        if (t) {
                          var n = (function (e, t) {
                            if ((void 0 === t && (t = v), Bt)) return Bt;
                            if (!t) return "";
                            if (["localhost", "127.0.0.1"].includes(e))
                              return "";
                            for (
                              var n = e.split("."),
                                r = Math.min(n.length, 8),
                                i = "dmn_chk_" + Tt();
                              !Bt && r--;
                            ) {
                              var o = n.slice(r).join("."),
                                a = i + "=1;domain=." + o + ";path=/";
                              ((t.cookie = a + ";max-age=3"),
                                t.cookie.includes(i) &&
                                  ((t.cookie = a + ";max-age=0"), (Bt = o)));
                            }
                            return Bt;
                          })(e);
                          if (!n) {
                            var r = (function (e) {
                              var t = e.match(Mt);
                              return t ? t[0] : "";
                            })(e);
                            (r !== n &&
                              q.info(
                                "Warning: cookie subdomain discovery mismatch",
                                r,
                                n,
                              ),
                              (n = r));
                          }
                          return n ? "; domain=." + n : "";
                        }
                        return "";
                      })(v.location.hostname, r);
                    if (n) {
                      var l = new Date();
                      (l.setTime(l.getTime() + 24 * n * 60 * 60 * 1e3),
                        (o = "; expires=" + l.toUTCString()));
                    }
                    i && (a = "; secure");
                    var c =
                      e +
                      "=" +
                      encodeURIComponent(JSON.stringify(t)) +
                      o +
                      "; SameSite=Lax; path=/" +
                      s +
                      a;
                    return (
                      c.length > 3686.4 &&
                        q.warn(
                          "cookieStore warning: large cookie, len=" + c.length,
                        ),
                      (v.cookie = c),
                      c
                    );
                  } catch (e) {
                    return;
                  }
              },
              _remove: function (e, t) {
                try {
                  zt._set(e, "", -1, t);
                } catch (e) {
                  return;
                }
              },
            },
            Ht = null,
            Ut = {
              _is_supported: function () {
                if (!z(Ht)) return Ht;
                var e = !0;
                if (R(c)) e = !1;
                else
                  try {
                    var t = "__mplssupport__";
                    (Ut._set(t, "xyz"),
                      '"xyz"' !== Ut._get(t) && (e = !1),
                      Ut._remove(t));
                  } catch (t) {
                    e = !1;
                  }
                return (
                  e ||
                    q.error(
                      "localStorage unsupported; falling back to cookie store",
                    ),
                  (Ht = e),
                  e
                );
              },
              _error: function (e) {
                q.error("localStorage error: " + e);
              },
              _get: function (e) {
                try {
                  return null == c ? void 0 : c.localStorage.getItem(e);
                } catch (e) {
                  Ut._error(e);
                }
                return null;
              },
              _parse: function (e) {
                try {
                  return JSON.parse(Ut._get(e)) || {};
                } catch (e) {}
                return null;
              },
              _set: function (e, t) {
                try {
                  null == c || c.localStorage.setItem(e, JSON.stringify(t));
                } catch (e) {
                  Ut._error(e);
                }
              },
              _remove: function (e) {
                try {
                  null == c || c.localStorage.removeItem(e);
                } catch (e) {
                  Ut._error(e);
                }
              },
            },
            Vt = ["distinct_id", Se, _e, Ue, He],
            Wt = t({}, Ut, {
              _parse: function (e) {
                try {
                  var t = {};
                  try {
                    t = zt._parse(e) || {};
                  } catch (e) {}
                  var n = Q(t, JSON.parse(Ut._get(e) || "{}"));
                  return (Ut._set(e, n), n);
                } catch (e) {}
                return null;
              },
              _set: function (e, t, n, r, i, o) {
                try {
                  Ut._set(e, t, void 0, void 0, o);
                  var a = {};
                  (Vt.forEach(function (e) {
                    t[e] && (a[e] = t[e]);
                  }),
                    Object.keys(a).length && zt._set(e, a, n, r, i, o));
                } catch (e) {
                  Ut._error(e);
                }
              },
              _remove: function (e, t) {
                try {
                  (null == c || c.localStorage.removeItem(e), zt._remove(e, t));
                } catch (e) {
                  Ut._error(e);
                }
              },
            }),
            qt = {},
            $t = {
              _is_supported: function () {
                return !0;
              },
              _error: function (e) {
                q.error("memoryStorage error: " + e);
              },
              _get: function (e) {
                return qt[e] || null;
              },
              _parse: function (e) {
                return qt[e] || null;
              },
              _set: function (e, t) {
                qt[e] = t;
              },
              _remove: function (e) {
                delete qt[e];
              },
            },
            Gt = null,
            Yt = {
              _is_supported: function () {
                if (!z(Gt)) return Gt;
                if (((Gt = !0), R(c))) Gt = !1;
                else
                  try {
                    var e = "__support__";
                    (Yt._set(e, "xyz"),
                      '"xyz"' !== Yt._get(e) && (Gt = !1),
                      Yt._remove(e));
                  } catch (e) {
                    Gt = !1;
                  }
                return Gt;
              },
              _error: function (e) {
                q.error("sessionStorage error: ", e);
              },
              _get: function (e) {
                try {
                  return null == c ? void 0 : c.sessionStorage.getItem(e);
                } catch (e) {
                  Yt._error(e);
                }
                return null;
              },
              _parse: function (e) {
                try {
                  return JSON.parse(Yt._get(e)) || null;
                } catch (e) {}
                return null;
              },
              _set: function (e, t) {
                try {
                  null == c || c.sessionStorage.setItem(e, JSON.stringify(t));
                } catch (e) {
                  Yt._error(e);
                }
              },
              _remove: function (e) {
                try {
                  null == c || c.sessionStorage.removeItem(e);
                } catch (e) {
                  Yt._error(e);
                }
              },
            },
            Kt = (function (e) {
              return (
                (e[(e.PENDING = -1)] = "PENDING"),
                (e[(e.DENIED = 0)] = "DENIED"),
                (e[(e.GRANTED = 1)] = "GRANTED"),
                e
              );
            })({}),
            Qt = (function () {
              function e(t) {
                (o(this, e), (this._instance = t));
              }
              return (
                a(e, [
                  {
                    key: "_config",
                    get: function () {
                      return this._instance.config;
                    },
                  },
                  {
                    key: "consent",
                    get: function () {
                      return this._getDnt() ? Kt.DENIED : this._storedConsent;
                    },
                  },
                  {
                    key: "isOptedOut",
                    value: function () {
                      return (
                        this.consent === Kt.DENIED ||
                        (this.consent === Kt.PENDING &&
                          this._config.opt_out_capturing_by_default)
                      );
                    },
                  },
                  {
                    key: "isOptedIn",
                    value: function () {
                      return !this.isOptedOut();
                    },
                  },
                  {
                    key: "optInOut",
                    value: function (e) {
                      this._storage._set(
                        this._storageKey,
                        e ? 1 : 0,
                        this._config.cookie_expiration,
                        this._config.cross_subdomain_cookie,
                        this._config.secure_cookie,
                      );
                    },
                  },
                  {
                    key: "reset",
                    value: function () {
                      this._storage._remove(
                        this._storageKey,
                        this._config.cross_subdomain_cookie,
                      );
                    },
                  },
                  {
                    key: "_storageKey",
                    get: function () {
                      var e = this._instance.config,
                        t = e.token;
                      return (
                        (e.opt_out_capturing_cookie_prefix ||
                          "__ph_opt_in_out_") + t
                      );
                    },
                  },
                  {
                    key: "_storedConsent",
                    get: function () {
                      var e = this._storage._get(this._storageKey);
                      return "1" === e
                        ? Kt.GRANTED
                        : "0" === e
                          ? Kt.DENIED
                          : Kt.PENDING;
                    },
                  },
                  {
                    key: "_storage",
                    get: function () {
                      if (!this._persistentStore) {
                        var e = this._config.opt_out_capturing_persistence_type;
                        this._persistentStore = "localStorage" === e ? Ut : zt;
                        var t = "localStorage" === e ? zt : Ut;
                        t._get(this._storageKey) &&
                          (this._persistentStore._get(this._storageKey) ||
                            this.optInOut("1" === t._get(this._storageKey)),
                          t._remove(
                            this._storageKey,
                            this._config.cross_subdomain_cookie,
                          ));
                      }
                      return this._persistentStore;
                    },
                  },
                  {
                    key: "_getDnt",
                    value: function () {
                      return (
                        !!this._config.respect_dnt &&
                        !!oe(
                          [
                            null == h ? void 0 : h.doNotTrack,
                            null == h ? void 0 : h.msDoNotTrack,
                            y.doNotTrack,
                          ],
                          function (e) {
                            return E([!0, 1, "1", "yes"], e);
                          },
                        )
                      );
                    },
                  },
                ]),
                e
              );
            })(),
            Xt = $("[Dead Clicks]"),
            Jt = function () {
              return !0;
            },
            en = function (e) {
              var t,
                n = !(
                  null == (t = e.instance.persistence) || !t.get_property(ve)
                ),
                r = e.instance.config.capture_dead_clicks;
              return V(r) ? r : n;
            },
            tn = (function () {
              function e(t, n, r) {
                (o(this, e),
                  (this.instance = t),
                  (this.isEnabled = n),
                  (this.onCapture = r),
                  this.startIfEnabled());
              }
              return (
                a(e, [
                  {
                    key: "lazyLoadedDeadClicksAutocapture",
                    get: function () {
                      return this._lazyLoadedDeadClicksAutocapture;
                    },
                  },
                  {
                    key: "onRemoteConfig",
                    value: function (e) {
                      (this.instance.persistence &&
                        this.instance.persistence.register(
                          i({}, ve, null == e ? void 0 : e.captureDeadClicks),
                        ),
                        this.startIfEnabled());
                    },
                  },
                  {
                    key: "startIfEnabled",
                    value: function () {
                      var e = this;
                      this.isEnabled(this) &&
                        this._loadScript(function () {
                          e._start();
                        });
                    },
                  },
                  {
                    key: "_loadScript",
                    value: function (e) {
                      var t, n;
                      (null != (t = y.__PosthogExtensions__) &&
                        t.initDeadClicksAutocapture &&
                        e(),
                        null == (n = y.__PosthogExtensions__) ||
                          null == n.loadExternalDependency ||
                          n.loadExternalDependency(
                            this.instance,
                            "dead-clicks-autocapture",
                            function (t) {
                              t ? Xt.error("failed to load script", t) : e();
                            },
                          ));
                    },
                  },
                  {
                    key: "_start",
                    value: function () {
                      var e;
                      if (v) {
                        if (
                          !this._lazyLoadedDeadClicksAutocapture &&
                          null != (e = y.__PosthogExtensions__) &&
                          e.initDeadClicksAutocapture
                        ) {
                          var t = D(this.instance.config.capture_dead_clicks)
                            ? this.instance.config.capture_dead_clicks
                            : {};
                          ((t.__onCapture = this.onCapture),
                            (this._lazyLoadedDeadClicksAutocapture =
                              y.__PosthogExtensions__.initDeadClicksAutocapture(
                                this.instance,
                                t,
                              )),
                            this._lazyLoadedDeadClicksAutocapture.start(v),
                            Xt.info("starting..."));
                        }
                      } else Xt.error("`document` not found. Cannot start.");
                    },
                  },
                  {
                    key: "stop",
                    value: function () {
                      this._lazyLoadedDeadClicksAutocapture &&
                        (this._lazyLoadedDeadClicksAutocapture.stop(),
                        (this._lazyLoadedDeadClicksAutocapture = void 0),
                        Xt.info("stopping..."));
                    },
                  },
                ]),
                e
              );
            })();
          function nn(e, t, n, r, i) {
            return (
              t > n && (q.warn("min cannot be greater than max."), (t = n)),
              U(e)
                ? e > n
                  ? (r &&
                      q.warn(
                        r +
                          " cannot be  greater than max: " +
                          n +
                          ". Using max value instead.",
                      ),
                    n)
                  : e < t
                    ? (r &&
                        q.warn(
                          r +
                            " cannot be less than min: " +
                            t +
                            ". Using min value instead.",
                        ),
                      t)
                    : e
                : (r &&
                    q.warn(
                      r +
                        " must be a number. using max or fallback. max: " +
                        n +
                        ", fallback: " +
                        i,
                    ),
                  nn(i || n, t, n, r))
            );
          }
          var rn = a(function e(t) {
              var n = this;
              (o(this, e),
                (this._buckets = {}),
                (this._refillBuckets = function () {
                  Object.keys(n._buckets).forEach(function (e) {
                    var t = n._getBucket(e) + n._refillRate;
                    t >= n._bucketSize
                      ? delete n._buckets[e]
                      : n._setBucket(e, t);
                  });
                }),
                (this._getBucket = function (e) {
                  return n._buckets[String(e)];
                }),
                (this._setBucket = function (e, t) {
                  n._buckets[String(e)] = t;
                }),
                (this.consumeRateLimit = function (e) {
                  var t,
                    r =
                      null !== (t = n._getBucket(e)) && void 0 !== t
                        ? t
                        : n._bucketSize;
                  if (0 === (r = Math.max(r - 1, 0))) return !0;
                  n._setBucket(e, r);
                  var i,
                    o = 0 === r;
                  return (
                    o && (null == (i = n._onBucketRateLimited) || i.call(n, e)),
                    o
                  );
                }),
                (this._options = t),
                (this._onBucketRateLimited =
                  this._options._onBucketRateLimited),
                (this._bucketSize = nn(
                  this._options.bucketSize,
                  0,
                  100,
                  "rate limiter bucket size",
                )),
                (this._refillRate = nn(
                  this._options.refillRate,
                  0,
                  this._bucketSize,
                  "rate limiter refill rate",
                )),
                (this._refillInterval = nn(
                  this._options.refillInterval,
                  0,
                  864e5,
                  "rate limiter refill interval",
                )),
                setInterval(function () {
                  n._refillBuckets();
                }, this._refillInterval));
            }),
            on = $("[ExceptionAutocapture]"),
            an = (function () {
              function e(t) {
                var n,
                  r,
                  i,
                  a = this;
                (o(this, e),
                  (this._startCapturing = function () {
                    var e;
                    if (
                      c &&
                      a.isEnabled &&
                      null != (e = y.__PosthogExtensions__) &&
                      e.errorWrappingFunctions
                    ) {
                      var t =
                          y.__PosthogExtensions__.errorWrappingFunctions
                            .wrapOnError,
                        n =
                          y.__PosthogExtensions__.errorWrappingFunctions
                            .wrapUnhandledRejection,
                        r =
                          y.__PosthogExtensions__.errorWrappingFunctions
                            .wrapConsoleError;
                      try {
                        (!a._unwrapOnError &&
                          a._config.capture_unhandled_errors &&
                          (a._unwrapOnError = t(a.captureException.bind(a))),
                          !a._unwrapUnhandledRejection &&
                            a._config.capture_unhandled_rejections &&
                            (a._unwrapUnhandledRejection = n(
                              a.captureException.bind(a),
                            )),
                          !a._unwrapConsoleError &&
                            a._config.capture_console_errors &&
                            (a._unwrapConsoleError = r(
                              a.captureException.bind(a),
                            )));
                      } catch (e) {
                        (on.error("failed to start", e), a._stopCapturing());
                      }
                    }
                  }),
                  (this._instance = t),
                  (this._remoteEnabled = !(
                    null == (n = this._instance.persistence) || !n.props[pe]
                  )),
                  (this._config = this._requiredConfig()),
                  (this._rateLimiter = new rn({
                    refillRate:
                      null !==
                        (r =
                          this._instance.config.error_tracking
                            .__exceptionRateLimiterRefillRate) && void 0 !== r
                        ? r
                        : 1,
                    bucketSize:
                      null !==
                        (i =
                          this._instance.config.error_tracking
                            .__exceptionRateLimiterBucketSize) && void 0 !== i
                        ? i
                        : 10,
                    refillInterval: 1e4,
                  })),
                  this.startIfEnabled());
              }
              return (
                a(e, [
                  {
                    key: "_requiredConfig",
                    value: function () {
                      var e = this._instance.config.capture_exceptions,
                        n = {
                          capture_unhandled_errors: !1,
                          capture_unhandled_rejections: !1,
                          capture_console_errors: !1,
                        };
                      return (
                        D(e)
                          ? (n = t({}, n, e))
                          : (R(e) ? this._remoteEnabled : e) &&
                            (n = t({}, n, {
                              capture_unhandled_errors: !0,
                              capture_unhandled_rejections: !0,
                            })),
                        n
                      );
                    },
                  },
                  {
                    key: "isEnabled",
                    get: function () {
                      return (
                        this._config.capture_console_errors ||
                        this._config.capture_unhandled_errors ||
                        this._config.capture_unhandled_rejections
                      );
                    },
                  },
                  {
                    key: "startIfEnabled",
                    value: function () {
                      this.isEnabled &&
                        (on.info("enabled"),
                        this._loadScript(this._startCapturing));
                    },
                  },
                  {
                    key: "_loadScript",
                    value: function (e) {
                      var t, n;
                      (null != (t = y.__PosthogExtensions__) &&
                        t.errorWrappingFunctions &&
                        e(),
                        null == (n = y.__PosthogExtensions__) ||
                          null == n.loadExternalDependency ||
                          n.loadExternalDependency(
                            this._instance,
                            "exception-autocapture",
                            function (t) {
                              if (t)
                                return on.error("failed to load script", t);
                              e();
                            },
                          ));
                    },
                  },
                  {
                    key: "_stopCapturing",
                    value: function () {
                      var e, t, n;
                      (null == (e = this._unwrapOnError) || e.call(this),
                        (this._unwrapOnError = void 0),
                        null == (t = this._unwrapUnhandledRejection) ||
                          t.call(this),
                        (this._unwrapUnhandledRejection = void 0),
                        null == (n = this._unwrapConsoleError) || n.call(this),
                        (this._unwrapConsoleError = void 0));
                    },
                  },
                  {
                    key: "onRemoteConfig",
                    value: function (e) {
                      var t = e.autocaptureExceptions;
                      ((this._remoteEnabled = !!t || !1),
                        (this._config = this._requiredConfig()),
                        this._instance.persistence &&
                          this._instance.persistence.register(
                            i({}, pe, this._remoteEnabled),
                          ),
                        this.startIfEnabled());
                    },
                  },
                  {
                    key: "captureException",
                    value: function (e) {
                      var t,
                        n = this._instance.requestRouter.endpointFor("ui");
                      e.$exception_personURL =
                        n +
                        "/project/" +
                        this._instance.config.token +
                        "/person/" +
                        this._instance.get_distinct_id();
                      var r =
                        null !== (t = e.$exception_list[0].type) && void 0 !== t
                          ? t
                          : "Exception";
                      this._rateLimiter.consumeRateLimit(r)
                        ? on.info(
                            "Skipping exception capture because of client rate limiting.",
                            { exception: e.$exception_list[0].type },
                          )
                        : this._instance.exceptions.sendExceptionEvent(e);
                    },
                  },
                ]),
                e
              );
            })();
          function sn(e) {
            return !R(Event) && ln(e, Event);
          }
          function ln(e, t) {
            try {
              return e instanceof t;
            } catch (e) {
              return !1;
            }
          }
          function cn(e) {
            switch (Object.prototype.toString.call(e)) {
              case "[object Error]":
              case "[object Exception]":
              case "[object DOMException]":
              case "[object DOMError]":
                return !0;
              default:
                return ln(e, Error);
            }
          }
          function un(e, t) {
            return Object.prototype.toString.call(e) === "[object " + t + "]";
          }
          function dn(e) {
            return un(e, "DOMError");
          }
          var pn = /\(error: (.*)\)/,
            fn = "?";
          function hn(e, t, n, r) {
            var i = {
              platform: "web:javascript",
              filename: e,
              function: "<anonymous>" === t ? fn : t,
              in_app: !0,
            };
            return (R(n) || (i.lineno = n), R(r) || (i.colno = r), i);
          }
          var vn = /^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,
            gn =
              /^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,
            mn = /\((\S*)(?::(\d+))(?::(\d+))\)/,
            xn =
              /^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,
            wn = /(\S+) line (\d+)(?: > eval line \d+)* > eval/i,
            bn = function () {
              for (
                var e = arguments.length, n = new Array(e), r = 0;
                r < e;
                r++
              )
                n[r] = arguments[r];
              var i = n
                .sort(function (e, t) {
                  return e[0] - t[0];
                })
                .map(function (e) {
                  return e[1];
                });
              return function (e, n) {
                void 0 === n && (n = 0);
                for (var r = [], o = e.split("\n"), a = n; a < o.length; a++) {
                  var s = o[a];
                  if (!(s.length > 1024)) {
                    var c = pn.test(s) ? s.replace(pn, "$1") : s;
                    if (!c.match(/\S*Error: /)) {
                      var u,
                        d = l(i);
                      try {
                        for (d.s(); !(u = d.n()).done; ) {
                          var p = (0, u.value)(c);
                          if (p) {
                            r.push(p);
                            break;
                          }
                        }
                      } catch (f) {
                        d.e(f);
                      } finally {
                        d.f();
                      }
                      if (r.length >= 50) break;
                    }
                  }
                }
                return (function (e) {
                  if (!e.length) return [];
                  var n = Array.from(e);
                  return (
                    n.reverse(),
                    n.slice(0, 50).map(function (e) {
                      return t({}, e, {
                        filename: e.filename || yn(n).filename,
                        function: e.function || fn,
                      });
                    })
                  );
                })(r);
              };
            }.apply(void 0, [
              [
                30,
                function (e) {
                  var t = vn.exec(e);
                  if (t) {
                    var n = s(t, 4),
                      r = n[1],
                      i = n[2],
                      o = n[3];
                    return hn(r, fn, +i, +o);
                  }
                  var a = gn.exec(e);
                  if (a) {
                    if (a[2] && 0 === a[2].indexOf("eval")) {
                      var l = mn.exec(a[2]);
                      l && ((a[2] = l[1]), (a[3] = l[2]), (a[4] = l[3]));
                    }
                    var c = Sn(a[1] || fn, a[2]),
                      u = s(c, 2),
                      d = u[0];
                    return hn(
                      u[1],
                      d,
                      a[3] ? +a[3] : void 0,
                      a[4] ? +a[4] : void 0,
                    );
                  }
                },
              ],
              [
                50,
                function (e) {
                  var t = xn.exec(e);
                  if (t) {
                    var n, r;
                    if (t[3] && t[3].indexOf(" > eval") > -1) {
                      var i = wn.exec(t[3]);
                      i &&
                        ((t[1] = t[1] || "eval"),
                        (t[3] = i[1]),
                        (t[4] = i[2]),
                        (t[5] = ""));
                    }
                    var o = t[3],
                      a = t[1] || fn;
                    return (
                      (n = Sn(a, o)),
                      (a = (r = s(n, 2))[0]),
                      hn(
                        (o = r[1]),
                        a,
                        t[4] ? +t[4] : void 0,
                        t[5] ? +t[5] : void 0,
                      )
                    );
                  }
                },
              ],
            ]);
          function yn(e) {
            return e[e.length - 1] || {};
          }
          var kn,
            Cn,
            jn,
            Sn = function (e, t) {
              var n = -1 !== e.indexOf("safari-extension"),
                r = -1 !== e.indexOf("safari-web-extension");
              return n || r
                ? [
                    -1 !== e.indexOf("@") ? e.split("@")[0] : fn,
                    n ? "safari-extension:" + t : "safari-web-extension:" + t,
                  ]
                : [e, t];
            },
            _n =
              /^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;
          function En(e, t) {
            void 0 === t && (t = 0);
            var n = e.stacktrace || e.stack || "",
              r = (function (e) {
                return e && In.test(e.message) ? 1 : 0;
              })(e);
            try {
              var i = bn,
                o = (function (e, t) {
                  var n = (function (e) {
                    var t = globalThis._posthogChunkIds;
                    if (!t) return {};
                    var n = Object.keys(t);
                    return (
                      (jn && n.length === Cn) ||
                        ((Cn = n.length),
                        (jn = n.reduce(function (n, r) {
                          kn || (kn = {});
                          var i = kn[r];
                          if (i) n[i[0]] = i[1];
                          else
                            for (var o = e(r), a = o.length - 1; a >= 0; a--) {
                              var s = o[a],
                                l = null == s ? void 0 : s.filename,
                                c = t[r];
                              if (l && c) {
                                ((n[l] = c), (kn[r] = [l, c]));
                                break;
                              }
                            }
                          return n;
                        }, {}))),
                      jn
                    );
                  })(t);
                  return (
                    e.forEach(function (e) {
                      e.filename && (e.chunk_id = n[e.filename]);
                    }),
                    e
                  );
                })(i(n, r), i);
              return o.slice(0, o.length - t);
            } catch (e) {}
            return [];
          }
          var In = /Minified React error #\d+;/i;
          function Pn(e, t) {
            var n = (function (e, t) {
              var n,
                r,
                i = En(e),
                o =
                  null === (n = null == t ? void 0 : t.handled) ||
                  void 0 === n ||
                  n,
                a =
                  null !== (r = null == t ? void 0 : t.synthetic) &&
                  void 0 !== r &&
                  r;
              return {
                type:
                  null != t && t.overrideExceptionType
                    ? t.overrideExceptionType
                    : e.name,
                value: (function (e) {
                  var t = e.message;
                  return t.error && "string" == typeof t.error.message
                    ? String(t.error.message)
                    : String(t);
                })(e),
                stacktrace: { frames: i, type: "raw" },
                mechanism: { handled: o, synthetic: a },
              };
            })(e, t);
            return e.cause && cn(e.cause) && e.cause !== e
              ? [n].concat(
                  r(
                    Pn(e.cause, {
                      handled: null == t ? void 0 : t.handled,
                      synthetic: null == t ? void 0 : t.synthetic,
                    }),
                  ),
                )
              : [n];
          }
          function An(e, t) {
            return { $exception_list: Pn(e, t), $exception_level: "error" };
          }
          function Fn(e, t) {
            var n,
              r,
              i,
              o =
                null === (n = null == t ? void 0 : t.handled) ||
                void 0 === n ||
                n,
              a =
                null === (r = null == t ? void 0 : t.synthetic) ||
                void 0 === r ||
                r,
              s = {
                type:
                  null != t && t.overrideExceptionType
                    ? t.overrideExceptionType
                    : null !==
                          (i = null == t ? void 0 : t.defaultExceptionType) &&
                        void 0 !== i
                      ? i
                      : "Error",
                value: e || (null == t ? void 0 : t.defaultExceptionMessage),
                mechanism: { handled: o, synthetic: a },
              };
            if (null != t && t.syntheticException) {
              var l = En(t.syntheticException, 1);
              l.length && (s.stacktrace = { frames: l, type: "raw" });
            }
            return { $exception_list: [s], $exception_level: "error" };
          }
          function Ln(e) {
            return B(e) && !M(e) && _.indexOf(e) >= 0;
          }
          function On(e, n) {
            var r = e.error,
              i = e.event,
              o = { $exception_list: [] },
              a = r || i;
            if (
              dn(a) ||
              (function (e) {
                return un(e, "DOMException");
              })(a)
            ) {
              var s = a;
              if (
                (function (e) {
                  return "stack" in e;
                })(a)
              )
                o = An(a, n);
              else {
                var l = s.name || (dn(s) ? "DOMError" : "DOMException"),
                  c = s.message ? l + ": " + s.message : l;
                o = Fn(
                  c,
                  t({}, n, {
                    overrideExceptionType: dn(s) ? "DOMError" : "DOMException",
                    defaultExceptionMessage: c,
                  }),
                );
              }
              return (
                "code" in s && (o.$exception_DOMException_code = "" + s.code),
                o
              );
            }
            if (
              (function (e) {
                return un(e, "ErrorEvent");
              })(a) &&
              a.error
            )
              return An(a.error, n);
            if (cn(a)) return An(a, n);
            if (
              (function (e) {
                return un(e, "Object");
              })(a) ||
              sn(a)
            )
              return (function (e, t) {
                var n,
                  r,
                  i =
                    null === (n = null == t ? void 0 : t.handled) ||
                    void 0 === n ||
                    n,
                  o =
                    null === (r = null == t ? void 0 : t.synthetic) ||
                    void 0 === r ||
                    r,
                  a =
                    null != t && t.overrideExceptionType
                      ? t.overrideExceptionType
                      : sn(e)
                        ? e.constructor.name
                        : "Error",
                  s =
                    "Non-Error 'exception' captured with keys: " +
                    (function (e, t) {
                      void 0 === t && (t = 40);
                      var n = Object.keys(e);
                      if ((n.sort(), !n.length)) return "[object has no keys]";
                      for (var r = n.length; r > 0; r--) {
                        var i = n.slice(0, r).join(", ");
                        if (!(i.length > t))
                          return r === n.length || i.length <= t
                            ? i
                            : i.slice(0, t) + "...";
                      }
                      return "";
                    })(e),
                  l = {
                    type: a,
                    value: s,
                    mechanism: { handled: i, synthetic: o },
                  };
                if (null != t && t.syntheticException) {
                  var c = En(null == t ? void 0 : t.syntheticException, 1);
                  c.length && (l.stacktrace = { frames: c, type: "raw" });
                }
                return {
                  $exception_list: [l],
                  $exception_level: Ln(e.level) ? e.level : "error",
                };
              })(a, n);
            if (R(r) && B(i)) {
              var u = "Error",
                d = i,
                p = i.match(_n);
              return (
                p && ((u = p[1]), (d = p[2])),
                Fn(
                  d,
                  t({}, n, {
                    overrideExceptionType: u,
                    defaultExceptionMessage: d,
                  }),
                )
              );
            }
            return Fn(a, n);
          }
          function Zn(e, t, n) {
            try {
              if (!(t in e)) return function () {};
              var r = e[t],
                i = n(r);
              return (
                N(i) &&
                  ((i.prototype = i.prototype || {}),
                  Object.defineProperties(i, {
                    __posthog_wrapped__: { enumerable: !1, value: !0 },
                  })),
                (e[t] = i),
                function () {
                  e[t] = r;
                }
              );
            } catch (e) {
              return function () {};
            }
          }
          var Nn = (function () {
            function e(t) {
              var n;
              (o(this, e),
                (this._instance = t),
                (this._lastPathname =
                  (null == c || null == (n = c.location)
                    ? void 0
                    : n.pathname) || ""));
            }
            return (
              a(e, [
                {
                  key: "isEnabled",
                  get: function () {
                    return (
                      "history_change" ===
                      this._instance.config.capture_pageview
                    );
                  },
                },
                {
                  key: "startIfEnabled",
                  value: function () {
                    this.isEnabled &&
                      (q.info("History API monitoring enabled, starting..."),
                      this.monitorHistoryChanges());
                  },
                },
                {
                  key: "stop",
                  value: function () {
                    (this._popstateListener && this._popstateListener(),
                      (this._popstateListener = void 0),
                      q.info("History API monitoring stopped"));
                  },
                },
                {
                  key: "monitorHistoryChanges",
                  value: function () {
                    var e, t;
                    if (c && c.history) {
                      var n = this;
                      ((null != (e = c.history.pushState) &&
                        e.__posthog_wrapped__) ||
                        Zn(c.history, "pushState", function (e) {
                          return function (t, r, i) {
                            (e.call(this, t, r, i),
                              n._capturePageview("pushState"));
                          };
                        }),
                        (null != (t = c.history.replaceState) &&
                          t.__posthog_wrapped__) ||
                          Zn(c.history, "replaceState", function (e) {
                            return function (t, r, i) {
                              (e.call(this, t, r, i),
                                n._capturePageview("replaceState"));
                            };
                          }),
                        this._setupPopstateListener());
                    }
                  },
                },
                {
                  key: "_capturePageview",
                  value: function (e) {
                    try {
                      var t,
                        n =
                          null == c || null == (t = c.location)
                            ? void 0
                            : t.pathname;
                      if (!n) return;
                      (n !== this._lastPathname &&
                        this.isEnabled &&
                        this._instance.capture("$pageview", {
                          navigation_type: e,
                        }),
                        (this._lastPathname = n));
                    } catch (t) {
                      q.error("Error capturing " + e + " pageview", t);
                    }
                  },
                },
                {
                  key: "_setupPopstateListener",
                  value: function () {
                    var e = this;
                    if (!this._popstateListener) {
                      var t = function () {
                        e._capturePageview("popstate");
                      };
                      (ae(c, "popstate", t),
                        (this._popstateListener = function () {
                          c && c.removeEventListener("popstate", t);
                        }));
                    }
                  },
                },
              ]),
              e
            );
          })();
          function Dn(e) {
            var t, n;
            return (
              (null ==
              (t = JSON.stringify(
                e,
                ((n = []),
                function (e, t) {
                  if (D(t)) {
                    for (; n.length > 0 && n[n.length - 1] !== this; ) n.pop();
                    return n.includes(t) ? "[Circular]" : (n.push(t), t);
                  }
                  return t;
                }),
              ))
                ? void 0
                : t.length) || 0
            );
          }
          function Tn(e, t) {
            if (
              (void 0 === t && (t = 6606028.8),
              e.size >= t && e.data.length > 1)
            ) {
              var n = Math.floor(e.data.length / 2),
                r = e.data.slice(0, n),
                i = e.data.slice(n);
              return [
                Tn({
                  size: Dn(r),
                  data: r,
                  sessionId: e.sessionId,
                  windowId: e.windowId,
                }),
                Tn({
                  size: Dn(i),
                  data: i,
                  sessionId: e.sessionId,
                  windowId: e.windowId,
                }),
              ].flatMap(function (e) {
                return e;
              });
            }
            return [e];
          }
          var Rn = (function (e) {
              return (
                (e[(e.DomContentLoaded = 0)] = "DomContentLoaded"),
                (e[(e.Load = 1)] = "Load"),
                (e[(e.FullSnapshot = 2)] = "FullSnapshot"),
                (e[(e.IncrementalSnapshot = 3)] = "IncrementalSnapshot"),
                (e[(e.Meta = 4)] = "Meta"),
                (e[(e.Custom = 5)] = "Custom"),
                (e[(e.Plugin = 6)] = "Plugin"),
                e
              );
            })(Rn || {}),
            Bn = (function (e) {
              return (
                (e[(e.Mutation = 0)] = "Mutation"),
                (e[(e.MouseMove = 1)] = "MouseMove"),
                (e[(e.MouseInteraction = 2)] = "MouseInteraction"),
                (e[(e.Scroll = 3)] = "Scroll"),
                (e[(e.ViewportResize = 4)] = "ViewportResize"),
                (e[(e.Input = 5)] = "Input"),
                (e[(e.TouchMove = 6)] = "TouchMove"),
                (e[(e.MediaInteraction = 7)] = "MediaInteraction"),
                (e[(e.StyleSheetRule = 8)] = "StyleSheetRule"),
                (e[(e.CanvasMutation = 9)] = "CanvasMutation"),
                (e[(e.Font = 10)] = "Font"),
                (e[(e.Log = 11)] = "Log"),
                (e[(e.Drag = 12)] = "Drag"),
                (e[(e.StyleDeclaration = 13)] = "StyleDeclaration"),
                (e[(e.Selection = 14)] = "Selection"),
                (e[(e.AdoptedStyleSheet = 15)] = "AdoptedStyleSheet"),
                (e[(e.CustomElement = 16)] = "CustomElement"),
                e
              );
            })(Bn || {}),
            Mn = "[SessionRecording]",
            zn = "redacted",
            Hn = {
              initiatorTypes: [
                "audio",
                "beacon",
                "body",
                "css",
                "early-hint",
                "embed",
                "fetch",
                "frame",
                "iframe",
                "icon",
                "image",
                "img",
                "input",
                "link",
                "navigation",
                "object",
                "ping",
                "script",
                "track",
                "video",
                "xmlhttprequest",
              ],
              maskRequestFn: function (e) {
                return e;
              },
              recordHeaders: !1,
              recordBody: !1,
              recordInitialRequests: !1,
              recordPerformance: !1,
              performanceEntryTypeToObserve: [
                "first-input",
                "navigation",
                "paint",
                "resource",
              ],
              payloadSizeLimitBytes: 1e6,
              payloadHostDenyList: [
                ".lr-ingest.io",
                ".ingest.sentry.io",
                ".clarity.ms",
                "analytics.google.com",
                "bam.nr-data.net",
              ],
            },
            Un = [
              "authorization",
              "x-forwarded-for",
              "authorization",
              "cookie",
              "set-cookie",
              "x-api-key",
              "x-real-ip",
              "remote-addr",
              "forwarded",
              "proxy-authorization",
              "x-csrf-token",
              "x-csrftoken",
              "x-xsrf-token",
            ],
            Vn = [
              "password",
              "secret",
              "passwd",
              "api_key",
              "apikey",
              "auth",
              "credentials",
              "mysql_pwd",
              "privatekey",
              "private_key",
              "token",
            ],
            Wn = ["/s/", "/e/", "/i/"];
          function qn(e, t, n, r) {
            if (H(e)) return e;
            var i =
              (null == t ? void 0 : t["content-length"]) ||
              (function (e) {
                return new Blob([e]).size;
              })(e);
            return (
              B(i) && (i = parseInt(i)),
              i > n
                ? Mn + " " + r + " body too large to record (" + i + " bytes)"
                : e
            );
          }
          function $n(e, t) {
            if (H(e)) return e;
            var n = e;
            return (
              ht(n, !1) || (n = Mn + " " + t + " body " + zn),
              K(Vn, function (e) {
                var r, i;
                null != (r = n) &&
                  r.length &&
                  -1 !== (null == (i = n) ? void 0 : i.indexOf(e)) &&
                  (n =
                    Mn + " " + t + " body " + zn + " as might contain: " + e);
              }),
              n
            );
          }
          var Gn = function (e, n) {
              var i,
                o,
                a,
                s = {
                  payloadSizeLimitBytes: Hn.payloadSizeLimitBytes,
                  performanceEntryTypeToObserve: r(
                    Hn.performanceEntryTypeToObserve,
                  ),
                  payloadHostDenyList: [].concat(
                    r(n.payloadHostDenyList || []),
                    r(Hn.payloadHostDenyList),
                  ),
                },
                l = !1 !== e.session_recording.recordHeaders && n.recordHeaders,
                c = !1 !== e.session_recording.recordBody && n.recordBody,
                u = !1 !== e.capture_performance && n.recordPerformance,
                d =
                  ((i = s),
                  (a = Math.min(
                    1e6,
                    null !== (o = i.payloadSizeLimitBytes) && void 0 !== o
                      ? o
                      : 1e6,
                  )),
                  function (e) {
                    return (
                      null != e &&
                        e.requestBody &&
                        (e.requestBody = qn(
                          e.requestBody,
                          e.requestHeaders,
                          a,
                          "Request",
                        )),
                      null != e &&
                        e.responseBody &&
                        (e.responseBody = qn(
                          e.responseBody,
                          e.responseHeaders,
                          a,
                          "Response",
                        )),
                      e
                    );
                  }),
                p = function (t) {
                  return d(
                    (function (e, t) {
                      var n,
                        r = kt(e.name),
                        i =
                          0 === t.indexOf("http")
                            ? null == (n = kt(t))
                              ? void 0
                              : n.pathname
                            : t;
                      "/" === i && (i = "");
                      var o =
                        null == r ? void 0 : r.pathname.replace(i || "", "");
                      if (
                        !(
                          r &&
                          o &&
                          Wn.some(function (e) {
                            return 0 === o.indexOf(e);
                          })
                        )
                      )
                        return e;
                    })(
                      ((r = (n = t).requestHeaders),
                      H(r) ||
                        K(Object.keys(null != r ? r : {}), function (e) {
                          Un.includes(e.toLowerCase()) && (r[e] = zn);
                        }),
                      n),
                      e.api_host,
                    ),
                  );
                  var n, r;
                },
                f = N(e.session_recording.maskNetworkRequestFn);
              return (
                f &&
                  N(e.session_recording.maskCapturedNetworkRequestFn) &&
                  q.warn(
                    "Both `maskNetworkRequestFn` and `maskCapturedNetworkRequestFn` are defined. `maskNetworkRequestFn` will be ignored.",
                  ),
                f &&
                  (e.session_recording.maskCapturedNetworkRequestFn = function (
                    n,
                  ) {
                    var r = e.session_recording.maskNetworkRequestFn({
                      url: n.name,
                    });
                    return t({}, n, { name: null == r ? void 0 : r.url });
                  }),
                (s.maskRequestFn = N(
                  e.session_recording.maskCapturedNetworkRequestFn,
                )
                  ? function (t) {
                      var n,
                        r = p(t);
                      return r &&
                        null !==
                          (n =
                            null ==
                            e.session_recording.maskCapturedNetworkRequestFn
                              ? void 0
                              : e.session_recording.maskCapturedNetworkRequestFn(
                                  r,
                                )) &&
                        void 0 !== n
                        ? n
                        : void 0;
                    }
                  : function (e) {
                      return (function (e) {
                        if (!R(e))
                          return (
                            (e.requestBody = $n(e.requestBody, "Request")),
                            (e.responseBody = $n(e.responseBody, "Response")),
                            e
                          );
                      })(p(e));
                    }),
                t({}, Hn, s, {
                  recordHeaders: l,
                  recordBody: c,
                  recordPerformance: u,
                  recordInitialRequests: u,
                })
              );
            },
            Yn = a(function e(t, n) {
              var r,
                i,
                a = this;
              (o(this, e),
                void 0 === n && (n = {}),
                (this._loggedTracker = {}),
                (this._onNodeRateLimited = function (e) {
                  if (!a._loggedTracker[e]) {
                    var t, n;
                    a._loggedTracker[e] = !0;
                    var r = a._getNode(e);
                    null == (t = (n = a._options).onBlockedNode) ||
                      t.call(n, e, r);
                  }
                }),
                (this._getNodeOrRelevantParent = function (e) {
                  var t = a._getNode(e);
                  if (
                    "svg" !== (null == t ? void 0 : t.nodeName) &&
                    t instanceof Element
                  ) {
                    var n = t.closest("svg");
                    if (n) return [a._rrweb.mirror.getId(n), n];
                  }
                  return [e, t];
                }),
                (this._getNode = function (e) {
                  return a._rrweb.mirror.getNode(e);
                }),
                (this._numberOfChanges = function (e) {
                  var t, n, r, i, o, a, s, l;
                  return (
                    (null !==
                      (t = null == (n = e.removes) ? void 0 : n.length) &&
                    void 0 !== t
                      ? t
                      : 0) +
                    (null !==
                      (r = null == (i = e.attributes) ? void 0 : i.length) &&
                    void 0 !== r
                      ? r
                      : 0) +
                    (null !== (o = null == (a = e.texts) ? void 0 : a.length) &&
                    void 0 !== o
                      ? o
                      : 0) +
                    (null !== (s = null == (l = e.adds) ? void 0 : l.length) &&
                    void 0 !== s
                      ? s
                      : 0)
                  );
                }),
                (this.throttleMutations = function (e) {
                  if (3 !== e.type || 0 !== e.data.source) return e;
                  var t = e.data,
                    n = a._numberOfChanges(t);
                  t.attributes &&
                    (t.attributes = t.attributes.filter(function (e) {
                      var t = a._getNodeOrRelevantParent(e.id),
                        n = s(t, 1)[0];
                      return !a._rateLimiter.consumeRateLimit(n) && e;
                    }));
                  var r = a._numberOfChanges(t);
                  return 0 !== r || n === r ? e : void 0;
                }),
                (this._rrweb = t),
                (this._options = n),
                (this._rateLimiter = new rn({
                  bucketSize:
                    null !== (r = this._options.bucketSize) && void 0 !== r
                      ? r
                      : 100,
                  refillRate:
                    null !== (i = this._options.refillRate) && void 0 !== i
                      ? i
                      : 10,
                  refillInterval: 1e3,
                  _onBucketRateLimited: this._onNodeRateLimited,
                })));
            }),
            Kn = Uint8Array,
            Qn = Uint16Array,
            Xn = Uint32Array,
            Jn = new Kn([
              0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4,
              4, 4, 5, 5, 5, 5, 0, 0, 0, 0,
            ]),
            er = new Kn([
              0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9,
              10, 10, 11, 11, 12, 12, 13, 13, 0, 0,
            ]),
            tr = new Kn([
              16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15,
            ]),
            nr = function (e, t) {
              for (var n = new Qn(31), r = 0; r < 31; ++r)
                n[r] = t += 1 << e[r - 1];
              var i = new Xn(n[30]);
              for (r = 1; r < 30; ++r)
                for (var o = n[r]; o < n[r + 1]; ++o)
                  i[o] = ((o - n[r]) << 5) | r;
              return [n, i];
            },
            rr = nr(Jn, 2),
            ir = rr[0],
            or = rr[1];
          ((ir[28] = 258), (or[258] = 28));
          for (
            var ar = nr(er, 0)[1], sr = new Qn(32768), lr = 0;
            lr < 32768;
            ++lr
          ) {
            var cr = ((43690 & lr) >>> 1) | ((21845 & lr) << 1);
            ((cr =
              ((61680 & (cr = ((52428 & cr) >>> 2) | ((13107 & cr) << 2))) >>>
                4) |
              ((3855 & cr) << 4)),
              (sr[lr] = (((65280 & cr) >>> 8) | ((255 & cr) << 8)) >>> 1));
          }
          var ur = function (e, t, n) {
              for (var r = e.length, i = 0, o = new Qn(t); i < r; ++i)
                ++o[e[i] - 1];
              var a,
                s = new Qn(t);
              for (i = 0; i < t; ++i) s[i] = (s[i - 1] + o[i - 1]) << 1;
              if (n) {
                a = new Qn(1 << t);
                var l = 15 - t;
                for (i = 0; i < r; ++i)
                  if (e[i])
                    for (
                      var c = (i << 4) | e[i],
                        u = t - e[i],
                        d = s[e[i] - 1]++ << u,
                        p = d | ((1 << u) - 1);
                      d <= p;
                      ++d
                    )
                      a[sr[d] >>> l] = c;
              } else
                for (a = new Qn(r), i = 0; i < r; ++i)
                  a[i] = sr[s[e[i] - 1]++] >>> (15 - e[i]);
              return a;
            },
            dr = new Kn(288);
          for (lr = 0; lr < 144; ++lr) dr[lr] = 8;
          for (lr = 144; lr < 256; ++lr) dr[lr] = 9;
          for (lr = 256; lr < 280; ++lr) dr[lr] = 7;
          for (lr = 280; lr < 288; ++lr) dr[lr] = 8;
          var pr = new Kn(32);
          for (lr = 0; lr < 32; ++lr) pr[lr] = 5;
          var fr = ur(dr, 9, 0),
            hr = ur(pr, 5, 0),
            vr = function (e) {
              return ((e / 8) >> 0) + (7 & e && 1);
            },
            gr = function (e, t, n) {
              (null == n || n > e.length) && (n = e.length);
              var r = new (e instanceof Qn ? Qn : e instanceof Xn ? Xn : Kn)(
                n - t,
              );
              return (r.set(e.subarray(t, n)), r);
            },
            mr = function (e, t, n) {
              n <<= 7 & t;
              var r = (t / 8) >> 0;
              ((e[r] |= n), (e[r + 1] |= n >>> 8));
            },
            xr = function (e, t, n) {
              n <<= 7 & t;
              var r = (t / 8) >> 0;
              ((e[r] |= n), (e[r + 1] |= n >>> 8), (e[r + 2] |= n >>> 16));
            },
            wr = function (e, t) {
              for (var n = [], r = 0; r < e.length; ++r)
                e[r] && n.push({ s: r, f: e[r] });
              var i = n.length,
                o = n.slice();
              if (!i) return [new Kn(0), 0];
              if (1 == i) {
                var a = new Kn(n[0].s + 1);
                return ((a[n[0].s] = 1), [a, 1]);
              }
              (n.sort(function (e, t) {
                return e.f - t.f;
              }),
                n.push({ s: -1, f: 25001 }));
              var s = n[0],
                l = n[1],
                c = 0,
                u = 1,
                d = 2;
              for (n[0] = { s: -1, f: s.f + l.f, l: s, r: l }; u != i - 1; )
                ((s = n[n[c].f < n[d].f ? c++ : d++]),
                  (l = n[c != u && n[c].f < n[d].f ? c++ : d++]),
                  (n[u++] = { s: -1, f: s.f + l.f, l: s, r: l }));
              var p = o[0].s;
              for (r = 1; r < i; ++r) o[r].s > p && (p = o[r].s);
              var f = new Qn(p + 1),
                h = br(n[u - 1], f, 0);
              if (h > t) {
                r = 0;
                var v = 0,
                  g = h - t,
                  m = 1 << g;
                for (
                  o.sort(function (e, t) {
                    return f[t.s] - f[e.s] || e.f - t.f;
                  });
                  r < i;
                  ++r
                ) {
                  var x = o[r].s;
                  if (!(f[x] > t)) break;
                  ((v += m - (1 << (h - f[x]))), (f[x] = t));
                }
                for (v >>>= g; v > 0; ) {
                  var w = o[r].s;
                  f[w] < t ? (v -= 1 << (t - f[w]++ - 1)) : ++r;
                }
                for (; r >= 0 && v; --r) {
                  var b = o[r].s;
                  f[b] == t && (--f[b], ++v);
                }
                h = t;
              }
              return [new Kn(f), h];
            },
            br = function e(t, n, r) {
              return -1 == t.s
                ? Math.max(e(t.l, n, r + 1), e(t.r, n, r + 1))
                : (n[t.s] = r);
            },
            yr = function (e) {
              for (var t = e.length; t && !e[--t]; );
              for (
                var n = new Qn(++t),
                  r = 0,
                  i = e[0],
                  o = 1,
                  a = function (e) {
                    n[r++] = e;
                  },
                  s = 1;
                s <= t;
                ++s
              )
                if (e[s] == i && s != t) ++o;
                else {
                  if (!i && o > 2) {
                    for (; o > 138; o -= 138) a(32754);
                    o > 2 &&
                      (a(
                        o > 10
                          ? ((o - 11) << 5) | 28690
                          : ((o - 3) << 5) | 12305,
                      ),
                      (o = 0));
                  } else if (o > 3) {
                    for (a(i), --o; o > 6; o -= 6) a(8304);
                    o > 2 && (a(((o - 3) << 5) | 8208), (o = 0));
                  }
                  for (; o--; ) a(i);
                  ((o = 1), (i = e[s]));
                }
              return [n.subarray(0, r), t];
            },
            kr = function (e, t) {
              for (var n = 0, r = 0; r < t.length; ++r) n += e[r] * t[r];
              return n;
            },
            Cr = function (e, t, n) {
              var r = n.length,
                i = vr(t + 2);
              ((e[i] = 255 & r),
                (e[i + 1] = r >>> 8),
                (e[i + 2] = 255 ^ e[i]),
                (e[i + 3] = 255 ^ e[i + 1]));
              for (var o = 0; o < r; ++o) e[i + o + 4] = n[o];
              return 8 * (i + 4 + r);
            },
            jr = function (e, t, n, r, i, o, a, s, l, c, u) {
              (mr(t, u++, n), ++i[256]);
              for (
                var d = wr(i, 15),
                  p = d[0],
                  f = d[1],
                  h = wr(o, 15),
                  v = h[0],
                  g = h[1],
                  m = yr(p),
                  x = m[0],
                  w = m[1],
                  b = yr(v),
                  y = b[0],
                  k = b[1],
                  C = new Qn(19),
                  j = 0;
                j < x.length;
                ++j
              )
                C[31 & x[j]]++;
              for (j = 0; j < y.length; ++j) C[31 & y[j]]++;
              for (
                var S = wr(C, 7), _ = S[0], E = S[1], I = 19;
                I > 4 && !_[tr[I - 1]];
                --I
              );
              var P,
                A,
                F,
                L,
                O = (c + 5) << 3,
                Z = kr(i, dr) + kr(o, pr) + a,
                N =
                  kr(i, p) +
                  kr(o, v) +
                  a +
                  14 +
                  3 * I +
                  kr(C, _) +
                  (2 * C[16] + 3 * C[17] + 7 * C[18]);
              if (O <= Z && O <= N) return Cr(t, u, e.subarray(l, l + c));
              if ((mr(t, u, 1 + (N < Z)), (u += 2), N < Z)) {
                ((P = ur(p, f, 0)), (A = p), (F = ur(v, g, 0)), (L = v));
                var D = ur(_, E, 0);
                for (
                  mr(t, u, w - 257),
                    mr(t, u + 5, k - 1),
                    mr(t, u + 10, I - 4),
                    u += 14,
                    j = 0;
                  j < I;
                  ++j
                )
                  mr(t, u + 3 * j, _[tr[j]]);
                u += 3 * I;
                for (var T = [x, y], R = 0; R < 2; ++R) {
                  var B = T[R];
                  for (j = 0; j < B.length; ++j) {
                    var M = 31 & B[j];
                    (mr(t, u, D[M]),
                      (u += _[M]),
                      M > 15 &&
                        (mr(t, u, (B[j] >>> 5) & 127), (u += B[j] >>> 12)));
                  }
                }
              } else ((P = fr), (A = dr), (F = hr), (L = pr));
              for (j = 0; j < s; ++j)
                if (r[j] > 255) {
                  ((M = (r[j] >>> 18) & 31),
                    xr(t, u, P[M + 257]),
                    (u += A[M + 257]),
                    M > 7 && (mr(t, u, (r[j] >>> 23) & 31), (u += Jn[M])));
                  var z = 31 & r[j];
                  (xr(t, u, F[z]),
                    (u += L[z]),
                    z > 3 && (xr(t, u, (r[j] >>> 5) & 8191), (u += er[z])));
                } else (xr(t, u, P[r[j]]), (u += A[r[j]]));
              return (xr(t, u, P[256]), u + A[256]);
            },
            Sr = new Xn([
              65540, 131080, 131088, 131104, 262176, 1048704, 1048832, 2114560,
              2117632,
            ]),
            _r = (function () {
              for (var e = new Xn(256), t = 0; t < 256; ++t) {
                for (var n = t, r = 9; --r; )
                  n = (1 & n && 3988292384) ^ (n >>> 1);
                e[t] = n;
              }
              return e;
            })(),
            Er = function (e, t, n) {
              for (; n; ++t) ((e[t] = n), (n >>>= 8));
            };
          function Ir(e, t) {
            void 0 === t && (t = {});
            var n = (function () {
                var e = 4294967295;
                return {
                  p: function (t) {
                    for (var n = e, r = 0; r < t.length; ++r)
                      n = _r[(255 & n) ^ t[r]] ^ (n >>> 8);
                    e = n;
                  },
                  d: function () {
                    return 4294967295 ^ e;
                  },
                };
              })(),
              r = e.length;
            n.p(e);
            var i = (function (e, t, n, r, i) {
                return (function (e, t, n, r, i, o) {
                  var a = e.length,
                    s = new Kn(r + a + 5 * (1 + Math.floor(a / 7e3)) + i),
                    l = s.subarray(r, s.length - i),
                    c = 0;
                  if (!t || a < 8)
                    for (var u = 0; u <= a; u += 65535) {
                      var d = u + 65535;
                      d < a
                        ? (c = Cr(l, c, e.subarray(u, d)))
                        : ((l[u] = o), (c = Cr(l, c, e.subarray(u, a))));
                    }
                  else {
                    for (
                      var p = Sr[t - 1],
                        f = p >>> 13,
                        h = 8191 & p,
                        v = (1 << n) - 1,
                        g = new Qn(32768),
                        m = new Qn(v + 1),
                        x = Math.ceil(n / 3),
                        w = 2 * x,
                        b = function (t) {
                          return (e[t] ^ (e[t + 1] << x) ^ (e[t + 2] << w)) & v;
                        },
                        y = new Xn(25e3),
                        k = new Qn(288),
                        C = new Qn(32),
                        j = 0,
                        S = 0,
                        _ = ((u = 0), 0),
                        E = 0,
                        I = 0;
                      u < a;
                      ++u
                    ) {
                      var P = b(u),
                        A = 32767 & u,
                        F = m[P];
                      if (((g[A] = F), (m[P] = A), E <= u)) {
                        var L = a - u;
                        if ((j > 7e3 || _ > 24576) && L > 423) {
                          ((c = jr(e, l, 0, y, k, C, S, _, I, u - I, c)),
                            (_ = j = S = 0),
                            (I = u));
                          for (var O = 0; O < 286; ++O) k[O] = 0;
                          for (O = 0; O < 30; ++O) C[O] = 0;
                        }
                        var Z = 2,
                          N = 0,
                          D = h,
                          T = (A - F) & 32767;
                        if (L > 2 && P == b(u - T))
                          for (
                            var R = Math.min(f, L) - 1,
                              B = Math.min(32767, u),
                              M = Math.min(258, L);
                            T <= B && --D && A != F;
                          ) {
                            if (e[u + Z] == e[u + Z - T]) {
                              for (
                                var z = 0;
                                z < M && e[u + z] == e[u + z - T];
                                ++z
                              );
                              if (z > Z) {
                                if (((Z = z), (N = T), z > R)) break;
                                var H = Math.min(T, z - 2),
                                  U = 0;
                                for (O = 0; O < H; ++O) {
                                  var V = (u - T + O + 32768) & 32767,
                                    W = (V - g[V] + 32768) & 32767;
                                  W > U && ((U = W), (F = V));
                                }
                              }
                            }
                            T += ((A = F) - (F = g[A]) + 32768) & 32767;
                          }
                        if (N) {
                          y[_++] = 268435456 | (or[Z] << 18) | ar[N];
                          var q = 31 & or[Z],
                            $ = 31 & ar[N];
                          ((S += Jn[q] + er[$]),
                            ++k[257 + q],
                            ++C[$],
                            (E = u + Z),
                            ++j);
                        } else ((y[_++] = e[u]), ++k[e[u]]);
                      }
                    }
                    c = jr(e, l, o, y, k, C, S, _, I, u - I, c);
                  }
                  return gr(s, 0, r + vr(c) + i);
                })(
                  e,
                  null == t.level ? 6 : t.level,
                  null == t.mem
                    ? Math.ceil(
                        1.5 * Math.max(8, Math.min(13, Math.log(e.length))),
                      )
                    : 12 + t.mem,
                  n,
                  r,
                  !i,
                );
              })(
                e,
                t,
                (function (e) {
                  return 10 + ((e.filename && e.filename.length + 1) || 0);
                })(t),
                8,
              ),
              o = i.length;
            return (
              (function (e, t) {
                var n = t.filename;
                if (
                  ((e[0] = 31),
                  (e[1] = 139),
                  (e[2] = 8),
                  (e[8] = t.level < 2 ? 4 : 9 == t.level ? 2 : 0),
                  (e[9] = 3),
                  0 != t.mtime &&
                    Er(e, 4, Math.floor(new Date(t.mtime || Date.now()) / 1e3)),
                  n)
                ) {
                  e[3] = 8;
                  for (var r = 0; r <= n.length; ++r)
                    e[r + 10] = n.charCodeAt(r);
                }
              })(i, t),
              Er(i, o - 8, n.d()),
              Er(i, o - 4, r),
              i
            );
          }
          function Pr(e, t) {
            var n = e.length;
            if ("undefined" != typeof TextEncoder)
              return new TextEncoder().encode(e);
            for (
              var r = new Kn(e.length + (e.length >>> 1)),
                i = 0,
                o = function (e) {
                  r[i++] = e;
                },
                a = 0;
              a < n;
              ++a
            ) {
              if (i + 5 > r.length) {
                var s = new Kn(i + 8 + ((n - a) << 1));
                (s.set(r), (r = s));
              }
              var l = e.charCodeAt(a);
              l < 128 || t
                ? o(l)
                : l < 2048
                  ? (o(192 | (l >>> 6)), o(128 | (63 & l)))
                  : l > 55295 && l < 57344
                    ? (o(
                        240 |
                          ((l =
                            (65536 + (1047552 & l)) |
                            (1023 & e.charCodeAt(++a))) >>>
                            18),
                      ),
                      o(128 | ((l >>> 12) & 63)),
                      o(128 | ((l >>> 6) & 63)),
                      o(128 | (63 & l)))
                    : (o(224 | (l >>> 12)),
                      o(128 | ((l >>> 6) & 63)),
                      o(128 | (63 & l)));
            }
            return gr(r, 0, i);
          }
          var Ar = "disabled",
            Fr = "sampled",
            Lr = "active",
            Or = "buffering",
            Zr = "paused",
            Nr = "trigger",
            Dr = Nr + "_activated",
            Tr = Nr + "_pending",
            Rr = Nr + "_" + Ar;
          function Br(e, t) {
            return t.some(function (t) {
              return "regex" === t.matching && new RegExp(t.url).test(e);
            });
          }
          var Mr = (function () {
              function e(t) {
                (o(this, e), (this._matchers = t));
              }
              return (
                a(e, [
                  {
                    key: "triggerStatus",
                    value: function (e) {
                      var t = this._matchers.map(function (t) {
                        return t.triggerStatus(e);
                      });
                      return t.includes(Dr) ? Dr : t.includes(Tr) ? Tr : Rr;
                    },
                  },
                  {
                    key: "stop",
                    value: function () {
                      this._matchers.forEach(function (e) {
                        return e.stop();
                      });
                    },
                  },
                ]),
                e
              );
            })(),
            zr = (function () {
              function e(t) {
                (o(this, e), (this._matchers = t));
              }
              return (
                a(e, [
                  {
                    key: "triggerStatus",
                    value: function (e) {
                      var t,
                        n = new Set(),
                        r = l(this._matchers);
                      try {
                        for (r.s(); !(t = r.n()).done; ) {
                          var i = t.value;
                          n.add(i.triggerStatus(e));
                        }
                      } catch (o) {
                        r.e(o);
                      } finally {
                        r.f();
                      }
                      switch ((n.delete(Rr), n.size)) {
                        case 0:
                          return Rr;
                        case 1:
                          return Array.from(n)[0];
                        default:
                          return Tr;
                      }
                    },
                  },
                  {
                    key: "stop",
                    value: function () {
                      this._matchers.forEach(function (e) {
                        return e.stop();
                      });
                    },
                  },
                ]),
                e
              );
            })(),
            Hr = (function () {
              function e() {
                o(this, e);
              }
              return (
                a(e, [
                  {
                    key: "triggerStatus",
                    value: function () {
                      return Tr;
                    },
                  },
                  { key: "stop", value: function () {} },
                ]),
                e
              );
            })(),
            Ur = (function () {
              function e(t) {
                (o(this, e),
                  (this._urlTriggers = []),
                  (this._urlBlocklist = []),
                  (this.urlBlocked = !1),
                  (this._instance = t));
              }
              return (
                a(e, [
                  {
                    key: "onRemoteConfig",
                    value: function (e) {
                      var t, n;
                      ((this._urlTriggers =
                        (null == (t = e.sessionRecording)
                          ? void 0
                          : t.urlTriggers) || []),
                        (this._urlBlocklist =
                          (null == (n = e.sessionRecording)
                            ? void 0
                            : n.urlBlocklist) || []));
                    },
                  },
                  {
                    key: "_urlTriggerStatus",
                    value: function (e) {
                      var t;
                      return 0 === this._urlTriggers.length
                        ? Rr
                        : (null == (t = this._instance)
                              ? void 0
                              : t.get_property(Ee)) === e
                          ? Dr
                          : Tr;
                    },
                  },
                  {
                    key: "triggerStatus",
                    value: function (e) {
                      var t = this._urlTriggerStatus(e),
                        n = t === Dr ? Dr : t === Tr ? Tr : Rr;
                      return (
                        this._instance.register_for_session({
                          $sdk_debug_replay_url_trigger_status: n,
                        }),
                        n
                      );
                    },
                  },
                  {
                    key: "checkUrlTriggerConditions",
                    value: function (e, t, n) {
                      if (void 0 !== c && c.location.href) {
                        var r = c.location.href,
                          i = this.urlBlocked,
                          o = Br(r, this._urlBlocklist);
                        (i && o) ||
                          (o && !i ? e() : !o && i && t(),
                          Br(r, this._urlTriggers) && n("url"));
                      }
                    },
                  },
                  { key: "stop", value: function () {} },
                ]),
                e
              );
            })(),
            Vr = (function () {
              function e(t) {
                (o(this, e),
                  (this.linkedFlag = null),
                  (this.linkedFlagSeen = !1),
                  (this._flaglistenerCleanup = function () {}),
                  (this._instance = t));
              }
              return (
                a(e, [
                  {
                    key: "triggerStatus",
                    value: function () {
                      var e = Tr;
                      return (
                        H(this.linkedFlag) && (e = Rr),
                        this.linkedFlagSeen && (e = Dr),
                        this._instance.register_for_session({
                          $sdk_debug_replay_linked_flag_trigger_status: e,
                        }),
                        e
                      );
                    },
                  },
                  {
                    key: "onRemoteConfig",
                    value: function (e, t) {
                      var n,
                        r = this;
                      if (
                        ((this.linkedFlag =
                          (null == (n = e.sessionRecording)
                            ? void 0
                            : n.linkedFlag) || null),
                        !H(this.linkedFlag) && !this.linkedFlagSeen)
                      ) {
                        var i = B(this.linkedFlag)
                            ? this.linkedFlag
                            : this.linkedFlag.flag,
                          o = B(this.linkedFlag)
                            ? null
                            : this.linkedFlag.variant;
                        this._flaglistenerCleanup =
                          this._instance.onFeatureFlags(function (e, n) {
                            var a = !1;
                            if (D(n) && i in n) {
                              var s = n[i];
                              a = V(s) ? !0 === s : o ? s === o : !!s;
                            }
                            ((r.linkedFlagSeen = a), a && t(i, o));
                          });
                      }
                    },
                  },
                  {
                    key: "stop",
                    value: function () {
                      this._flaglistenerCleanup();
                    },
                  },
                ]),
                e
              );
            })(),
            Wr = (function () {
              function e(t) {
                (o(this, e), (this._eventTriggers = []), (this._instance = t));
              }
              return (
                a(e, [
                  {
                    key: "onRemoteConfig",
                    value: function (e) {
                      var t;
                      this._eventTriggers =
                        (null == (t = e.sessionRecording)
                          ? void 0
                          : t.eventTriggers) || [];
                    },
                  },
                  {
                    key: "_eventTriggerStatus",
                    value: function (e) {
                      var t;
                      return 0 === this._eventTriggers.length
                        ? Rr
                        : (null == (t = this._instance)
                              ? void 0
                              : t.get_property(Ie)) === e
                          ? Dr
                          : Tr;
                    },
                  },
                  {
                    key: "triggerStatus",
                    value: function (e) {
                      var t = this._eventTriggerStatus(e),
                        n = t === Dr ? Dr : t === Tr ? Tr : Rr;
                      return (
                        this._instance.register_for_session({
                          $sdk_debug_replay_event_trigger_status: n,
                        }),
                        n
                      );
                    },
                  },
                  { key: "stop", value: function () {} },
                ]),
                e
              );
            })();
          function qr(e) {
            return e.isRecordingEnabled ? Or : Ar;
          }
          function $r(e) {
            if (!e.receivedFlags) return Or;
            if (!e.isRecordingEnabled) return Ar;
            if (e.urlTriggerMatching.urlBlocked) return Zr;
            var t = !0 === e.isSampled,
              n = new Mr([
                e.eventTriggerMatching,
                e.urlTriggerMatching,
                e.linkedFlagMatching,
              ]).triggerStatus(e.sessionId);
            return t
              ? Fr
              : n === Dr
                ? Lr
                : n === Tr
                  ? Or
                  : !1 === e.isSampled
                    ? Ar
                    : Lr;
          }
          function Gr(e) {
            if (!e.receivedFlags) return Or;
            if (!e.isRecordingEnabled) return Ar;
            if (e.urlTriggerMatching.urlBlocked) return Zr;
            var t = new zr([
                e.eventTriggerMatching,
                e.urlTriggerMatching,
                e.linkedFlagMatching,
              ]).triggerStatus(e.sessionId),
              n = t !== Rr,
              r = V(e.isSampled);
            return n && t === Tr
              ? Or
              : (n && t === Rr) || (r && !e.isSampled)
                ? Ar
                : !0 === e.isSampled
                  ? Fr
                  : Lr;
          }
          var Yr = "[SessionRecording]",
            Kr = $(Yr);
          function Qr() {
            var e;
            return null == y ||
              null == (e = y.__PosthogExtensions__) ||
              null == (e = e.rrweb)
              ? void 0
              : e.record;
          }
          var Xr = [
              Bn.MouseMove,
              Bn.MouseInteraction,
              Bn.Scroll,
              Bn.ViewportResize,
              Bn.Input,
              Bn.TouchMove,
              Bn.MediaInteraction,
              Bn.Drag,
            ],
            Jr = function (e) {
              return { rrwebMethod: e, enqueuedAt: Date.now(), attempt: 1 };
            };
          function ei(e) {
            return (function (e, t) {
              for (var n = "", r = 0; r < e.length; ) {
                var i = e[r++];
                n += String.fromCharCode(i);
              }
              return n;
            })(Ir(Pr(JSON.stringify(e))));
          }
          function ti(e) {
            return e.type === Rn.Custom && "sessionIdle" === e.data.tag;
          }
          var ni = (function () {
              function e(t) {
                var n = this;
                if (
                  (o(this, e),
                  (this._statusMatcher = qr),
                  (this._receivedFlags = !1),
                  (this._queuedRRWebEvents = []),
                  (this._isIdle = "unknown"),
                  (this._lastActivityTimestamp = Date.now()),
                  (this._triggerMatching = new Hr()),
                  (this._removePageViewCaptureHook = void 0),
                  (this._onSessionIdListener = void 0),
                  (this._persistFlagsOnSessionListener = void 0),
                  (this._samplingSessionListener = void 0),
                  (this._removeEventTriggerCaptureHook = void 0),
                  (this._forceAllowLocalhostNetworkCapture = !1),
                  (this._onBeforeUnload = function () {
                    n._flushBuffer();
                  }),
                  (this._onOffline = function () {
                    n._tryAddCustomEvent("browser offline", {});
                  }),
                  (this._onOnline = function () {
                    n._tryAddCustomEvent("browser online", {});
                  }),
                  (this._onVisibilityChange = function () {
                    if (null != v && v.visibilityState) {
                      var e = "window " + v.visibilityState;
                      n._tryAddCustomEvent(e, {});
                    }
                  }),
                  (this._instance = t),
                  (this._captureStarted = !1),
                  (this._endpoint = "/s/"),
                  (this._stopRrweb = void 0),
                  (this._receivedFlags = !1),
                  !this._instance.sessionManager)
                )
                  throw (
                    Kr.error("started without valid sessionManager"),
                    new Error(
                      Yr +
                        " started without valid sessionManager. This is a bug.",
                    )
                  );
                if (
                  this._instance.config.__preview_experimental_cookieless_mode
                )
                  throw new Error(
                    Yr +
                      " cannot be used with __preview_experimental_cookieless_mode.",
                  );
                ((this._linkedFlagMatching = new Vr(this._instance)),
                  (this._urlTriggerMatching = new Ur(this._instance)),
                  (this._eventTriggerMatching = new Wr(this._instance)));
                var r = this._sessionManager.checkAndGetSessionAndWindowId(),
                  i = r.sessionId,
                  a = r.windowId;
                ((this._sessionId = i),
                  (this._windowId = a),
                  (this._buffer = this._clearBuffer()),
                  this._sessionIdleThresholdMilliseconds >=
                    this._sessionManager.sessionTimeoutMs &&
                    Kr.warn(
                      "session_idle_threshold_ms (" +
                        this._sessionIdleThresholdMilliseconds +
                        ") is greater than the session timeout (" +
                        this._sessionManager.sessionTimeoutMs +
                        "). Session will never be detected as idle",
                    ));
              }
              return (
                a(e, [
                  {
                    key: "sessionId",
                    get: function () {
                      return this._sessionId;
                    },
                  },
                  {
                    key: "_sessionIdleThresholdMilliseconds",
                    get: function () {
                      return (
                        this._instance.config.session_recording
                          .session_idle_threshold_ms || 3e5
                      );
                    },
                  },
                  {
                    key: "started",
                    get: function () {
                      return this._captureStarted;
                    },
                  },
                  {
                    key: "_sessionManager",
                    get: function () {
                      if (!this._instance.sessionManager)
                        throw new Error(
                          Yr + " must be started with a valid sessionManager.",
                        );
                      return this._instance.sessionManager;
                    },
                  },
                  {
                    key: "_fullSnapshotIntervalMillis",
                    get: function () {
                      var e, t;
                      return this._triggerMatching.triggerStatus(
                        this.sessionId,
                      ) === Tr
                        ? 6e4
                        : null !==
                              (e =
                                null ==
                                (t = this._instance.config.session_recording)
                                  ? void 0
                                  : t.full_snapshot_interval_millis) &&
                            void 0 !== e
                          ? e
                          : 3e5;
                    },
                  },
                  {
                    key: "_isSampled",
                    get: function () {
                      var e = this._instance.get_property(_e);
                      return V(e) ? e : null;
                    },
                  },
                  {
                    key: "_sessionDuration",
                    get: function () {
                      var e,
                        t,
                        n =
                          null == (e = this._buffer)
                            ? void 0
                            : e.data[
                                (null == (t = this._buffer)
                                  ? void 0
                                  : t.data.length) - 1
                              ],
                        r =
                          this._sessionManager.checkAndGetSessionAndWindowId(
                            !0,
                          ).sessionStartTimestamp;
                      return n ? n.timestamp - r : null;
                    },
                  },
                  {
                    key: "_isRecordingEnabled",
                    get: function () {
                      var e = !!this._instance.get_property(me),
                        t = !this._instance.config.disable_session_recording;
                      return c && e && t;
                    },
                  },
                  {
                    key: "_isConsoleLogCaptureEnabled",
                    get: function () {
                      var e = !!this._instance.get_property(xe),
                        t = this._instance.config.enable_recording_console_log;
                      return null != t ? t : e;
                    },
                  },
                  {
                    key: "_canvasRecording",
                    get: function () {
                      var e,
                        t,
                        n,
                        r,
                        i,
                        o,
                        a =
                          this._instance.config.session_recording.captureCanvas,
                        s = this._instance.get_property(ye),
                        l =
                          null !==
                            (e =
                              null !==
                                (t = null == a ? void 0 : a.recordCanvas) &&
                              void 0 !== t
                                ? t
                                : null == s
                                  ? void 0
                                  : s.enabled) &&
                          void 0 !== e &&
                          e,
                        c =
                          null !==
                            (n =
                              null !== (r = null == a ? void 0 : a.canvasFps) &&
                              void 0 !== r
                                ? r
                                : null == s
                                  ? void 0
                                  : s.fps) && void 0 !== n
                            ? n
                            : 4,
                        u =
                          null !==
                            (i =
                              null !==
                                (o = null == a ? void 0 : a.canvasQuality) &&
                              void 0 !== o
                                ? o
                                : null == s
                                  ? void 0
                                  : s.quality) && void 0 !== i
                            ? i
                            : 0.4;
                      if ("string" == typeof u) {
                        var d = parseFloat(u);
                        u = isNaN(d) ? 0.4 : d;
                      }
                      return {
                        enabled: l,
                        fps: nn(c, 0, 12, "canvas recording fps", 4),
                        quality: nn(u, 0, 1, "canvas recording quality", 0.4),
                      };
                    },
                  },
                  {
                    key: "_networkPayloadCapture",
                    get: function () {
                      var e,
                        t,
                        n = this._instance.get_property(we),
                        r = {
                          recordHeaders:
                            null ==
                            (e = this._instance.config.session_recording)
                              ? void 0
                              : e.recordHeaders,
                          recordBody:
                            null ==
                            (t = this._instance.config.session_recording)
                              ? void 0
                              : t.recordBody,
                        },
                        i =
                          (null == r ? void 0 : r.recordHeaders) ||
                          (null == n ? void 0 : n.recordHeaders),
                        o =
                          (null == r ? void 0 : r.recordBody) ||
                          (null == n ? void 0 : n.recordBody),
                        a = D(this._instance.config.capture_performance)
                          ? this._instance.config.capture_performance
                              .network_timing
                          : this._instance.config.capture_performance,
                        s = !!(V(a)
                          ? a
                          : null == n
                            ? void 0
                            : n.capturePerformance);
                      return i || o || s
                        ? {
                            recordHeaders: i,
                            recordBody: o,
                            recordPerformance: s,
                          }
                        : void 0;
                    },
                  },
                  {
                    key: "_masking",
                    get: function () {
                      var e,
                        t,
                        n,
                        r,
                        i,
                        o,
                        a = this._instance.get_property(be),
                        s = {
                          maskAllInputs:
                            null ==
                            (e = this._instance.config.session_recording)
                              ? void 0
                              : e.maskAllInputs,
                          maskTextSelector:
                            null ==
                            (t = this._instance.config.session_recording)
                              ? void 0
                              : t.maskTextSelector,
                          blockSelector:
                            null ==
                            (n = this._instance.config.session_recording)
                              ? void 0
                              : n.blockSelector,
                        },
                        l =
                          null !== (r = null == s ? void 0 : s.maskAllInputs) &&
                          void 0 !== r
                            ? r
                            : null == a
                              ? void 0
                              : a.maskAllInputs,
                        c =
                          null !==
                            (i = null == s ? void 0 : s.maskTextSelector) &&
                          void 0 !== i
                            ? i
                            : null == a
                              ? void 0
                              : a.maskTextSelector,
                        u =
                          null !== (o = null == s ? void 0 : s.blockSelector) &&
                          void 0 !== o
                            ? o
                            : null == a
                              ? void 0
                              : a.blockSelector;
                      return R(l) && R(c) && R(u)
                        ? void 0
                        : {
                            maskAllInputs: null == l || l,
                            maskTextSelector: c,
                            blockSelector: u,
                          };
                    },
                  },
                  {
                    key: "_sampleRate",
                    get: function () {
                      var e = this._instance.get_property(ke);
                      return U(e) ? e : null;
                    },
                  },
                  {
                    key: "_minimumDuration",
                    get: function () {
                      var e = this._instance.get_property(Ce);
                      return U(e) ? e : null;
                    },
                  },
                  {
                    key: "status",
                    get: function () {
                      return this._receivedFlags
                        ? this._statusMatcher({
                            receivedFlags: this._receivedFlags,
                            isRecordingEnabled: this._isRecordingEnabled,
                            isSampled: this._isSampled,
                            urlTriggerMatching: this._urlTriggerMatching,
                            eventTriggerMatching: this._eventTriggerMatching,
                            linkedFlagMatching: this._linkedFlagMatching,
                            sessionId: this.sessionId,
                          })
                        : Or;
                    },
                  },
                  {
                    key: "startIfEnabledOrStop",
                    value: function (e) {
                      var t = this;
                      this._isRecordingEnabled
                        ? (this._startCapture(e),
                          ae(c, "beforeunload", this._onBeforeUnload),
                          ae(c, "offline", this._onOffline),
                          ae(c, "online", this._onOnline),
                          ae(c, "visibilitychange", this._onVisibilityChange),
                          this._setupSampling(),
                          this._addEventTriggerListener(),
                          H(this._removePageViewCaptureHook) &&
                            (this._removePageViewCaptureHook =
                              this._instance.on("eventCaptured", function (e) {
                                try {
                                  if ("$pageview" === e.event) {
                                    var n =
                                      null != e && e.properties.$current_url
                                        ? t._maskUrl(
                                            null == e
                                              ? void 0
                                              : e.properties.$current_url,
                                          )
                                        : "";
                                    if (!n) return;
                                    t._tryAddCustomEvent("$pageview", {
                                      href: n,
                                    });
                                  }
                                } catch (e) {
                                  Kr.error(
                                    "Could not add $pageview to rrweb session",
                                    e,
                                  );
                                }
                              })),
                          this._onSessionIdListener ||
                            (this._onSessionIdListener =
                              this._sessionManager.onSessionId(
                                function (e, n, r) {
                                  var i, o;
                                  r &&
                                    (t._tryAddCustomEvent(
                                      "$session_id_change",
                                      {
                                        sessionId: e,
                                        windowId: n,
                                        changeReason: r,
                                      },
                                    ),
                                    null == (i = t._instance) ||
                                      null == (i = i.persistence) ||
                                      i.unregister(Ie),
                                    null == (o = t._instance) ||
                                      null == (o = o.persistence) ||
                                      o.unregister(Ee));
                                },
                              )))
                        : this.stopRecording();
                    },
                  },
                  {
                    key: "stopRecording",
                    value: function () {
                      var e, t, n, r;
                      this._captureStarted &&
                        this._stopRrweb &&
                        (this._stopRrweb(),
                        (this._stopRrweb = void 0),
                        (this._captureStarted = !1),
                        null == c ||
                          c.removeEventListener(
                            "beforeunload",
                            this._onBeforeUnload,
                          ),
                        null == c ||
                          c.removeEventListener("offline", this._onOffline),
                        null == c ||
                          c.removeEventListener("online", this._onOnline),
                        null == c ||
                          c.removeEventListener(
                            "visibilitychange",
                            this._onVisibilityChange,
                          ),
                        this._clearBuffer(),
                        clearInterval(this._fullSnapshotTimer),
                        null == (e = this._removePageViewCaptureHook) ||
                          e.call(this),
                        (this._removePageViewCaptureHook = void 0),
                        null == (t = this._removeEventTriggerCaptureHook) ||
                          t.call(this),
                        (this._removeEventTriggerCaptureHook = void 0),
                        null == (n = this._onSessionIdListener) || n.call(this),
                        (this._onSessionIdListener = void 0),
                        null == (r = this._samplingSessionListener) ||
                          r.call(this),
                        (this._samplingSessionListener = void 0),
                        this._eventTriggerMatching.stop(),
                        this._urlTriggerMatching.stop(),
                        this._linkedFlagMatching.stop(),
                        Kr.info("stopped"));
                    },
                  },
                  {
                    key: "_resetSampling",
                    value: function () {
                      var e;
                      null == (e = this._instance.persistence) ||
                        e.unregister(_e);
                    },
                  },
                  {
                    key: "_makeSamplingDecision",
                    value: function (e) {
                      var t,
                        n = this._sessionId !== e,
                        r = this._sampleRate;
                      if (U(r)) {
                        var o = this._isSampled,
                          a = n || !V(o),
                          s = a
                            ? (function (e, t) {
                                return (
                                  (function (e) {
                                    for (var t = 0, n = 0; n < e.length; n++)
                                      ((t = (t << 5) - t + e.charCodeAt(n)),
                                        (t |= 0));
                                    return Math.abs(t);
                                  })(e) %
                                    100 <
                                  nn(100 * t, 0, 100)
                                );
                              })(e, r)
                            : o;
                        (a &&
                          (s
                            ? this._reportStarted(Fr)
                            : Kr.warn(
                                "Sample rate (" +
                                  r +
                                  ") has determined that this sessionId (" +
                                  e +
                                  ") will not be sent to the server.",
                              ),
                          this._tryAddCustomEvent("samplingDecisionMade", {
                            sampleRate: r,
                            isSampled: s,
                          })),
                          null == (t = this._instance.persistence) ||
                            t.register(i({}, _e, s)));
                      } else this._resetSampling();
                    },
                  },
                  {
                    key: "onRemoteConfig",
                    value: function (e) {
                      var t,
                        n,
                        r,
                        i,
                        o = this;
                      (this._tryAddCustomEvent("$remote_config_received", e),
                        this._persistRemoteConfig(e),
                        null != (t = e.sessionRecording) &&
                          t.endpoint &&
                          (this._endpoint =
                            null == (i = e.sessionRecording)
                              ? void 0
                              : i.endpoint),
                        this._setupSampling(),
                        "any" ===
                        (null == (n = e.sessionRecording)
                          ? void 0
                          : n.triggerMatchType)
                          ? ((this._statusMatcher = $r),
                            (this._triggerMatching = new Mr([
                              this._eventTriggerMatching,
                              this._urlTriggerMatching,
                            ])))
                          : ((this._statusMatcher = Gr),
                            (this._triggerMatching = new zr([
                              this._eventTriggerMatching,
                              this._urlTriggerMatching,
                            ]))),
                        this._instance.register_for_session({
                          $sdk_debug_replay_remote_trigger_matching_config:
                            null == (r = e.sessionRecording)
                              ? void 0
                              : r.triggerMatchType,
                        }),
                        this._urlTriggerMatching.onRemoteConfig(e),
                        this._eventTriggerMatching.onRemoteConfig(e),
                        this._linkedFlagMatching.onRemoteConfig(
                          e,
                          function (e, t) {
                            o._reportStarted("linked_flag_matched", {
                              flag: e,
                              variant: t,
                            });
                          },
                        ),
                        (this._receivedFlags = !0),
                        this.startIfEnabledOrStop());
                    },
                  },
                  {
                    key: "_setupSampling",
                    value: function () {
                      var e = this;
                      U(this._sampleRate) &&
                        H(this._samplingSessionListener) &&
                        (this._samplingSessionListener =
                          this._sessionManager.onSessionId(function (t) {
                            e._makeSamplingDecision(t);
                          }));
                    },
                  },
                  {
                    key: "_persistRemoteConfig",
                    value: function (e) {
                      var n = this;
                      if (this._instance.persistence) {
                        var r,
                          o = this._instance.persistence,
                          a = function () {
                            var r,
                              a,
                              s,
                              l,
                              c,
                              u,
                              d,
                              p,
                              f,
                              h,
                              v =
                                null == (a = e.sessionRecording)
                                  ? void 0
                                  : a.sampleRate,
                              g = H(v) ? null : parseFloat(v);
                            H(g) && n._resetSampling();
                            var m =
                              null == (s = e.sessionRecording)
                                ? void 0
                                : s.minimumDurationMilliseconds;
                            o.register(
                              (i((r = {}), me, !!e.sessionRecording),
                              i(
                                r,
                                xe,
                                null == (l = e.sessionRecording)
                                  ? void 0
                                  : l.consoleLogRecordingEnabled,
                              ),
                              i(
                                r,
                                we,
                                t(
                                  { capturePerformance: e.capturePerformance },
                                  null == (c = e.sessionRecording)
                                    ? void 0
                                    : c.networkPayloadCapture,
                                ),
                              ),
                              i(
                                r,
                                be,
                                null == (u = e.sessionRecording)
                                  ? void 0
                                  : u.masking,
                              ),
                              i(r, ye, {
                                enabled:
                                  null == (d = e.sessionRecording)
                                    ? void 0
                                    : d.recordCanvas,
                                fps:
                                  null == (p = e.sessionRecording)
                                    ? void 0
                                    : p.canvasFps,
                                quality:
                                  null == (f = e.sessionRecording)
                                    ? void 0
                                    : f.canvasQuality,
                              }),
                              i(r, ke, g),
                              i(r, Ce, R(m) ? null : m),
                              i(
                                r,
                                je,
                                null == (h = e.sessionRecording)
                                  ? void 0
                                  : h.scriptConfig,
                              ),
                              r),
                            );
                          };
                        (a(),
                          null == (r = this._persistFlagsOnSessionListener) ||
                            r.call(this),
                          (this._persistFlagsOnSessionListener =
                            this._sessionManager.onSessionId(a)));
                      }
                    },
                  },
                  {
                    key: "log",
                    value: function (e, t) {
                      var n;
                      (void 0 === t && (t = "log"),
                        null == (n = this._instance.sessionRecording) ||
                          n.onRRwebEmit({
                            type: 6,
                            data: {
                              plugin: "rrweb/console@1",
                              payload: {
                                level: t,
                                trace: [],
                                payload: [JSON.stringify(e)],
                              },
                            },
                            timestamp: Date.now(),
                          }));
                    },
                  },
                  {
                    key: "_startCapture",
                    value: function (e) {
                      var t,
                        n = this;
                      R(Object.assign) ||
                        R(Array.from) ||
                        this._captureStarted ||
                        this._instance.config.disable_session_recording ||
                        this._instance.consent.isOptedOut() ||
                        ((this._captureStarted = !0),
                        this._sessionManager.checkAndGetSessionAndWindowId(),
                        Qr()
                          ? this._onScriptLoaded()
                          : null == (t = y.__PosthogExtensions__) ||
                            null == t.loadExternalDependency ||
                            t.loadExternalDependency(
                              this._instance,
                              this._scriptName,
                              function (e) {
                                if (e)
                                  return Kr.error("could not load recorder", e);
                                n._onScriptLoaded();
                              },
                            ),
                        Kr.info("starting"),
                        this.status === Lr &&
                          this._reportStarted(e || "recording_initialized"));
                    },
                  },
                  {
                    key: "_scriptName",
                    get: function () {
                      var e;
                      return (
                        (null == (e = this._instance) ||
                        null == (e = e.persistence) ||
                        null == (e = e.get_property(je))
                          ? void 0
                          : e.script) || "recorder"
                      );
                    },
                  },
                  {
                    key: "_isInteractiveEvent",
                    value: function (e) {
                      var t;
                      return (
                        3 === e.type &&
                        -1 !==
                          Xr.indexOf(null == (t = e.data) ? void 0 : t.source)
                      );
                    },
                  },
                  {
                    key: "_updateWindowAndSessionIds",
                    value: function (e) {
                      var t = this._isInteractiveEvent(e);
                      t ||
                        this._isIdle ||
                        (e.timestamp - this._lastActivityTimestamp >
                          this._sessionIdleThresholdMilliseconds &&
                          ((this._isIdle = !0),
                          clearInterval(this._fullSnapshotTimer),
                          this._tryAddCustomEvent("sessionIdle", {
                            eventTimestamp: e.timestamp,
                            lastActivityTimestamp: this._lastActivityTimestamp,
                            threshold: this._sessionIdleThresholdMilliseconds,
                            bufferLength: this._buffer.data.length,
                            bufferSize: this._buffer.size,
                          }),
                          this._flushBuffer()));
                      var n = !1;
                      if (
                        t &&
                        ((this._lastActivityTimestamp = e.timestamp),
                        this._isIdle)
                      ) {
                        var r = "unknown" === this._isIdle;
                        ((this._isIdle = !1),
                          r ||
                            (this._tryAddCustomEvent("sessionNoLongerIdle", {
                              reason: "user activity",
                              type: e.type,
                            }),
                            (n = !0)));
                      }
                      if (!this._isIdle) {
                        var i =
                            this._sessionManager.checkAndGetSessionAndWindowId(
                              !t,
                              e.timestamp,
                            ),
                          o = i.windowId,
                          a = i.sessionId,
                          s = this._sessionId !== a,
                          l = this._windowId !== o;
                        ((this._windowId = o),
                          (this._sessionId = a),
                          s || l
                            ? (this.stopRecording(),
                              this.startIfEnabledOrStop("session_id_changed"))
                            : n && this._scheduleFullSnapshot());
                      }
                    },
                  },
                  {
                    key: "_tryRRWebMethod",
                    value: function (e) {
                      try {
                        return (e.rrwebMethod(), !0);
                      } catch (n) {
                        return (
                          this._queuedRRWebEvents.length < 10
                            ? this._queuedRRWebEvents.push({
                                enqueuedAt: e.enqueuedAt || Date.now(),
                                attempt: e.attempt++,
                                rrwebMethod: e.rrwebMethod,
                              })
                            : Kr.warn(
                                "could not emit queued rrweb event.",
                                n,
                                e,
                              ),
                          !1
                        );
                      }
                    },
                  },
                  {
                    key: "_tryAddCustomEvent",
                    value: function (e, t) {
                      return this._tryRRWebMethod(
                        Jr(function () {
                          return Qr().addCustomEvent(e, t);
                        }),
                      );
                    },
                  },
                  {
                    key: "_tryTakeFullSnapshot",
                    value: function () {
                      return this._tryRRWebMethod(
                        Jr(function () {
                          return Qr().takeFullSnapshot();
                        }),
                      );
                    },
                  },
                  {
                    key: "_onScriptLoaded",
                    value: function () {
                      for (
                        var e,
                          n,
                          r,
                          i,
                          o = this,
                          a = {
                            blockClass: "ph-no-capture",
                            blockSelector: void 0,
                            ignoreClass: "ph-ignore-input",
                            maskTextClass: "ph-mask",
                            maskTextSelector: void 0,
                            maskTextFn: void 0,
                            maskAllInputs: !0,
                            maskInputOptions: { password: !0 },
                            maskInputFn: void 0,
                            slimDOMOptions: {},
                            collectFonts: !1,
                            inlineStylesheet: !0,
                            recordCrossOriginIframes: !1,
                          },
                          l = this._instance.config.session_recording,
                          c = 0,
                          u = Object.entries(l || {});
                        c < u.length;
                        c++
                      ) {
                        var d = s(u[c], 2),
                          p = d[0],
                          f = d[1];
                        p in a &&
                          ("maskInputOptions" === p
                            ? (a.maskInputOptions = t({ password: !0 }, f))
                            : (a[p] = f));
                      }
                      (this._canvasRecording &&
                        this._canvasRecording.enabled &&
                        ((a.recordCanvas = !0),
                        (a.sampling = { canvas: this._canvasRecording.fps }),
                        (a.dataURLOptions = {
                          type: "image/webp",
                          quality: this._canvasRecording.quality,
                        })),
                        this._masking &&
                          ((a.maskAllInputs =
                            null === (n = this._masking.maskAllInputs) ||
                            void 0 === n ||
                            n),
                          (a.maskTextSelector =
                            null !== (r = this._masking.maskTextSelector) &&
                            void 0 !== r
                              ? r
                              : void 0),
                          (a.blockSelector =
                            null !== (i = this._masking.blockSelector) &&
                            void 0 !== i
                              ? i
                              : void 0)));
                      var h = Qr();
                      if (h) {
                        this._mutationThrottler =
                          null !== (e = this._mutationThrottler) && void 0 !== e
                            ? e
                            : new Yn(h, {
                                refillRate:
                                  this._instance.config.session_recording
                                    .__mutationThrottlerRefillRate,
                                bucketSize:
                                  this._instance.config.session_recording
                                    .__mutationThrottlerBucketSize,
                                onBlockedNode: function (e, t) {
                                  var n =
                                    "Too many mutations on node '" +
                                    e +
                                    "'. Rate limiting. This could be due to SVG animations or something similar";
                                  (Kr.info(n, { node: t }),
                                    o.log(Yr + " " + n, "warn"));
                                },
                              });
                        var v = this._gatherRRWebPlugins();
                        ((this._stopRrweb = h(
                          t(
                            {
                              emit: function (e) {
                                o.onRRwebEmit(e);
                              },
                              plugins: v,
                            },
                            a,
                          ),
                        )),
                          (this._lastActivityTimestamp = Date.now()),
                          (this._isIdle = V(this._isIdle)
                            ? this._isIdle
                            : "unknown"),
                          this._tryAddCustomEvent("$session_options", {
                            sessionRecordingOptions: a,
                            activePlugins: v.map(function (e) {
                              return null == e ? void 0 : e.name;
                            }),
                          }),
                          this._tryAddCustomEvent("$posthog_config", {
                            config: this._instance.config,
                          }));
                      } else
                        Kr.error(
                          "onScriptLoaded was called but rrwebRecord is not available. This indicates something has gone wrong.",
                        );
                    },
                  },
                  {
                    key: "_scheduleFullSnapshot",
                    value: function () {
                      var e = this;
                      if (
                        (this._fullSnapshotTimer &&
                          clearInterval(this._fullSnapshotTimer),
                        !0 !== this._isIdle)
                      ) {
                        var t = this._fullSnapshotIntervalMillis;
                        t &&
                          (this._fullSnapshotTimer = setInterval(function () {
                            e._tryTakeFullSnapshot();
                          }, t));
                      }
                    },
                  },
                  {
                    key: "_gatherRRWebPlugins",
                    value: function () {
                      var e,
                        t,
                        n = [],
                        r =
                          null == (e = y.__PosthogExtensions__) ||
                          null == (e = e.rrwebPlugins)
                            ? void 0
                            : e.getRecordConsolePlugin;
                      r && this._isConsoleLogCaptureEnabled && n.push(r());
                      var i =
                        null == (t = y.__PosthogExtensions__) ||
                        null == (t = t.rrwebPlugins)
                          ? void 0
                          : t.getRecordNetworkPlugin;
                      return (
                        this._networkPayloadCapture &&
                          N(i) &&
                          (!yt.includes(location.hostname) ||
                          this._forceAllowLocalhostNetworkCapture
                            ? n.push(
                                i(
                                  Gn(
                                    this._instance.config,
                                    this._networkPayloadCapture,
                                  ),
                                ),
                              )
                            : Kr.info(
                                "NetworkCapture not started because we are on localhost.",
                              )),
                        n
                      );
                    },
                  },
                  {
                    key: "onRRwebEmit",
                    value: function (e) {
                      var n,
                        r = this;
                      if ((this._processQueuedEvents(), e && D(e))) {
                        if (e.type === Rn.Meta) {
                          var i = this._maskUrl(e.data.href);
                          if (((this._lastHref = i), !i)) return;
                          e.data.href = i;
                        } else this._pageViewFallBack();
                        if (
                          (this._urlTriggerMatching.checkUrlTriggerConditions(
                            function () {
                              return r._pauseRecording();
                            },
                            function () {
                              return r._resumeRecording();
                            },
                            function (e) {
                              return r._activateTrigger(e);
                            },
                          ),
                          !this._urlTriggerMatching.urlBlocked ||
                            ((o = e).type === Rn.Custom &&
                              "recording paused" === o.data.tag))
                        ) {
                          var o;
                          (e.type === Rn.FullSnapshot &&
                            this._scheduleFullSnapshot(),
                            e.type === Rn.FullSnapshot &&
                              this._receivedFlags &&
                              this._triggerMatching.triggerStatus(
                                this.sessionId,
                              ) === Tr &&
                              this._clearBuffer());
                          var a = this._mutationThrottler
                            ? this._mutationThrottler.throttleMutations(e)
                            : e;
                          if (a) {
                            var s = (function (e) {
                              var t = e;
                              if (
                                t &&
                                D(t) &&
                                6 === t.type &&
                                D(t.data) &&
                                "rrweb/console@1" === t.data.plugin
                              ) {
                                t.data.payload.payload.length > 10 &&
                                  ((t.data.payload.payload =
                                    t.data.payload.payload.slice(0, 10)),
                                  t.data.payload.payload.push(
                                    "...[truncated]",
                                  ));
                                for (
                                  var n = [], r = 0;
                                  r < t.data.payload.payload.length;
                                  r++
                                )
                                  t.data.payload.payload[r] &&
                                  t.data.payload.payload[r].length > 2e3
                                    ? n.push(
                                        t.data.payload.payload[r].slice(
                                          0,
                                          2e3,
                                        ) + "...[truncated]",
                                      )
                                    : n.push(t.data.payload.payload[r]);
                                return ((t.data.payload.payload = n), e);
                              }
                              return e;
                            })(a);
                            if (
                              (this._updateWindowAndSessionIds(s),
                              !0 !== this._isIdle || ti(s))
                            ) {
                              if (ti(s)) {
                                var l = s.data.payload;
                                if (l) {
                                  var c = l.lastActivityTimestamp,
                                    u = l.threshold;
                                  s.timestamp = c + u;
                                }
                              }
                              var d =
                                  null ===
                                    (n =
                                      this._instance.config.session_recording
                                        .compress_events) ||
                                  void 0 === n ||
                                  n
                                    ? (function (e) {
                                        if (Dn(e) < 1024) return e;
                                        try {
                                          if (e.type === Rn.FullSnapshot)
                                            return t({}, e, {
                                              data: ei(e.data),
                                              cv: "2024-10",
                                            });
                                          if (
                                            e.type === Rn.IncrementalSnapshot &&
                                            e.data.source === Bn.Mutation
                                          )
                                            return t({}, e, {
                                              cv: "2024-10",
                                              data: t({}, e.data, {
                                                texts: ei(e.data.texts),
                                                attributes: ei(
                                                  e.data.attributes,
                                                ),
                                                removes: ei(e.data.removes),
                                                adds: ei(e.data.adds),
                                              }),
                                            });
                                          if (
                                            e.type === Rn.IncrementalSnapshot &&
                                            e.data.source === Bn.StyleSheetRule
                                          )
                                            return t({}, e, {
                                              cv: "2024-10",
                                              data: t({}, e.data, {
                                                adds: e.data.adds
                                                  ? ei(e.data.adds)
                                                  : void 0,
                                                removes: e.data.removes
                                                  ? ei(e.data.removes)
                                                  : void 0,
                                              }),
                                            });
                                        } catch (t) {
                                          Kr.error(
                                            "could not compress event - will use uncompressed event",
                                            t,
                                          );
                                        }
                                        return e;
                                      })(s)
                                    : s,
                                p = {
                                  $snapshot_bytes: Dn(d),
                                  $snapshot_data: d,
                                  $session_id: this._sessionId,
                                  $window_id: this._windowId,
                                };
                              this.status !== Ar
                                ? this._captureSnapshotBuffered(p)
                                : this._clearBuffer();
                            }
                          }
                        }
                      }
                    },
                  },
                  {
                    key: "_pageViewFallBack",
                    value: function () {
                      if (!this._instance.config.capture_pageview && c) {
                        var e = this._maskUrl(c.location.href);
                        this._lastHref !== e &&
                          (this._tryAddCustomEvent("$url_changed", { href: e }),
                          (this._lastHref = e));
                      }
                    },
                  },
                  {
                    key: "_processQueuedEvents",
                    value: function () {
                      var e = this;
                      if (this._queuedRRWebEvents.length) {
                        var t = r(this._queuedRRWebEvents);
                        ((this._queuedRRWebEvents = []),
                          t.forEach(function (t) {
                            Date.now() - t.enqueuedAt <= 2e3 &&
                              e._tryRRWebMethod(t);
                          }));
                      }
                    },
                  },
                  {
                    key: "_maskUrl",
                    value: function (e) {
                      var t = this._instance.config.session_recording;
                      if (t.maskNetworkRequestFn) {
                        var n,
                          r = { url: e };
                        return null == (n = r = t.maskNetworkRequestFn(r))
                          ? void 0
                          : n.url;
                      }
                      return e;
                    },
                  },
                  {
                    key: "_clearBuffer",
                    value: function () {
                      return (
                        (this._buffer = {
                          size: 0,
                          data: [],
                          sessionId: this._sessionId,
                          windowId: this._windowId,
                        }),
                        this._buffer
                      );
                    },
                  },
                  {
                    key: "_flushBuffer",
                    value: function () {
                      var e = this;
                      this._flushBufferTimer &&
                        (clearTimeout(this._flushBufferTimer),
                        (this._flushBufferTimer = void 0));
                      var t = this._minimumDuration,
                        n = this._sessionDuration,
                        r = U(n) && n >= 0,
                        i = U(t) && r && n < t;
                      return this.status === Or ||
                        this.status === Zr ||
                        this.status === Ar ||
                        i
                        ? ((this._flushBufferTimer = setTimeout(function () {
                            e._flushBuffer();
                          }, 2e3)),
                          this._buffer)
                        : (this._buffer.data.length > 0 &&
                            Tn(this._buffer).forEach(function (t) {
                              e._captureSnapshot({
                                $snapshot_bytes: t.size,
                                $snapshot_data: t.data,
                                $session_id: t.sessionId,
                                $window_id: t.windowId,
                                $lib: "web",
                                $lib_version: k.LIB_VERSION,
                              });
                            }),
                          this._clearBuffer());
                    },
                  },
                  {
                    key: "_captureSnapshotBuffered",
                    value: function (e) {
                      var t,
                        n = this,
                        r =
                          2 +
                          ((null == (t = this._buffer)
                            ? void 0
                            : t.data.length) || 0);
                      (!this._isIdle &&
                        (this._buffer.size + e.$snapshot_bytes + r > 943718.4 ||
                          this._buffer.sessionId !== this._sessionId) &&
                        (this._buffer = this._flushBuffer()),
                        (this._buffer.size += e.$snapshot_bytes),
                        this._buffer.data.push(e.$snapshot_data),
                        this._flushBufferTimer ||
                          this._isIdle ||
                          (this._flushBufferTimer = setTimeout(function () {
                            n._flushBuffer();
                          }, 2e3)));
                    },
                  },
                  {
                    key: "_captureSnapshot",
                    value: function (e) {
                      this._instance.capture("$snapshot", e, {
                        _url: this._instance.requestRouter.endpointFor(
                          "api",
                          this._endpoint,
                        ),
                        _noTruncate: !0,
                        _batchKey: "recordings",
                        skip_client_rate_limiting: !0,
                      });
                    },
                  },
                  {
                    key: "_activateTrigger",
                    value: function (e) {
                      var t;
                      this._triggerMatching.triggerStatus(this.sessionId) ===
                        Tr &&
                        (null == (t = this._instance) ||
                          null == (t = t.persistence) ||
                          t.register(
                            i({}, "url" === e ? Ee : Ie, this._sessionId),
                          ),
                        this._flushBuffer(),
                        this._reportStarted(e + "_trigger_matched"));
                    },
                  },
                  {
                    key: "_pauseRecording",
                    value: function () {
                      this._urlTriggerMatching.urlBlocked ||
                        ((this._urlTriggerMatching.urlBlocked = !0),
                        clearInterval(this._fullSnapshotTimer),
                        Kr.info("recording paused due to URL blocker"),
                        this._tryAddCustomEvent("recording paused", {
                          reason: "url blocker",
                        }));
                    },
                  },
                  {
                    key: "_resumeRecording",
                    value: function () {
                      this._urlTriggerMatching.urlBlocked &&
                        ((this._urlTriggerMatching.urlBlocked = !1),
                        this._tryTakeFullSnapshot(),
                        this._scheduleFullSnapshot(),
                        this._tryAddCustomEvent("recording resumed", {
                          reason: "left blocked url",
                        }),
                        Kr.info("recording resumed"));
                    },
                  },
                  {
                    key: "_addEventTriggerListener",
                    value: function () {
                      var e = this;
                      0 !== this._eventTriggerMatching._eventTriggers.length &&
                        H(this._removeEventTriggerCaptureHook) &&
                        (this._removeEventTriggerCaptureHook =
                          this._instance.on("eventCaptured", function (t) {
                            try {
                              e._eventTriggerMatching._eventTriggers.includes(
                                t.event,
                              ) && e._activateTrigger("event");
                            } catch (t) {
                              Kr.error("Could not activate event trigger", t);
                            }
                          }));
                    },
                  },
                  {
                    key: "overrideLinkedFlag",
                    value: function () {
                      ((this._linkedFlagMatching.linkedFlagSeen = !0),
                        this._tryTakeFullSnapshot(),
                        this._reportStarted("linked_flag_overridden"));
                    },
                  },
                  {
                    key: "overrideSampling",
                    value: function () {
                      var e;
                      (null == (e = this._instance.persistence) ||
                        e.register(i({}, _e, !0)),
                        this._tryTakeFullSnapshot(),
                        this._reportStarted("sampling_overridden"));
                    },
                  },
                  {
                    key: "overrideTrigger",
                    value: function (e) {
                      this._activateTrigger(e);
                    },
                  },
                  {
                    key: "_reportStarted",
                    value: function (e, t) {
                      (this._instance.register_for_session({
                        $session_recording_start_reason: e,
                      }),
                        Kr.info(e.replace("_", " "), t),
                        E(["recording_initialized", "session_id_changed"], e) ||
                          this._tryAddCustomEvent(e, t));
                    },
                  },
                  {
                    key: "sdkDebugProperties",
                    get: function () {
                      var e =
                        this._sessionManager.checkAndGetSessionAndWindowId(
                          !0,
                        ).sessionStartTimestamp;
                      return {
                        $recording_status: this.status,
                        $sdk_debug_replay_internal_buffer_length:
                          this._buffer.data.length,
                        $sdk_debug_replay_internal_buffer_size:
                          this._buffer.size,
                        $sdk_debug_current_session_duration:
                          this._sessionDuration,
                        $sdk_debug_session_start: e,
                      };
                    },
                  },
                ]),
                e
              );
            })(),
            ri = $("[SegmentIntegration]");
          var ii = "posthog-js";
          function oi(e, n) {
            var r = void 0 === n ? {} : n,
              i = r.organization,
              o = r.projectId,
              a = r.prefix,
              s = r.severityAllowList,
              l = void 0 === s ? ["error"] : s;
            return function (n) {
              var r, s, c, u, d;
              if (("*" !== l && !l.includes(n.level)) || !e.__loaded) return n;
              n.tags || (n.tags = {});
              var p = e.requestRouter.endpointFor(
                "ui",
                "/project/" + e.config.token + "/person/" + e.get_distinct_id(),
              );
              ((n.tags["PostHog Person URL"] = p),
                e.sessionRecordingStarted() &&
                  (n.tags["PostHog Recording URL"] = e.get_session_replay_url({
                    withTimestamp: !0,
                  })));
              var f = (null == (r = n.exception) ? void 0 : r.values) || [],
                h = f.map(function (e) {
                  return t({}, e, {
                    stacktrace: e.stacktrace
                      ? t({}, e.stacktrace, {
                          type: "raw",
                          frames: (e.stacktrace.frames || []).map(function (e) {
                            return t({}, e, { platform: "web:javascript" });
                          }),
                        })
                      : void 0,
                  });
                }),
                v = {
                  $exception_message:
                    (null == (s = f[0]) ? void 0 : s.value) || n.message,
                  $exception_type: null == (c = f[0]) ? void 0 : c.type,
                  $exception_personURL: p,
                  $exception_level: n.level,
                  $exception_list: h,
                  $sentry_event_id: n.event_id,
                  $sentry_exception: n.exception,
                  $sentry_exception_message:
                    (null == (u = f[0]) ? void 0 : u.value) || n.message,
                  $sentry_exception_type: null == (d = f[0]) ? void 0 : d.type,
                  $sentry_tags: n.tags,
                };
              return (
                i &&
                  o &&
                  (v.$sentry_url =
                    (a || "https://sentry.io/organizations/") +
                    i +
                    "/issues/?project=" +
                    o +
                    "&query=" +
                    n.event_id),
                e.exceptions.sendExceptionEvent(v),
                n
              );
            };
          }
          var ai = a(function e(t, n, r, i, a) {
              (o(this, e),
                (this.name = ii),
                (this.setupOnce = function (e) {
                  e(
                    oi(t, {
                      organization: n,
                      projectId: r,
                      prefix: i,
                      severityAllowList: a,
                    }),
                  );
                }));
            }),
            si =
              null != c && c.location
                ? St(c.location.hash, "__posthog") || St(location.hash, "state")
                : null,
            li = "_postHogToolbarParams",
            ci = $("[Toolbar]"),
            ui = (function (e) {
              return (
                (e[(e.UNINITIALIZED = 0)] = "UNINITIALIZED"),
                (e[(e.LOADING = 1)] = "LOADING"),
                (e[(e.LOADED = 2)] = "LOADED"),
                e
              );
            })(ui || {}),
            di = (function () {
              function e(t) {
                (o(this, e), (this.instance = t));
              }
              return (
                a(e, [
                  {
                    key: "_setToolbarState",
                    value: function (e) {
                      y.ph_toolbar_state = e;
                    },
                  },
                  {
                    key: "_getToolbarState",
                    value: function () {
                      var e;
                      return null !== (e = y.ph_toolbar_state) && void 0 !== e
                        ? e
                        : ui.UNINITIALIZED;
                    },
                  },
                  {
                    key: "maybeLoadToolbar",
                    value: function (e, t, n) {
                      if (
                        (void 0 === e && (e = void 0),
                        void 0 === t && (t = void 0),
                        void 0 === n && (n = void 0),
                        !c || !v)
                      )
                        return !1;
                      ((e = null != e ? e : c.location),
                        (n = null != n ? n : c.history));
                      try {
                        if (!t) {
                          try {
                            (c.localStorage.setItem("test", "test"),
                              c.localStorage.removeItem("test"));
                          } catch (e) {
                            return !1;
                          }
                          t = null == c ? void 0 : c.localStorage;
                        }
                        var r,
                          i =
                            si ||
                            St(e.hash, "__posthog") ||
                            St(e.hash, "state"),
                          o = i
                            ? ee(function () {
                                return JSON.parse(atob(decodeURIComponent(i)));
                              }) ||
                              ee(function () {
                                return JSON.parse(decodeURIComponent(i));
                              })
                            : null;
                        return (
                          o && "ph_authorize" === o.action
                            ? (((r = o).source = "url"),
                              r &&
                                Object.keys(r).length > 0 &&
                                (o.desiredHash
                                  ? (e.hash = o.desiredHash)
                                  : n
                                    ? n.replaceState(
                                        n.state,
                                        "",
                                        e.pathname + e.search,
                                      )
                                    : (e.hash = "")))
                            : (((r = JSON.parse(t.getItem(li) || "{}")).source =
                                "localstorage"),
                              delete r.userIntent),
                          !(
                            !r.token || this.instance.config.token !== r.token
                          ) && (this.loadToolbar(r), !0)
                        );
                      } catch (e) {
                        return !1;
                      }
                    },
                  },
                  {
                    key: "_callLoadToolbar",
                    value: function (e) {
                      var t = y.ph_load_toolbar || y.ph_load_editor;
                      !H(t) && N(t)
                        ? t(e, this.instance)
                        : ci.warn("No toolbar load function found");
                    },
                  },
                  {
                    key: "loadToolbar",
                    value: function (e) {
                      var n = this,
                        r = !(null == v || !v.getElementById(Ve));
                      if (!c || r) return !1;
                      var i =
                          "custom" === this.instance.requestRouter.region &&
                          this.instance.config.advanced_disable_toolbar_metrics,
                        o = t(
                          { token: this.instance.config.token },
                          e,
                          {
                            apiURL:
                              this.instance.requestRouter.endpointFor("ui"),
                          },
                          i ? { instrument: !1 } : {},
                        );
                      if (
                        (c.localStorage.setItem(
                          li,
                          JSON.stringify(t({}, o, { source: void 0 })),
                        ),
                        this._getToolbarState() === ui.LOADED)
                      )
                        this._callLoadToolbar(o);
                      else if (this._getToolbarState() === ui.UNINITIALIZED) {
                        var a;
                        (this._setToolbarState(ui.LOADING),
                          null == (a = y.__PosthogExtensions__) ||
                            null == a.loadExternalDependency ||
                            a.loadExternalDependency(
                              this.instance,
                              "toolbar",
                              function (e) {
                                if (e)
                                  return (
                                    ci.error("[Toolbar] Failed to load", e),
                                    void n._setToolbarState(ui.UNINITIALIZED)
                                  );
                                (n._setToolbarState(ui.LOADED),
                                  n._callLoadToolbar(o));
                              },
                            ),
                          ae(c, "turbolinks:load", function () {
                            (n._setToolbarState(ui.UNINITIALIZED),
                              n.loadToolbar(o));
                          }));
                      }
                      return !0;
                    },
                  },
                  {
                    key: "_loadEditor",
                    value: function (e) {
                      return this.loadToolbar(e);
                    },
                  },
                  {
                    key: "maybeLoadEditor",
                    value: function (e, t, n) {
                      return (
                        void 0 === e && (e = void 0),
                        void 0 === t && (t = void 0),
                        void 0 === n && (n = void 0),
                        this.maybeLoadToolbar(e, t, n)
                      );
                    },
                  },
                ]),
                e
              );
            })(),
            pi = $("[TracingHeaders]"),
            fi = (function () {
              function e(t) {
                var n = this;
                (o(this, e),
                  (this._restoreXHRPatch = void 0),
                  (this._restoreFetchPatch = void 0),
                  (this._startCapturing = function () {
                    var e, t;
                    (R(n._restoreXHRPatch) &&
                      (null == (e = y.__PosthogExtensions__) ||
                        null == (e = e.tracingHeadersPatchFns) ||
                        e._patchXHR(
                          n._instance.get_distinct_id(),
                          n._instance.sessionManager,
                        )),
                      R(n._restoreFetchPatch) &&
                        (null == (t = y.__PosthogExtensions__) ||
                          null == (t = t.tracingHeadersPatchFns) ||
                          t._patchFetch(
                            n._instance.get_distinct_id(),
                            n._instance.sessionManager,
                          )));
                  }),
                  (this._instance = t));
              }
              return (
                a(e, [
                  {
                    key: "_loadScript",
                    value: function (e) {
                      var t, n;
                      (null != (t = y.__PosthogExtensions__) &&
                        t.tracingHeadersPatchFns &&
                        e(),
                        null == (n = y.__PosthogExtensions__) ||
                          null == n.loadExternalDependency ||
                          n.loadExternalDependency(
                            this._instance,
                            "tracing-headers",
                            function (t) {
                              if (t)
                                return pi.error("failed to load script", t);
                              e();
                            },
                          ));
                    },
                  },
                  {
                    key: "startIfEnabledOrStop",
                    value: function () {
                      var e, t;
                      this._instance.config.__add_tracing_headers
                        ? this._loadScript(this._startCapturing)
                        : (null == (e = this._restoreXHRPatch) || e.call(this),
                          null == (t = this._restoreFetchPatch) || t.call(this),
                          (this._restoreXHRPatch = void 0),
                          (this._restoreFetchPatch = void 0));
                    },
                  },
                ]),
                e
              );
            })(),
            hi = $("[Web Vitals]"),
            vi = 9e5,
            gi = (function () {
              function e(n) {
                var r,
                  a = this;
                (o(this, e),
                  (this._enabledServerSide = !1),
                  (this._initialized = !1),
                  (this._buffer = {
                    url: void 0,
                    metrics: [],
                    firstMetricTimestamp: void 0,
                  }),
                  (this._flushToCapture = function () {
                    (clearTimeout(a._delayedFlushTimer),
                      0 !== a._buffer.metrics.length &&
                        (a._instance.capture(
                          "$web_vitals",
                          a._buffer.metrics.reduce(function (e, n) {
                            var r;
                            return t(
                              {},
                              e,
                              (i(
                                (r = {}),
                                "$web_vitals_" + n.name + "_event",
                                t({}, n),
                              ),
                              i(r, "$web_vitals_" + n.name + "_value", n.value),
                              r),
                            );
                          }, {}),
                        ),
                        (a._buffer = {
                          url: void 0,
                          metrics: [],
                          firstMetricTimestamp: void 0,
                        })));
                  }),
                  (this._addToBuffer = function (e) {
                    var n,
                      r =
                        null == (n = a._instance.sessionManager)
                          ? void 0
                          : n.checkAndGetSessionAndWindowId(!0);
                    if (R(r))
                      hi.error("Could not read session ID. Dropping metrics!");
                    else {
                      a._buffer = a._buffer || {
                        url: void 0,
                        metrics: [],
                        firstMetricTimestamp: void 0,
                      };
                      var i = a._currentURL();
                      R(i) ||
                        (H(null == e ? void 0 : e.name) ||
                        H(null == e ? void 0 : e.value)
                          ? hi.error("Invalid metric received", e)
                          : a._maxAllowedValue && e.value >= a._maxAllowedValue
                            ? hi.error(
                                "Ignoring metric with value >= " +
                                  a._maxAllowedValue,
                                e,
                              )
                            : (a._buffer.url !== i &&
                                (a._flushToCapture(),
                                (a._delayedFlushTimer = setTimeout(
                                  a._flushToCapture,
                                  a.flushToCaptureTimeoutMs,
                                ))),
                              R(a._buffer.url) && (a._buffer.url = i),
                              (a._buffer.firstMetricTimestamp = R(
                                a._buffer.firstMetricTimestamp,
                              )
                                ? Date.now()
                                : a._buffer.firstMetricTimestamp),
                              e.attribution &&
                                e.attribution.interactionTargetElement &&
                                (e.attribution.interactionTargetElement =
                                  void 0),
                              a._buffer.metrics.push(
                                t({}, e, {
                                  $current_url: i,
                                  $session_id: r.sessionId,
                                  $window_id: r.windowId,
                                  timestamp: Date.now(),
                                }),
                              ),
                              a._buffer.metrics.length ===
                                a.allowedMetrics.length &&
                                a._flushToCapture()));
                    }
                  }),
                  (this._startCapturing = function () {
                    var e,
                      t,
                      n,
                      r,
                      i,
                      o = y.__PosthogExtensions__;
                    (R(o) ||
                      R(o.postHogWebVitalsCallbacks) ||
                      ((t = (e = o.postHogWebVitalsCallbacks).onLCP),
                      (n = e.onCLS),
                      (r = e.onFCP),
                      (i = e.onINP)),
                      t && n && r && i
                        ? (a.allowedMetrics.indexOf("LCP") > -1 &&
                            t(a._addToBuffer.bind(a)),
                          a.allowedMetrics.indexOf("CLS") > -1 &&
                            n(a._addToBuffer.bind(a)),
                          a.allowedMetrics.indexOf("FCP") > -1 &&
                            r(a._addToBuffer.bind(a)),
                          a.allowedMetrics.indexOf("INP") > -1 &&
                            i(a._addToBuffer.bind(a)),
                          (a._initialized = !0))
                        : hi.error(
                            "web vitals callbacks not loaded - not starting",
                          ));
                  }),
                  (this._instance = n),
                  (this._enabledServerSide = !(
                    null == (r = this._instance.persistence) || !r.props[he]
                  )),
                  this.startIfEnabled());
              }
              return (
                a(e, [
                  {
                    key: "allowedMetrics",
                    get: function () {
                      var e,
                        t,
                        n = D(this._instance.config.capture_performance)
                          ? null ==
                            (e = this._instance.config.capture_performance)
                            ? void 0
                            : e.web_vitals_allowed_metrics
                          : void 0;
                      return R(n)
                        ? (null == (t = this._instance.persistence)
                            ? void 0
                            : t.props[ge]) || ["CLS", "FCP", "INP", "LCP"]
                        : n;
                    },
                  },
                  {
                    key: "flushToCaptureTimeoutMs",
                    get: function () {
                      return (
                        (D(this._instance.config.capture_performance)
                          ? this._instance.config.capture_performance
                              .web_vitals_delayed_flush_ms
                          : void 0) || 5e3
                      );
                    },
                  },
                  {
                    key: "_maxAllowedValue",
                    get: function () {
                      var e =
                        D(this._instance.config.capture_performance) &&
                        U(
                          this._instance.config.capture_performance
                            .__web_vitals_max_value,
                        )
                          ? this._instance.config.capture_performance
                              .__web_vitals_max_value
                          : vi;
                      return 0 < e && e <= 6e4 ? vi : e;
                    },
                  },
                  {
                    key: "isEnabled",
                    get: function () {
                      var e = null == g ? void 0 : g.protocol;
                      if ("http:" !== e && "https:" !== e)
                        return (
                          hi.info(
                            "Web Vitals are disabled on non-http/https protocols",
                          ),
                          !1
                        );
                      var t = D(this._instance.config.capture_performance)
                        ? this._instance.config.capture_performance.web_vitals
                        : V(this._instance.config.capture_performance)
                          ? this._instance.config.capture_performance
                          : void 0;
                      return V(t) ? t : this._enabledServerSide;
                    },
                  },
                  {
                    key: "startIfEnabled",
                    value: function () {
                      this.isEnabled &&
                        !this._initialized &&
                        (hi.info("enabled, starting..."),
                        this._loadScript(this._startCapturing));
                    },
                  },
                  {
                    key: "onRemoteConfig",
                    value: function (e) {
                      var t =
                          D(e.capturePerformance) &&
                          !!e.capturePerformance.web_vitals,
                        n = D(e.capturePerformance)
                          ? e.capturePerformance.web_vitals_allowed_metrics
                          : void 0;
                      (this._instance.persistence &&
                        (this._instance.persistence.register(i({}, he, t)),
                        this._instance.persistence.register(i({}, ge, n))),
                        (this._enabledServerSide = t),
                        this.startIfEnabled());
                    },
                  },
                  {
                    key: "_loadScript",
                    value: function (e) {
                      var t, n;
                      (null != (t = y.__PosthogExtensions__) &&
                        t.postHogWebVitalsCallbacks &&
                        e(),
                        null == (n = y.__PosthogExtensions__) ||
                          null == n.loadExternalDependency ||
                          n.loadExternalDependency(
                            this._instance,
                            "web-vitals",
                            function (t) {
                              t ? hi.error("failed to load script", t) : e();
                            },
                          ));
                    },
                  },
                  {
                    key: "_currentURL",
                    value: function () {
                      var e = c ? c.location.href : void 0;
                      return (
                        e || hi.error("Could not determine current URL"),
                        e
                      );
                    },
                  },
                ]),
                e
              );
            })(),
            mi = $("[Heatmaps]");
          function xi(e) {
            return (
              D(e) &&
              "clientX" in e &&
              "clientY" in e &&
              U(e.clientX) &&
              U(e.clientY)
            );
          }
          var wi = (function () {
              function e(t) {
                var n;
                (o(this, e),
                  (this.rageclicks = new bt()),
                  (this._enabledServerSide = !1),
                  (this._initialized = !1),
                  (this._flushInterval = null),
                  (this.instance = t),
                  (this._enabledServerSide = !(
                    null == (n = this.instance.persistence) || !n.props[de]
                  )));
              }
              return (
                a(e, [
                  {
                    key: "flushIntervalMilliseconds",
                    get: function () {
                      var e = 5e3;
                      return (
                        D(this.instance.config.capture_heatmaps) &&
                          this.instance.config.capture_heatmaps
                            .flush_interval_milliseconds &&
                          (e =
                            this.instance.config.capture_heatmaps
                              .flush_interval_milliseconds),
                        e
                      );
                    },
                  },
                  {
                    key: "isEnabled",
                    get: function () {
                      return R(this.instance.config.capture_heatmaps)
                        ? R(this.instance.config.enable_heatmaps)
                          ? this._enabledServerSide
                          : this.instance.config.enable_heatmaps
                        : !1 !== this.instance.config.capture_heatmaps;
                    },
                  },
                  {
                    key: "startIfEnabled",
                    value: function () {
                      if (this.isEnabled) {
                        if (this._initialized) return;
                        (mi.info("starting..."),
                          this._setupListeners(),
                          (this._flushInterval = setInterval(
                            this._flush.bind(this),
                            this.flushIntervalMilliseconds,
                          )));
                      } else {
                        var e, t;
                        (clearInterval(
                          null !== (e = this._flushInterval) && void 0 !== e
                            ? e
                            : void 0,
                        ),
                          null == (t = this._deadClicksCapture) || t.stop(),
                          this.getAndClearBuffer());
                      }
                    },
                  },
                  {
                    key: "onRemoteConfig",
                    value: function (e) {
                      var t = !!e.heatmaps;
                      (this.instance.persistence &&
                        this.instance.persistence.register(i({}, de, t)),
                        (this._enabledServerSide = t),
                        this.startIfEnabled());
                    },
                  },
                  {
                    key: "getAndClearBuffer",
                    value: function () {
                      var e = this._buffer;
                      return ((this._buffer = void 0), e);
                    },
                  },
                  {
                    key: "_onDeadClick",
                    value: function (e) {
                      this._onClick(e.originalEvent, "deadclick");
                    },
                  },
                  {
                    key: "_setupListeners",
                    value: function () {
                      var e = this;
                      c &&
                        v &&
                        (ae(c, "beforeunload", this._flush.bind(this)),
                        ae(
                          v,
                          "click",
                          function (t) {
                            return e._onClick(
                              t || (null == c ? void 0 : c.event),
                            );
                          },
                          { capture: !0 },
                        ),
                        ae(
                          v,
                          "mousemove",
                          function (t) {
                            return e._onMouseMove(
                              t || (null == c ? void 0 : c.event),
                            );
                          },
                          { capture: !0 },
                        ),
                        (this._deadClicksCapture = new tn(
                          this.instance,
                          Jt,
                          this._onDeadClick.bind(this),
                        )),
                        this._deadClicksCapture.startIfEnabled(),
                        (this._initialized = !0));
                    },
                  },
                  {
                    key: "_getProperties",
                    value: function (e, t) {
                      var n = this.instance.scrollManager.scrollY(),
                        r = this.instance.scrollManager.scrollX(),
                        i = this.instance.scrollManager.scrollElement(),
                        o = (function (e, t, n) {
                          for (var r = e; r && Ge(r) && !Ye(r, "body"); ) {
                            if (r === n) return !1;
                            if (
                              E(
                                t,
                                null == c
                                  ? void 0
                                  : c.getComputedStyle(r).position,
                              )
                            )
                              return !0;
                            r = ot(r);
                          }
                          return !1;
                        })(rt(e), ["fixed", "sticky"], i);
                      return {
                        x: e.clientX + (o ? 0 : r),
                        y: e.clientY + (o ? 0 : n),
                        target_fixed: o,
                        type: t,
                      };
                    },
                  },
                  {
                    key: "_onClick",
                    value: function (e, n) {
                      var r;
                      if (
                        (void 0 === n && (n = "click"), !$e(e.target) && xi(e))
                      ) {
                        var i = this._getProperties(e, n);
                        (null != (r = this.rageclicks) &&
                          r.isRageClick(
                            e.clientX,
                            e.clientY,
                            new Date().getTime(),
                          ) &&
                          this._capture(t({}, i, { type: "rageclick" })),
                          this._capture(i));
                      }
                    },
                  },
                  {
                    key: "_onMouseMove",
                    value: function (e) {
                      var t = this;
                      !$e(e.target) &&
                        xi(e) &&
                        (clearTimeout(this._mouseMoveTimeout),
                        (this._mouseMoveTimeout = setTimeout(function () {
                          t._capture(t._getProperties(e, "mousemove"));
                        }, 500)));
                    },
                  },
                  {
                    key: "_capture",
                    value: function (e) {
                      if (c) {
                        var t = c.location.href;
                        ((this._buffer = this._buffer || {}),
                          this._buffer[t] || (this._buffer[t] = []),
                          this._buffer[t].push(e));
                      }
                    },
                  },
                  {
                    key: "_flush",
                    value: function () {
                      this._buffer &&
                        !T(this._buffer) &&
                        this.instance.capture("$$heatmap", {
                          $heatmap_data: this.getAndClearBuffer(),
                        });
                    },
                  },
                ]),
                e
              );
            })(),
            bi = (function () {
              function e(t) {
                (o(this, e), (this._instance = t));
              }
              return (
                a(e, [
                  {
                    key: "doPageView",
                    value: function (e, t) {
                      var n,
                        r = this._previousPageViewProperties(e, t);
                      return (
                        (this._currentPageview = {
                          pathname:
                            null !==
                              (n = null == c ? void 0 : c.location.pathname) &&
                            void 0 !== n
                              ? n
                              : "",
                          pageViewId: t,
                          timestamp: e,
                        }),
                        this._instance.scrollManager.resetContext(),
                        r
                      );
                    },
                  },
                  {
                    key: "doPageLeave",
                    value: function (e) {
                      var t;
                      return this._previousPageViewProperties(
                        e,
                        null == (t = this._currentPageview)
                          ? void 0
                          : t.pageViewId,
                      );
                    },
                  },
                  {
                    key: "doEvent",
                    value: function () {
                      var e;
                      return {
                        $pageview_id:
                          null == (e = this._currentPageview)
                            ? void 0
                            : e.pageViewId,
                      };
                    },
                  },
                  {
                    key: "_previousPageViewProperties",
                    value: function (e, t) {
                      var n = this._currentPageview;
                      if (!n) return { $pageview_id: t };
                      var r = {
                          $pageview_id: t,
                          $prev_pageview_id: n.pageViewId,
                        },
                        i = this._instance.scrollManager.getContext();
                      if (
                        i &&
                        !this._instance.config.disable_scroll_properties
                      ) {
                        var o = i.maxScrollHeight,
                          a = i.lastScrollY,
                          s = i.maxScrollY,
                          l = i.maxContentHeight,
                          c = i.lastContentY,
                          u = i.maxContentY;
                        if (!(R(o) || R(a) || R(s) || R(l) || R(c) || R(u))) {
                          ((o = Math.ceil(o)),
                            (a = Math.ceil(a)),
                            (s = Math.ceil(s)),
                            (l = Math.ceil(l)),
                            (c = Math.ceil(c)),
                            (u = Math.ceil(u)));
                          var d = o <= 1 ? 1 : nn(a / o, 0, 1),
                            p = o <= 1 ? 1 : nn(s / o, 0, 1),
                            f = l <= 1 ? 1 : nn(c / l, 0, 1),
                            h = l <= 1 ? 1 : nn(u / l, 0, 1);
                          r = Q(r, {
                            $prev_pageview_last_scroll: a,
                            $prev_pageview_last_scroll_percentage: d,
                            $prev_pageview_max_scroll: s,
                            $prev_pageview_max_scroll_percentage: p,
                            $prev_pageview_last_content: c,
                            $prev_pageview_last_content_percentage: f,
                            $prev_pageview_max_content: u,
                            $prev_pageview_max_content_percentage: h,
                          });
                        }
                      }
                      return (
                        n.pathname && (r.$prev_pageview_pathname = n.pathname),
                        n.timestamp &&
                          (r.$prev_pageview_duration =
                            (e.getTime() - n.timestamp.getTime()) / 1e3),
                        r
                      );
                    },
                  },
                ]),
                e
              );
            })(),
            yi = !!x || !!m,
            ki = "text/plain",
            Ci = function (e, n) {
              var r = e.split("?"),
                i = s(r, 2),
                o = i[0],
                a = i[1],
                l = t({}, n);
              null == a ||
                a.split("&").forEach(function (e) {
                  var t = e.split("="),
                    n = s(t, 1)[0];
                  delete l[n];
                });
              var c = (function (e, t) {
                var n, r;
                void 0 === t && (t = "&");
                var i = [];
                return (
                  K(e, function (e, t) {
                    R(e) ||
                      R(t) ||
                      "undefined" === t ||
                      ((n = encodeURIComponent(
                        (function (e) {
                          return e instanceof File;
                        })(e)
                          ? e.name
                          : e.toString(),
                      )),
                      (r = encodeURIComponent(t)),
                      (i[i.length] = r + "=" + n));
                  }),
                  i.join(t)
                );
              })(l);
              return o + "?" + (c ? (a ? a + "&" : "") + c : a);
            },
            ji = function (e, t) {
              return JSON.stringify(
                e,
                function (e, t) {
                  return "bigint" == typeof t ? t.toString() : t;
                },
                t,
              );
            },
            Si = function (e) {
              var t = e.data,
                n = e.compression;
              if (t) {
                if (n === S.GZipJS) {
                  var r = Ir(Pr(ji(t)), { mtime: 0 }),
                    i = new Blob([r], { type: ki });
                  return { contentType: ki, body: i, estimatedSize: i.size };
                }
                if (n === S.Base64) {
                  var o = (function (e) {
                      var t,
                        n,
                        r,
                        i,
                        o,
                        a =
                          "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",
                        s = 0,
                        l = 0,
                        c = "",
                        u = [];
                      if (!e) return e;
                      e = (function (e) {
                        var t,
                          n,
                          r,
                          i,
                          o = "";
                        for (
                          t = n = 0,
                            r = (e = (e + "")
                              .replace(/\r\n/g, "\n")
                              .replace(/\r/g, "\n")).length,
                            i = 0;
                          i < r;
                          i++
                        ) {
                          var a = e.charCodeAt(i),
                            s = null;
                          (a < 128
                            ? n++
                            : (s =
                                a > 127 && a < 2048
                                  ? String.fromCharCode(
                                      (a >> 6) | 192,
                                      (63 & a) | 128,
                                    )
                                  : String.fromCharCode(
                                      (a >> 12) | 224,
                                      ((a >> 6) & 63) | 128,
                                      (63 & a) | 128,
                                    )),
                            z(s) ||
                              (n > t && (o += e.substring(t, n)),
                              (o += s),
                              (t = n = i + 1)));
                        }
                        return (n > t && (o += e.substring(t, e.length)), o);
                      })(e);
                      do {
                        ((t =
                          ((o =
                            (e.charCodeAt(s++) << 16) |
                            (e.charCodeAt(s++) << 8) |
                            e.charCodeAt(s++)) >>
                            18) &
                          63),
                          (n = (o >> 12) & 63),
                          (r = (o >> 6) & 63),
                          (i = 63 & o),
                          (u[l++] =
                            a.charAt(t) +
                            a.charAt(n) +
                            a.charAt(r) +
                            a.charAt(i)));
                      } while (s < e.length);
                      switch (((c = u.join("")), e.length % 3)) {
                        case 1:
                          c = c.slice(0, -2) + "==";
                          break;
                        case 2:
                          c = c.slice(0, -1) + "=";
                      }
                      return c;
                    })(ji(t)),
                    a = (function (e) {
                      return (
                        "data=" +
                        encodeURIComponent("string" == typeof e ? e : ji(e))
                      );
                    })(o);
                  return {
                    contentType: "application/x-www-form-urlencoded",
                    body: a,
                    estimatedSize: new Blob([a]).size,
                  };
                }
                var s = ji(t);
                return {
                  contentType: "application/json",
                  body: s,
                  estimatedSize: new Blob([s]).size,
                };
              }
            },
            _i = [];
          (m &&
            _i.push({
              transport: "fetch",
              method: function (e) {
                var n,
                  r,
                  i = null !== (n = Si(e)) && void 0 !== n ? n : {},
                  o = i.contentType,
                  a = i.body,
                  s = i.estimatedSize,
                  l = new Headers();
                (K(e.headers, function (e, t) {
                  l.append(t, e);
                }),
                  o && l.append("Content-Type", o));
                var c = e.url,
                  u = null;
                if (w) {
                  var d = new w();
                  u = {
                    signal: d.signal,
                    timeout: setTimeout(function () {
                      return d.abort();
                    }, e.timeout),
                  };
                }
                m(
                  c,
                  t(
                    {
                      method: (null == e ? void 0 : e.method) || "GET",
                      headers: l,
                      keepalive: "POST" === e.method && (s || 0) < 52428.8,
                      body: a,
                      signal: null == (r = u) ? void 0 : r.signal,
                    },
                    e.fetchOptions,
                  ),
                )
                  .then(function (t) {
                    return t.text().then(function (n) {
                      var r = { statusCode: t.status, text: n };
                      if (200 === t.status)
                        try {
                          r.json = JSON.parse(n);
                        } catch (t) {
                          q.error(t);
                        }
                      null == e.callback || e.callback(r);
                    });
                  })
                  .catch(function (t) {
                    (q.error(t),
                      null == e.callback ||
                        e.callback({ statusCode: 0, text: t }));
                  })
                  .finally(function () {
                    return u ? clearTimeout(u.timeout) : null;
                  });
              },
            }),
            x &&
              _i.push({
                transport: "XHR",
                method: function (e) {
                  var t,
                    n = new x();
                  n.open(e.method || "GET", e.url, !0);
                  var r = null !== (t = Si(e)) && void 0 !== t ? t : {},
                    i = r.contentType,
                    o = r.body;
                  (K(e.headers, function (e, t) {
                    n.setRequestHeader(t, e);
                  }),
                    i && n.setRequestHeader("Content-Type", i),
                    e.timeout && (n.timeout = e.timeout),
                    (n.withCredentials = !0),
                    (n.onreadystatechange = function () {
                      if (4 === n.readyState) {
                        var t = { statusCode: n.status, text: n.responseText };
                        if (200 === n.status)
                          try {
                            t.json = JSON.parse(n.responseText);
                          } catch (e) {}
                        null == e.callback || e.callback(t);
                      }
                    }),
                    n.send(o));
                },
              }),
            null != h &&
              h.sendBeacon &&
              _i.push({
                transport: "sendBeacon",
                method: function (e) {
                  var t = Ci(e.url, { beacon: "1" });
                  try {
                    var n,
                      r = null !== (n = Si(e)) && void 0 !== n ? n : {},
                      i = r.contentType,
                      o = r.body,
                      a = "string" == typeof o ? new Blob([o], { type: i }) : o;
                    h.sendBeacon(t, a);
                  } catch (e) {}
                },
              }));
          var Ei = function (e, t) {
            if (
              !(function (e) {
                try {
                  new RegExp(e);
                } catch (e) {
                  return !1;
                }
                return !0;
              })(t)
            )
              return !1;
            try {
              return new RegExp(t).test(e);
            } catch (e) {
              return !1;
            }
          };
          function Ii(e, t, n) {
            return ji({
              distinct_id: e,
              userPropertiesToSet: t,
              userPropertiesToSetOnce: n,
            });
          }
          var Pi = {
              exact: function (e, t) {
                return t.some(function (t) {
                  return e.some(function (e) {
                    return t === e;
                  });
                });
              },
              is_not: function (e, t) {
                return t.every(function (t) {
                  return e.every(function (e) {
                    return t !== e;
                  });
                });
              },
              regex: function (e, t) {
                return t.some(function (t) {
                  return e.some(function (e) {
                    return Ei(t, e);
                  });
                });
              },
              not_regex: function (e, t) {
                return t.every(function (t) {
                  return e.every(function (e) {
                    return !Ei(t, e);
                  });
                });
              },
              icontains: function (e, t) {
                return t.map(Ai).some(function (t) {
                  return e.map(Ai).some(function (e) {
                    return t.includes(e);
                  });
                });
              },
              not_icontains: function (e, t) {
                return t.map(Ai).every(function (t) {
                  return e.map(Ai).every(function (e) {
                    return !t.includes(e);
                  });
                });
              },
            },
            Ai = function (e) {
              return e.toLowerCase();
            },
            Fi = $("[Error tracking]"),
            Li = (function () {
              function e(t) {
                var n, r;
                (o(this, e),
                  (this._suppressionRules = []),
                  (this._instance = t),
                  (this._suppressionRules =
                    null !==
                      (n =
                        null == (r = this._instance.persistence)
                          ? void 0
                          : r.get_property(fe)) && void 0 !== n
                      ? n
                      : []));
              }
              return (
                a(e, [
                  {
                    key: "onRemoteConfig",
                    value: function (e) {
                      var t,
                        n,
                        r =
                          null !==
                            (t =
                              null == (n = e.errorTracking)
                                ? void 0
                                : n.suppressionRules) && void 0 !== t
                            ? t
                            : [];
                      ((this._suppressionRules = r),
                        this._instance.persistence &&
                          this._instance.persistence.register(
                            i({}, fe, this._suppressionRules),
                          ));
                    },
                  },
                  {
                    key: "sendExceptionEvent",
                    value: function (e) {
                      this._matchesSuppressionRule(e)
                        ? Fi.info(
                            "Skipping exception capture because a suppression rule matched",
                          )
                        : this._instance.capture("$exception", e, {
                            _noTruncate: !0,
                            _batchKey: "exceptionEvent",
                          });
                    },
                  },
                  {
                    key: "_matchesSuppressionRule",
                    value: function (e) {
                      var t = e.$exception_list;
                      if (!t || !Z(t) || 0 === t.length) return !1;
                      var n = t.reduce(
                        function (e, t) {
                          var n = t.type,
                            r = t.value;
                          return (
                            B(n) && n.length > 0 && e.$exception_types.push(n),
                            B(r) && r.length > 0 && e.$exception_values.push(r),
                            e
                          );
                        },
                        { $exception_types: [], $exception_values: [] },
                      );
                      return this._suppressionRules.some(function (e) {
                        var t = e.values.map(function (e) {
                          var t,
                            r = Pi[e.operator],
                            i = Z(e.value) ? e.value : [e.value],
                            o =
                              null !== (t = n[e.key]) && void 0 !== t ? t : [];
                          return i.length > 0 && r(i, o);
                        });
                        return "OR" === e.type
                          ? t.some(Boolean)
                          : t.every(Boolean);
                      });
                    },
                  },
                ]),
                e
              );
            })(),
            Oi = "Mobile",
            Zi = "iOS",
            Ni = "Android",
            Di = "Tablet",
            Ti = Ni + " " + Di,
            Ri = "iPad",
            Bi = "Apple",
            Mi = Bi + " Watch",
            zi = "Safari",
            Hi = "BlackBerry",
            Ui = "Samsung",
            Vi = Ui + "Browser",
            Wi = Ui + " Internet",
            qi = "Chrome",
            $i = qi + " " + Zi,
            Gi = "Internet Explorer",
            Yi = Gi + " " + Oi,
            Ki = "Opera",
            Qi = "Edge",
            Xi = "Microsoft " + Qi,
            Ji = "Firefox",
            eo = Ji + " " + Zi,
            to = "Nintendo",
            no = "PlayStation",
            ro = "Xbox",
            io = Ni + " " + Oi,
            oo = Oi + " " + zi,
            ao = "Windows",
            so = ao + " Phone",
            lo = "Nokia",
            co = "Ouya",
            uo = "Generic",
            po = uo + " " + Oi.toLowerCase(),
            fo = uo + " " + Di.toLowerCase(),
            ho = "Konqueror",
            vo = "(\\d+(\\.\\d+)?)",
            go = new RegExp("Version/" + vo),
            mo = new RegExp(ro, "i"),
            xo = new RegExp(no + " \\w+", "i"),
            wo = new RegExp(to + " \\w+", "i"),
            bo = new RegExp(Hi + "|PlayBook|BB10", "i"),
            yo = {
              "NT3.51": "NT 3.11",
              "NT4.0": "NT 4.0",
              "5.0": "2000",
              5.1: "XP",
              5.2: "XP",
              "6.0": "Vista",
              6.1: "7",
              6.2: "8",
              6.3: "8.1",
              6.4: "10",
              "10.0": "10",
            },
            ko = function (e, t) {
              return (
                (t = t || ""),
                E(e, " OPR/") && E(e, "Mini")
                  ? "Opera Mini"
                  : E(e, " OPR/")
                    ? Ki
                    : bo.test(e)
                      ? Hi
                      : E(e, "IE" + Oi) || E(e, "WPDesktop")
                        ? Yi
                        : E(e, Vi)
                          ? Wi
                          : E(e, Qi) || E(e, "Edg/")
                            ? Xi
                            : E(e, "FBIOS")
                              ? "Facebook " + Oi
                              : E(e, "UCWEB") || E(e, "UCBrowser")
                                ? "UC Browser"
                                : E(e, "CriOS")
                                  ? $i
                                  : E(e, "CrMo") || E(e, qi)
                                    ? qi
                                    : E(e, Ni) && E(e, zi)
                                      ? io
                                      : E(e, "FxiOS")
                                        ? eo
                                        : E(e.toLowerCase(), ho.toLowerCase())
                                          ? ho
                                          : (function (e, t) {
                                                return (
                                                  (t && E(t, Bi)) ||
                                                  (function (e) {
                                                    return (
                                                      E(e, zi) &&
                                                      !E(e, qi) &&
                                                      !E(e, Ni)
                                                    );
                                                  })(e)
                                                );
                                              })(e, t)
                                            ? E(e, Oi)
                                              ? oo
                                              : zi
                                            : E(e, Ji)
                                              ? Ji
                                              : E(e, "MSIE") || E(e, "Trident/")
                                                ? Gi
                                                : E(e, "Gecko")
                                                  ? Ji
                                                  : ""
              );
            },
            Co =
              (i((e = {}), Yi, [new RegExp("rv:" + vo)]),
              i(e, Xi, [new RegExp(Qi + "?\\/" + vo)]),
              i(e, qi, [new RegExp("(Chrome|CrMo)\\/" + vo)]),
              i(e, $i, [new RegExp("CriOS\\/" + vo)]),
              i(e, "UC Browser", [new RegExp("(UCBrowser|UCWEB)\\/" + vo)]),
              i(e, zi, [go]),
              i(e, oo, [go]),
              i(e, Ki, [new RegExp("(Opera|OPR)\\/" + vo)]),
              i(e, Ji, [new RegExp(Ji + "\\/" + vo)]),
              i(e, eo, [new RegExp("FxiOS\\/" + vo)]),
              i(e, ho, [new RegExp("Konqueror[:/]?" + vo, "i")]),
              i(e, Hi, [new RegExp(Hi + " " + vo), go]),
              i(e, io, [new RegExp("android\\s" + vo, "i")]),
              i(e, Wi, [new RegExp(Vi + "\\/" + vo)]),
              i(e, Gi, [new RegExp("(rv:|MSIE )" + vo)]),
              i(e, "Mozilla", [new RegExp("rv:" + vo)]),
              e),
            jo = function (e, t) {
              var n = ko(e, t),
                r = Co[n];
              if (R(r)) return null;
              for (var i = 0; i < r.length; i++) {
                var o = r[i],
                  a = e.match(o);
                if (a) return parseFloat(a[a.length - 2]);
              }
              return null;
            },
            So = [
              [
                new RegExp("Xbox; Xbox (.*?)[);]", "i"),
                function (e) {
                  return [ro, (e && e[1]) || ""];
                },
              ],
              [new RegExp(to, "i"), [to, ""]],
              [new RegExp(no, "i"), [no, ""]],
              [bo, [Hi, ""]],
              [
                new RegExp(ao, "i"),
                function (e, t) {
                  if (/Phone/.test(t) || /WPDesktop/.test(t)) return [so, ""];
                  if (new RegExp(Oi).test(t) && !/IEMobile\b/.test(t))
                    return [ao + " " + Oi, ""];
                  var n = /Windows NT ([0-9.]+)/i.exec(t);
                  if (n && n[1]) {
                    var r = n[1],
                      i = yo[r] || "";
                    return (/arm/i.test(t) && (i = "RT"), [ao, i]);
                  }
                  return [ao, ""];
                },
              ],
              [
                /((iPhone|iPad|iPod).*?OS (\d+)_(\d+)_?(\d+)?|iPhone)/,
                function (e) {
                  if (e && e[3]) {
                    var t = [e[3], e[4], e[5] || "0"];
                    return [Zi, t.join(".")];
                  }
                  return [Zi, ""];
                },
              ],
              [
                /(watch.*\/(\d+\.\d+\.\d+)|watch os,(\d+\.\d+),)/i,
                function (e) {
                  var t = "";
                  return (
                    e && e.length >= 3 && (t = R(e[2]) ? e[3] : e[2]),
                    ["watchOS", t]
                  );
                },
              ],
              [
                new RegExp(
                  "(" + Ni + " (\\d+)\\.(\\d+)\\.?(\\d+)?|" + Ni + ")",
                  "i",
                ),
                function (e) {
                  if (e && e[2]) {
                    var t = [e[2], e[3], e[4] || "0"];
                    return [Ni, t.join(".")];
                  }
                  return [Ni, ""];
                },
              ],
              [
                /Mac OS X (\d+)[_.](\d+)[_.]?(\d+)?/i,
                function (e) {
                  var t = ["Mac OS X", ""];
                  if (e && e[1]) {
                    var n = [e[1], e[2], e[3] || "0"];
                    t[1] = n.join(".");
                  }
                  return t;
                },
              ],
              [/Mac/i, ["Mac OS X", ""]],
              [/CrOS/, ["Chrome OS", ""]],
              [/Linux|debian/i, ["Linux", ""]],
            ],
            _o = function (e) {
              return wo.test(e)
                ? to
                : xo.test(e)
                  ? no
                  : mo.test(e)
                    ? ro
                    : new RegExp(co, "i").test(e)
                      ? co
                      : new RegExp("(" + so + "|WPDesktop)", "i").test(e)
                        ? so
                        : /iPad/.test(e)
                          ? Ri
                          : /iPod/.test(e)
                            ? "iPod Touch"
                            : /iPhone/.test(e)
                              ? "iPhone"
                              : /(watch)(?: ?os[,/]|\d,\d\/)[\d.]+/i.test(e)
                                ? Mi
                                : bo.test(e)
                                  ? Hi
                                  : /(kobo)\s(ereader|touch)/i.test(e)
                                    ? "Kobo"
                                    : new RegExp(lo, "i").test(e)
                                      ? lo
                                      : /(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i.test(
                                            e,
                                          ) ||
                                          /(kf[a-z]+)( bui|\)).+silk\//i.test(e)
                                        ? "Kindle Fire"
                                        : /(Android|ZTE)/i.test(e)
                                          ? !new RegExp(Oi).test(e) ||
                                            /(9138B|TB782B|Nexus [97]|pixel c|HUAWEISHT|BTV|noble nook|smart ultra 6)/i.test(
                                              e,
                                            )
                                            ? (/pixel[\daxl ]{1,6}/i.test(e) &&
                                                !/pixel c/i.test(e)) ||
                                              /(huaweimed-al00|tah-|APA|SM-G92|i980|zte|U304AA)/i.test(
                                                e,
                                              ) ||
                                              (/lmy47v/i.test(e) &&
                                                !/QTAQZ3/i.test(e))
                                              ? Ni
                                              : Ti
                                            : Ni
                                          : new RegExp(
                                                "(pda|Mobile)",
                                                "i",
                                              ).test(e)
                                            ? po
                                            : new RegExp(Di, "i").test(e) &&
                                                !new RegExp(
                                                  Di + " pc",
                                                  "i",
                                                ).test(e)
                                              ? fo
                                              : "";
            },
            Eo = "https?://(.*)",
            Io = [
              "gclid",
              "gclsrc",
              "dclid",
              "gbraid",
              "wbraid",
              "fbclid",
              "msclkid",
              "twclid",
              "li_fat_id",
              "igshid",
              "ttclid",
              "rdt_cid",
              "epik",
              "qclid",
              "sccid",
              "irclid",
              "_kx",
            ],
            Po = X(
              [
                "utm_source",
                "utm_medium",
                "utm_campaign",
                "utm_content",
                "utm_term",
                "gad_source",
                "mc_cid",
              ],
              Io,
            ),
            Ao = "<masked>",
            Fo = ["li_fat_id"];
          function Lo(e, t, n) {
            if (!v) return {};
            var r,
              i = t ? X([], Io, n || []) : [],
              o = Oo(jt(v.URL, i, Ao), e),
              a =
                ((r = {}),
                K(Fo, function (e) {
                  var t = zt._get(e);
                  r[e] = t || null;
                }),
                r);
            return Q(a, o);
          }
          function Oo(e, t) {
            var n = Po.concat(t || []),
              r = {};
            return (
              K(n, function (t) {
                var n = Ct(e, t);
                r[t] = n || null;
              }),
              r
            );
          }
          function Zo(e) {
            var t = (function (e) {
                return e
                  ? 0 === e.search(Eo + "google.([^/?]*)")
                    ? "google"
                    : 0 === e.search(Eo + "bing.com")
                      ? "bing"
                      : 0 === e.search(Eo + "yahoo.com")
                        ? "yahoo"
                        : 0 === e.search(Eo + "duckduckgo.com")
                          ? "duckduckgo"
                          : null
                  : null;
              })(e),
              n = "yahoo" != t ? "q" : "p",
              r = {};
            if (!z(t)) {
              r.$search_engine = t;
              var i = v ? Ct(v.referrer, n) : "";
              i.length && (r.ph_keyword = i);
            }
            return r;
          }
          function No() {
            return navigator.language || navigator.userLanguage;
          }
          function Do() {
            return (null == v ? void 0 : v.referrer) || "$direct";
          }
          function To(e, t) {
            var n = e ? X([], Io, t || []) : [],
              r = null == g ? void 0 : g.href.substring(0, 1e3);
            return { r: Do().substring(0, 1e3), u: r ? jt(r, n, Ao) : void 0 };
          }
          function Ro(e) {
            var t,
              n = e.r,
              r = e.u,
              i = {
                $referrer: n,
                $referring_domain:
                  null == n
                    ? void 0
                    : "$direct" == n
                      ? "$direct"
                      : null == (t = kt(n))
                        ? void 0
                        : t.host,
              };
            if (r) {
              i.$current_url = r;
              var o = kt(r);
              ((i.$host = null == o ? void 0 : o.host),
                (i.$pathname = null == o ? void 0 : o.pathname));
              var a = Oo(r);
              Q(i, a);
            }
            if (n) {
              var s = Zo(n);
              Q(i, s);
            }
            return i;
          }
          function Bo() {
            try {
              return Intl.DateTimeFormat().resolvedOptions().timeZone;
            } catch (t) {
              return;
            }
          }
          function Mo() {
            try {
              return new Date().getTimezoneOffset();
            } catch (t) {
              return;
            }
          }
          function zo(e, t) {
            if (!b) return {};
            var n,
              r,
              i,
              o = e ? X([], Io, t || []) : [],
              a = (function (e) {
                for (var t = 0; t < So.length; t++) {
                  var n = s(So[t], 2),
                    r = n[0],
                    i = n[1],
                    o = r.exec(e),
                    a = o && (N(i) ? i(o, e) : i);
                  if (a) return a;
                }
                return ["", ""];
              })(b),
              l = s(a, 2),
              u = l[0],
              d = l[1];
            return Q(
              ne({
                $os: u,
                $os_version: d,
                $browser: ko(b, navigator.vendor),
                $device: _o(b),
                $device_type:
                  ((r = b),
                  (i = _o(r)),
                  i === Ri ||
                  i === Ti ||
                  "Kobo" === i ||
                  "Kindle Fire" === i ||
                  i === fo
                    ? Di
                    : i === to || i === ro || i === no || i === co
                      ? "Console"
                      : i === Mi
                        ? "Wearable"
                        : i
                          ? Oi
                          : "Desktop"),
                $timezone: Bo(),
                $timezone_offset: Mo(),
              }),
              {
                $current_url: jt(null == g ? void 0 : g.href, o, Ao),
                $host: null == g ? void 0 : g.host,
                $pathname: null == g ? void 0 : g.pathname,
                $raw_user_agent:
                  b.length > 1e3 ? b.substring(0, 997) + "..." : b,
                $browser_version: jo(b, navigator.vendor),
                $browser_language: No(),
                $browser_language_prefix:
                  ((n = No()), "string" == typeof n ? n.split("-")[0] : void 0),
                $screen_height: null == c ? void 0 : c.screen.height,
                $screen_width: null == c ? void 0 : c.screen.width,
                $viewport_height: null == c ? void 0 : c.innerHeight,
                $viewport_width: null == c ? void 0 : c.innerWidth,
                $lib: "web",
                $lib_version: k.LIB_VERSION,
                $insert_id:
                  Math.random().toString(36).substring(2, 10) +
                  Math.random().toString(36).substring(2, 10),
                $time: Date.now() / 1e3,
              },
            );
          }
          var Ho,
            Uo,
            Vo = $("[FeatureFlags]"),
            Wo = "$active_feature_flags",
            qo = "$override_feature_flags",
            $o = "$feature_flag_payloads",
            Go = "$override_feature_flag_payloads",
            Yo = "$feature_flag_request_id",
            Ko = function (e) {
              var t,
                n = {},
                r = l(J(e || {}));
              try {
                for (r.s(); !(t = r.n()).done; ) {
                  var i = s(t.value, 2),
                    o = i[0],
                    a = i[1];
                  a && (n[o] = a);
                }
              } catch (c) {
                r.e(c);
              } finally {
                r.f();
              }
              return n;
            },
            Qo = (function (e) {
              return (
                (e.FeatureFlags = "feature_flags"),
                (e.Recordings = "recordings"),
                e
              );
            })({}),
            Xo = new Set([
              "7c6f7b45",
              "66c1f69c",
              "2727f65a",
              "f3287528",
              "8cc9a311",
              "eb9f671b",
              "c0e1c6f9",
              "057989ec",
              "723f4019",
              "7b102104",
              "563359d3",
              "bad973ea",
              "f6f2c4f4",
              "59454a61",
              "89ad1076",
              "4edd0da1",
              "26c52e72",
              "a970bd2e",
              "89cf4454",
              "16e2b4e7",
              "fba0e7b6",
              "301c8488",
              "bc65d69e",
              "fe66a3c5",
              "37926ca6",
              "52a196df",
              "d32a7577",
              "42c4c9ef",
              "6883bd5a",
              "04809ff7",
              "e59430a8",
              "61be3dd8",
              "7fa5500b",
              "bf027177",
              "8cfdba9b",
              "96f6df5f",
              "569798e9",
              "0ebc61a5",
              "1b5d7b92",
              "17ebb0a4",
              "f97ea965",
              "85cc817b",
              "3044dfc1",
              "0c3fe5c3",
              "b1f95fa3",
              "8a6342e8",
              "72365c68",
              "12d34ad9",
              "733853ec",
              "3beeb69a",
              "0645bb64",
              "32de7f98",
              "5dcbee21",
              "3fe85053",
              "ad960278",
              "9466e5dd",
              "7ca97b2d",
              "2ee2a65c",
              "28fde5f2",
              "85c52f49",
              "0ad823f4",
              "f11b6cc9",
              "aacf8af9",
              "ab3e62b3",
              "3a85ff15",
              "8a67d3c4",
              "f5e91ef1",
              "4b873698",
              "c5dae949",
              "5b643d76",
              "9599c892",
              "34377448",
              "2189e408",
              "3be9ad53",
              "1a14ce7c",
              "2a164ded",
              "8d53ea86",
              "53bdb37d",
              "bfc3f590",
              "8df38ede",
              "bdb81e49",
              "38fde5c0",
              "8d707e6d",
              "73cbc496",
              "f9d8a5ef",
              "d3a9f8c4",
              "a980d8cd",
              "5bcfe086",
              "e4818f68",
              "4f11fb39",
              "a13c6ae3",
              "150c7fbb",
              "98f3d658",
              "f84f7377",
              "1924dd9c",
              "1f6b63b3",
              "24748755",
              "7c0f717c",
              "8a87f11b",
              "49f57f22",
              "3c9e9234",
              "3772f65b",
              "dff631b6",
              "cd609d40",
              "f853c7f7",
              "952db5ee",
              "c5aa8a79",
              "2d21b6fd",
              "79b7164c",
              "4110e26c",
              "a7d3b43f",
              "84e1b8f6",
              "75cc0998",
              "07f78e33",
              "10ca9b1a",
              "ce441b18",
              "01eb8256",
              "c0ac4b67",
              "8e8e5216",
              "db7943dd",
              "fa133a95",
              "498a4508",
              "21bbda67",
              "7dbfed69",
              "be3ec24c",
              "fc80b8e2",
            ]),
            Jo = (function () {
              function e(t) {
                (o(this, e),
                  (this._override_warning = !1),
                  (this._hasLoadedFlags = !1),
                  (this._requestInFlight = !1),
                  (this._reloadingDisabled = !1),
                  (this._additionalReloadRequested = !1),
                  (this._flagsCalled = !1),
                  (this._flagsLoadedFromRemote = !1),
                  (this._instance = t),
                  (this.featureFlagEventHandlers = []));
              }
              return (
                a(e, [
                  {
                    key: "flags",
                    value: function () {
                      if (this._instance.config.__preview_remote_config)
                        this._flagsCalled = !0;
                      else {
                        var e =
                          !this._reloadDebouncer &&
                          (this._instance.config
                            .advanced_disable_feature_flags ||
                            this._instance.config
                              .advanced_disable_feature_flags_on_first_load);
                        this._callFlagsEndpoint({ disableFlags: e });
                      }
                    },
                  },
                  {
                    key: "hasLoadedFlags",
                    get: function () {
                      return this._hasLoadedFlags;
                    },
                  },
                  {
                    key: "getFlags",
                    value: function () {
                      return Object.keys(this.getFlagVariants());
                    },
                  },
                  {
                    key: "getFlagsWithDetails",
                    value: function () {
                      var e = this._instance.get_property(Fe),
                        n = this._instance.get_property(qo),
                        i = this._instance.get_property(Go);
                      if (!i && !n) return e || {};
                      var o,
                        a = Q({}, e || {}),
                        s = r(
                          new Set(
                            [].concat(
                              r(Object.keys(i || {})),
                              r(Object.keys(n || {})),
                            ),
                          ),
                        ),
                        c = l(s);
                      try {
                        for (c.s(); !(o = c.n()).done; ) {
                          var u,
                            d,
                            p = o.value,
                            f = a[p],
                            h = null == n ? void 0 : n[p],
                            v = R(h)
                              ? null !== (u = null == f ? void 0 : f.enabled) &&
                                void 0 !== u &&
                                u
                              : !!h,
                            g = R(h)
                              ? f.variant
                              : "string" == typeof h
                                ? h
                                : void 0,
                            m = null == i ? void 0 : i[p],
                            x = t({}, f, {
                              enabled: v,
                              variant: v
                                ? null != g
                                  ? g
                                  : null == f
                                    ? void 0
                                    : f.variant
                                : void 0,
                            });
                          (v !== (null == f ? void 0 : f.enabled) &&
                            (x.original_enabled =
                              null == f ? void 0 : f.enabled),
                            g !== (null == f ? void 0 : f.variant) &&
                              (x.original_variant =
                                null == f ? void 0 : f.variant),
                            m &&
                              (x.metadata = t(
                                {},
                                null == f ? void 0 : f.metadata,
                                {
                                  payload: m,
                                  original_payload:
                                    null == f || null == (d = f.metadata)
                                      ? void 0
                                      : d.payload,
                                },
                              )),
                            (a[p] = x));
                        }
                      } catch (w) {
                        c.e(w);
                      } finally {
                        c.f();
                      }
                      return (
                        this._override_warning ||
                          (Vo.warn(" Overriding feature flag details!", {
                            flagDetails: e,
                            overriddenPayloads: i,
                            finalDetails: a,
                          }),
                          (this._override_warning = !0)),
                        a
                      );
                    },
                  },
                  {
                    key: "getFlagVariants",
                    value: function () {
                      var e = this._instance.get_property(Pe),
                        t = this._instance.get_property(qo);
                      if (!t) return e || {};
                      for (
                        var n = Q({}, e), r = Object.keys(t), i = 0;
                        i < r.length;
                        i++
                      )
                        n[r[i]] = t[r[i]];
                      return (
                        this._override_warning ||
                          (Vo.warn(" Overriding feature flags!", {
                            enabledFlags: e,
                            overriddenFlags: t,
                            finalFlags: n,
                          }),
                          (this._override_warning = !0)),
                        n
                      );
                    },
                  },
                  {
                    key: "getFlagPayloads",
                    value: function () {
                      var e = this._instance.get_property($o),
                        t = this._instance.get_property(Go);
                      if (!t) return e || {};
                      for (
                        var n = Q({}, e || {}), r = Object.keys(t), i = 0;
                        i < r.length;
                        i++
                      )
                        n[r[i]] = t[r[i]];
                      return (
                        this._override_warning ||
                          (Vo.warn(" Overriding feature flag payloads!", {
                            flagPayloads: e,
                            overriddenPayloads: t,
                            finalPayloads: n,
                          }),
                          (this._override_warning = !0)),
                        n
                      );
                    },
                  },
                  {
                    key: "reloadFeatureFlags",
                    value: function () {
                      var e = this;
                      this._reloadingDisabled ||
                        this._instance.config.advanced_disable_feature_flags ||
                        this._reloadDebouncer ||
                        (this._reloadDebouncer = setTimeout(function () {
                          e._callFlagsEndpoint();
                        }, 5));
                    },
                  },
                  {
                    key: "_clearDebouncer",
                    value: function () {
                      (clearTimeout(this._reloadDebouncer),
                        (this._reloadDebouncer = void 0));
                    },
                  },
                  {
                    key: "ensureFlagsLoaded",
                    value: function () {
                      this._hasLoadedFlags ||
                        this._requestInFlight ||
                        this._reloadDebouncer ||
                        this.reloadFeatureFlags();
                    },
                  },
                  {
                    key: "setAnonymousDistinctId",
                    value: function (e) {
                      this.$anon_distinct_id = e;
                    },
                  },
                  {
                    key: "setReloadingPaused",
                    value: function (e) {
                      this._reloadingDisabled = e;
                    },
                  },
                  {
                    key: "_callFlagsEndpoint",
                    value: function (e) {
                      var n,
                        r = this;
                      if (
                        (this._clearDebouncer(),
                        !this._instance._shouldDisableFlags())
                      )
                        if (this._requestInFlight)
                          this._additionalReloadRequested = !0;
                        else {
                          var i = {
                            token: this._instance.config.token,
                            distinct_id: this._instance.get_distinct_id(),
                            groups: this._instance.getGroups(),
                            $anon_distinct_id: this.$anon_distinct_id,
                            person_properties: t(
                              {},
                              (null == (n = this._instance.persistence)
                                ? void 0
                                : n.get_initial_props()) || {},
                              this._instance.get_property(Le) || {},
                            ),
                            group_properties: this._instance.get_property(Oe),
                          };
                          ((null != e && e.disableFlags) ||
                            this._instance.config
                              .advanced_disable_feature_flags) &&
                            (i.disable_flags = !0);
                          var o =
                              this._instance.config.__preview_flags_v2 &&
                              this._instance.config.__preview_remote_config,
                            a = (function (e) {
                              var t = (function (e) {
                                for (
                                  var t = 2166136261, n = 0;
                                  n < e.length;
                                  n++
                                )
                                  ((t ^= e.charCodeAt(n)),
                                    (t +=
                                      (t << 1) +
                                      (t << 4) +
                                      (t << 7) +
                                      (t << 8) +
                                      (t << 24)));
                                return (
                                  "00000000" + (t >>> 0).toString(16)
                                ).slice(-8);
                              })(e);
                              return null == Xo ? void 0 : Xo.has(t);
                            })(this._instance.config.token)
                              ? "/decide?v=4"
                              : o
                                ? "/flags/?v=2"
                                : "/flags/?v=2&config=true",
                            s = this._instance.config
                              .advanced_only_evaluate_survey_feature_flags
                              ? "&only_evaluate_survey_feature_flags=true"
                              : "",
                            l = this._instance.requestRouter.endpointFor(
                              "api",
                              a + s,
                            );
                          (o && (i.timezone = Bo()),
                            (this._requestInFlight = !0),
                            this._instance._send_request({
                              method: "POST",
                              url: l,
                              data: i,
                              compression: this._instance.config
                                .disable_compression
                                ? void 0
                                : S.Base64,
                              timeout:
                                this._instance.config
                                  .feature_flag_request_timeout_ms,
                              callback: function (e) {
                                var t,
                                  n,
                                  o = !0;
                                if (
                                  (200 === e.statusCode &&
                                    (r._additionalReloadRequested ||
                                      (r.$anon_distinct_id = void 0),
                                    (o = !1)),
                                  (r._requestInFlight = !1),
                                  r._flagsCalled ||
                                    ((r._flagsCalled = !0),
                                    r._instance._onRemoteConfig(
                                      null !== (n = e.json) && void 0 !== n
                                        ? n
                                        : {},
                                    )),
                                  !i.disable_flags ||
                                    r._additionalReloadRequested)
                                )
                                  if (
                                    ((r._flagsLoadedFromRemote = !o),
                                    e.json &&
                                      null != (t = e.json.quotaLimited) &&
                                      t.includes(Qo.FeatureFlags))
                                  )
                                    Vo.warn(
                                      "You have hit your feature flags quota limit, and will not be able to load feature flags until the quota is reset.  Please visit https://posthog.com/docs/billing/limits-alerts to learn more.",
                                    );
                                  else {
                                    var a;
                                    (i.disable_flags ||
                                      r.receivedFeatureFlags(
                                        null !== (a = e.json) && void 0 !== a
                                          ? a
                                          : {},
                                        o,
                                      ),
                                      r._additionalReloadRequested &&
                                        ((r._additionalReloadRequested = !1),
                                        r._callFlagsEndpoint()));
                                  }
                              },
                            }));
                        }
                    },
                  },
                  {
                    key: "getFeatureFlag",
                    value: function (e, t) {
                      if (
                        (void 0 === t && (t = {}),
                        this._hasLoadedFlags ||
                          (this.getFlags() && this.getFlags().length > 0))
                      ) {
                        var n = this.getFlagVariants()[e],
                          r = "" + n,
                          o = this._instance.get_property(Yo) || void 0,
                          a = this._instance.get_property(De) || {};
                        if (
                          (t.send_event || !("send_event" in t)) &&
                          (!(e in a) || !a[e].includes(r))
                        ) {
                          var s, l, c, u, d, p, f, h, v;
                          (Z(a[e]) ? a[e].push(r) : (a[e] = [r]),
                            null == (s = this._instance.persistence) ||
                              s.register(i({}, De, a)));
                          var g = this.getFeatureFlagDetails(e),
                            m = {
                              $feature_flag: e,
                              $feature_flag_response: n,
                              $feature_flag_payload:
                                this.getFeatureFlagPayload(e) || null,
                              $feature_flag_request_id: o,
                              $feature_flag_bootstrapped_response:
                                (null ==
                                  (l = this._instance.config.bootstrap) ||
                                null == (l = l.featureFlags)
                                  ? void 0
                                  : l[e]) || null,
                              $feature_flag_bootstrapped_payload:
                                (null ==
                                  (c = this._instance.config.bootstrap) ||
                                null == (c = c.featureFlagPayloads)
                                  ? void 0
                                  : c[e]) || null,
                              $used_bootstrap_value:
                                !this._flagsLoadedFromRemote,
                            };
                          R(
                            null == g || null == (u = g.metadata)
                              ? void 0
                              : u.version,
                          ) || (m.$feature_flag_version = g.metadata.version);
                          var x,
                            w =
                              null !==
                                (d =
                                  null == g || null == (p = g.reason)
                                    ? void 0
                                    : p.description) && void 0 !== d
                                ? d
                                : null == g || null == (f = g.reason)
                                  ? void 0
                                  : f.code;
                          (w && (m.$feature_flag_reason = w),
                            null != g &&
                              null != (h = g.metadata) &&
                              h.id &&
                              (m.$feature_flag_id = g.metadata.id),
                            (R(null == g ? void 0 : g.original_variant) &&
                              R(null == g ? void 0 : g.original_enabled)) ||
                              (m.$feature_flag_original_response = R(
                                g.original_variant,
                              )
                                ? g.original_enabled
                                : g.original_variant),
                            null != g &&
                              null != (v = g.metadata) &&
                              v.original_payload &&
                              (m.$feature_flag_original_payload =
                                null == g || null == (x = g.metadata)
                                  ? void 0
                                  : x.original_payload),
                            this._instance.capture("$feature_flag_called", m));
                        }
                        return n;
                      }
                      Vo.warn(
                        'getFeatureFlag for key "' +
                          e +
                          "\" failed. Feature flags didn't load in time.",
                      );
                    },
                  },
                  {
                    key: "getFeatureFlagDetails",
                    value: function (e) {
                      return this.getFlagsWithDetails()[e];
                    },
                  },
                  {
                    key: "getFeatureFlagPayload",
                    value: function (e) {
                      return this.getFlagPayloads()[e];
                    },
                  },
                  {
                    key: "getRemoteConfigPayload",
                    value: function (e, t) {
                      var n = this._instance.config.token;
                      this._instance._send_request({
                        method: "POST",
                        url: this._instance.requestRouter.endpointFor(
                          "api",
                          "/flags/?v=2&config=true",
                        ),
                        data: {
                          distinct_id: this._instance.get_distinct_id(),
                          token: n,
                        },
                        compression: this._instance.config.disable_compression
                          ? void 0
                          : S.Base64,
                        timeout:
                          this._instance.config.feature_flag_request_timeout_ms,
                        callback: function (n) {
                          var r,
                            i =
                              null == (r = n.json)
                                ? void 0
                                : r.featureFlagPayloads;
                          t((null == i ? void 0 : i[e]) || void 0);
                        },
                      });
                    },
                  },
                  {
                    key: "isFeatureEnabled",
                    value: function (e, t) {
                      if (
                        (void 0 === t && (t = {}),
                        this._hasLoadedFlags ||
                          (this.getFlags() && this.getFlags().length > 0))
                      )
                        return !!this.getFeatureFlag(e, t);
                      Vo.warn(
                        'isFeatureEnabled for key "' +
                          e +
                          "\" failed. Feature flags didn't load in time.",
                      );
                    },
                  },
                  {
                    key: "addFeatureFlagsHandler",
                    value: function (e) {
                      this.featureFlagEventHandlers.push(e);
                    },
                  },
                  {
                    key: "removeFeatureFlagsHandler",
                    value: function (e) {
                      this.featureFlagEventHandlers =
                        this.featureFlagEventHandlers.filter(function (t) {
                          return t !== e;
                        });
                    },
                  },
                  {
                    key: "receivedFeatureFlags",
                    value: function (e, n) {
                      if (this._instance.persistence) {
                        this._hasLoadedFlags = !0;
                        var r = this.getFlagVariants(),
                          o = this.getFlagPayloads(),
                          a = this.getFlagsWithDetails();
                        (!(function (e, n, r, o, a) {
                          (void 0 === r && (r = {}),
                            void 0 === o && (o = {}),
                            void 0 === a && (a = {}));
                          var s = (function (e) {
                              var t = e.flags;
                              return (
                                t
                                  ? ((e.featureFlags = Object.fromEntries(
                                      Object.keys(t).map(function (e) {
                                        var n;
                                        return [
                                          e,
                                          null !== (n = t[e].variant) &&
                                          void 0 !== n
                                            ? n
                                            : t[e].enabled,
                                        ];
                                      }),
                                    )),
                                    (e.featureFlagPayloads = Object.fromEntries(
                                      Object.keys(t)
                                        .filter(function (e) {
                                          return t[e].enabled;
                                        })
                                        .filter(function (e) {
                                          var n;
                                          return null == (n = t[e].metadata)
                                            ? void 0
                                            : n.payload;
                                        })
                                        .map(function (e) {
                                          var n;
                                          return [
                                            e,
                                            null == (n = t[e].metadata)
                                              ? void 0
                                              : n.payload,
                                          ];
                                        }),
                                    )))
                                  : Vo.warn(
                                      "Using an older version of the feature flags endpoint. Please upgrade your PostHog server to the latest version",
                                    ),
                                e
                              );
                            })(e),
                            l = s.flags,
                            c = s.featureFlags,
                            u = s.featureFlagPayloads;
                          if (c) {
                            var d = e.requestId;
                            if (Z(c)) {
                              var p;
                              Vo.warn(
                                "v1 of the feature flags endpoint is deprecated. Please use the latest version.",
                              );
                              var f = {};
                              if (c)
                                for (var h = 0; h < c.length; h++) f[c[h]] = !0;
                              n &&
                                n.register(
                                  (i((p = {}), Wo, c), i(p, Pe, f), p),
                                );
                            } else {
                              var v,
                                g = c,
                                m = u,
                                x = l;
                              (e.errorsWhileComputingFlags &&
                                ((g = t({}, r, g)),
                                (m = t({}, o, m)),
                                (x = t({}, a, x))),
                                n &&
                                  n.register(
                                    t(
                                      (i((v = {}), Wo, Object.keys(Ko(g))),
                                      i(v, Pe, g || {}),
                                      i(v, $o, m || {}),
                                      i(v, Fe, x || {}),
                                      v),
                                      d ? i({}, Yo, d) : {},
                                    ),
                                  ));
                            }
                          }
                        })(e, this._instance.persistence, r, o, a),
                          this._fireFeatureFlagsCallbacks(n));
                      }
                    },
                  },
                  {
                    key: "override",
                    value: function (e, t) {
                      (void 0 === t && (t = !1),
                        Vo.warn(
                          "override is deprecated. Please use overrideFeatureFlags instead.",
                        ),
                        this.overrideFeatureFlags({
                          flags: e,
                          suppressWarning: t,
                        }));
                    },
                  },
                  {
                    key: "overrideFeatureFlags",
                    value: function (e) {
                      if (
                        !this._instance.__loaded ||
                        !this._instance.persistence
                      )
                        return Vo.uninitializedWarning(
                          "posthog.featureFlags.overrideFeatureFlags",
                        );
                      if (!1 === e)
                        return (
                          this._instance.persistence.unregister(qo),
                          this._instance.persistence.unregister(Go),
                          void this._fireFeatureFlagsCallbacks()
                        );
                      if (
                        e &&
                        "object" == typeof e &&
                        ("flags" in e || "payloads" in e)
                      ) {
                        var t,
                          n = e;
                        if (
                          ((this._override_warning = Boolean(
                            null !== (t = n.suppressWarning) &&
                            void 0 !== t &&
                            t,
                          )),
                          "flags" in n)
                        )
                          if (!1 === n.flags)
                            this._instance.persistence.unregister(qo);
                          else if (n.flags)
                            if (Z(n.flags)) {
                              for (var r = {}, o = 0; o < n.flags.length; o++)
                                r[n.flags[o]] = !0;
                              this._instance.persistence.register(i({}, qo, r));
                            } else
                              this._instance.persistence.register(
                                i({}, qo, n.flags),
                              );
                        return (
                          "payloads" in n &&
                            (!1 === n.payloads
                              ? this._instance.persistence.unregister(Go)
                              : n.payloads &&
                                this._instance.persistence.register(
                                  i({}, Go, n.payloads),
                                )),
                          void this._fireFeatureFlagsCallbacks()
                        );
                      }
                      this._fireFeatureFlagsCallbacks();
                    },
                  },
                  {
                    key: "onFeatureFlags",
                    value: function (e) {
                      var t = this;
                      if (
                        (this.addFeatureFlagsHandler(e), this._hasLoadedFlags)
                      ) {
                        var n = this._prepareFeatureFlagsForCallbacks(),
                          r = n.flags,
                          i = n.flagVariants;
                        e(r, i);
                      }
                      return function () {
                        return t.removeFeatureFlagsHandler(e);
                      };
                    },
                  },
                  {
                    key: "updateEarlyAccessFeatureEnrollment",
                    value: function (e, n) {
                      var r,
                        o,
                        a = (this._instance.get_property(Ae) || []).find(
                          function (t) {
                            return t.flagKey === e;
                          },
                        ),
                        s = i({}, "$feature_enrollment/" + e, n),
                        l = {
                          $feature_flag: e,
                          $feature_enrollment: n,
                          $set: s,
                        };
                      (a && (l.$early_access_feature_name = a.name),
                        this._instance.capture("$feature_enrollment_update", l),
                        this.setPersonPropertiesForFlags(s, !1));
                      var c = t({}, this.getFlagVariants(), i({}, e, n));
                      (null == (o = this._instance.persistence) ||
                        o.register(
                          (i((r = {}), Wo, Object.keys(Ko(c))), i(r, Pe, c), r),
                        ),
                        this._fireFeatureFlagsCallbacks());
                    },
                  },
                  {
                    key: "getEarlyAccessFeatures",
                    value: function (e, t, n) {
                      var r = this;
                      void 0 === t && (t = !1);
                      var o = this._instance.get_property(Ae),
                        a = n
                          ? "&" +
                            n
                              .map(function (e) {
                                return "stage=" + e;
                              })
                              .join("&")
                          : "";
                      if (o && !t) return e(o);
                      this._instance._send_request({
                        url: this._instance.requestRouter.endpointFor(
                          "api",
                          "/api/early_access_features/?token=" +
                            this._instance.config.token +
                            a,
                        ),
                        method: "GET",
                        callback: function (t) {
                          var n;
                          if (t.json) {
                            var o = t.json.earlyAccessFeatures;
                            return (
                              null == (n = r._instance.persistence) ||
                                n.register(i({}, Ae, o)),
                              e(o)
                            );
                          }
                        },
                      });
                    },
                  },
                  {
                    key: "_prepareFeatureFlagsForCallbacks",
                    value: function () {
                      var e = this.getFlags(),
                        t = this.getFlagVariants();
                      return {
                        flags: e.filter(function (e) {
                          return t[e];
                        }),
                        flagVariants: Object.keys(t)
                          .filter(function (e) {
                            return t[e];
                          })
                          .reduce(function (e, n) {
                            return ((e[n] = t[n]), e);
                          }, {}),
                      };
                    },
                  },
                  {
                    key: "_fireFeatureFlagsCallbacks",
                    value: function (e) {
                      var t = this._prepareFeatureFlagsForCallbacks(),
                        n = t.flags,
                        r = t.flagVariants;
                      this.featureFlagEventHandlers.forEach(function (t) {
                        return t(n, r, { errorsLoading: e });
                      });
                    },
                  },
                  {
                    key: "setPersonPropertiesForFlags",
                    value: function (e, n) {
                      void 0 === n && (n = !0);
                      var r = this._instance.get_property(Le) || {};
                      (this._instance.register(i({}, Le, t({}, r, e))),
                        n && this._instance.reloadFeatureFlags());
                    },
                  },
                  {
                    key: "resetPersonPropertiesForFlags",
                    value: function () {
                      this._instance.unregister(Le);
                    },
                  },
                  {
                    key: "setGroupPropertiesForFlags",
                    value: function (e, n) {
                      void 0 === n && (n = !0);
                      var r = this._instance.get_property(Oe) || {};
                      (0 !== Object.keys(r).length &&
                        Object.keys(r).forEach(function (n) {
                          ((r[n] = t({}, r[n], e[n])), delete e[n]);
                        }),
                        this._instance.register(i({}, Oe, t({}, r, e))),
                        n && this._instance.reloadFeatureFlags());
                    },
                  },
                  {
                    key: "resetGroupPropertiesForFlags",
                    value: function (e) {
                      if (e) {
                        var n = this._instance.get_property(Oe) || {};
                        this._instance.register(
                          i({}, Oe, t({}, n, i({}, e, {}))),
                        );
                      } else this._instance.unregister(Oe);
                    },
                  },
                ]),
                e
              );
            })(),
            ea = [
              "cookie",
              "localstorage",
              "localstorage+cookie",
              "sessionstorage",
              "memory",
            ],
            ta = (function () {
              function e(n) {
                (o(this, e),
                  (this._config = n),
                  (this.props = {}),
                  (this._campaign_params_saved = !1),
                  (this._name = (function (e) {
                    var t = "";
                    return (
                      e.token &&
                        (t = e.token
                          .replace(/\+/g, "PL")
                          .replace(/\//g, "SL")
                          .replace(/=/g, "EQ")),
                      e.persistence_name
                        ? "ph_" + e.persistence_name
                        : "ph_" + t + "_posthog"
                    );
                  })(n)),
                  (this._storage = this._buildStorage(n)),
                  this.load(),
                  n.debug &&
                    q.info(
                      "Persistence loaded",
                      n.persistence,
                      t({}, this.props),
                    ),
                  this.update_config(n, n),
                  this.save());
              }
              return (
                a(e, [
                  {
                    key: "_buildStorage",
                    value: function (e) {
                      -1 === ea.indexOf(e.persistence.toLowerCase()) &&
                        (q.critical(
                          "Unknown persistence type " +
                            e.persistence +
                            "; falling back to localStorage+cookie",
                        ),
                        (e.persistence = "localStorage+cookie"));
                      var t = e.persistence.toLowerCase();
                      return "localstorage" === t && Ut._is_supported()
                        ? Ut
                        : "localstorage+cookie" === t && Wt._is_supported()
                          ? Wt
                          : "sessionstorage" === t && Yt._is_supported()
                            ? Yt
                            : "memory" === t
                              ? $t
                              : "cookie" === t
                                ? zt
                                : Wt._is_supported()
                                  ? Wt
                                  : zt;
                    },
                  },
                  {
                    key: "properties",
                    value: function () {
                      var e = {};
                      return (
                        K(this.props, function (t, n) {
                          if (n === Pe && D(t))
                            for (
                              var r = Object.keys(t), i = 0;
                              i < r.length;
                              i++
                            )
                              e["$feature/" + r[i]] = t[r[i]];
                          else
                            ((a = n),
                              (s = !1),
                              (z((o = qe))
                                ? s
                                : f && o.indexOf === f
                                  ? -1 != o.indexOf(a)
                                  : (K(o, function (e) {
                                      if (s || (s = e === a)) return G;
                                    }),
                                    s)) || (e[n] = t));
                          var o, a, s;
                        }),
                        e
                      );
                    },
                  },
                  {
                    key: "load",
                    value: function () {
                      if (!this._disabled) {
                        var e = this._storage._parse(this._name);
                        e && (this.props = Q({}, e));
                      }
                    },
                  },
                  {
                    key: "save",
                    value: function () {
                      this._disabled ||
                        this._storage._set(
                          this._name,
                          this.props,
                          this._expire_days,
                          this._cross_subdomain,
                          this._secure,
                          this._config.debug,
                        );
                    },
                  },
                  {
                    key: "remove",
                    value: function () {
                      (this._storage._remove(this._name, !1),
                        this._storage._remove(this._name, !0));
                    },
                  },
                  {
                    key: "clear",
                    value: function () {
                      (this.remove(), (this.props = {}));
                    },
                  },
                  {
                    key: "register_once",
                    value: function (e, t, n) {
                      var r = this;
                      if (D(e)) {
                        (R(t) && (t = "None"),
                          (this._expire_days = R(n)
                            ? this._default_expiry
                            : n));
                        var i = !1;
                        if (
                          (K(e, function (e, n) {
                            (r.props.hasOwnProperty(n) && r.props[n] !== t) ||
                              ((r.props[n] = e), (i = !0));
                          }),
                          i)
                        )
                          return (this.save(), !0);
                      }
                      return !1;
                    },
                  },
                  {
                    key: "register",
                    value: function (e, t) {
                      var n = this;
                      if (D(e)) {
                        this._expire_days = R(t) ? this._default_expiry : t;
                        var r = !1;
                        if (
                          (K(e, function (t, i) {
                            e.hasOwnProperty(i) &&
                              n.props[i] !== t &&
                              ((n.props[i] = t), (r = !0));
                          }),
                          r)
                        )
                          return (this.save(), !0);
                      }
                      return !1;
                    },
                  },
                  {
                    key: "unregister",
                    value: function (e) {
                      e in this.props && (delete this.props[e], this.save());
                    },
                  },
                  {
                    key: "update_campaign_params",
                    value: function () {
                      if (!this._campaign_params_saved) {
                        var e = Lo(
                          this._config.custom_campaign_params,
                          this._config.mask_personal_data_properties,
                          this._config.custom_personal_data_properties,
                        );
                        (T(ne(e)) || this.register(e),
                          (this._campaign_params_saved = !0));
                      }
                    },
                  },
                  {
                    key: "update_search_keyword",
                    value: function () {
                      var e;
                      this.register(
                        (e = null == v ? void 0 : v.referrer) ? Zo(e) : {},
                      );
                    },
                  },
                  {
                    key: "update_referrer_info",
                    value: function () {
                      var e;
                      this.register_once(
                        {
                          $referrer: Do(),
                          $referring_domain:
                            (null != v &&
                              v.referrer &&
                              (null == (e = kt(v.referrer))
                                ? void 0
                                : e.host)) ||
                            "$direct",
                        },
                        void 0,
                      );
                    },
                  },
                  {
                    key: "set_initial_person_info",
                    value: function () {
                      this.props[Me] ||
                        this.props[ze] ||
                        this.register_once(
                          i(
                            {},
                            He,
                            To(
                              this._config.mask_personal_data_properties,
                              this._config.custom_personal_data_properties,
                            ),
                          ),
                          void 0,
                        );
                    },
                  },
                  {
                    key: "get_initial_props",
                    value: function () {
                      var e = this,
                        t = {};
                      K([ze, Me], function (n) {
                        var r = e.props[n];
                        r &&
                          K(r, function (e, n) {
                            t["$initial_" + P(n)] = e;
                          });
                      });
                      var n,
                        r,
                        i = this.props[He];
                      if (i) {
                        var o =
                          ((n = Ro(i)),
                          (r = {}),
                          K(n, function (e, t) {
                            r["$initial_" + P(t)] = e;
                          }),
                          r);
                        Q(t, o);
                      }
                      return t;
                    },
                  },
                  {
                    key: "safe_merge",
                    value: function (e) {
                      return (
                        K(this.props, function (t, n) {
                          n in e || (e[n] = t);
                        }),
                        e
                      );
                    },
                  },
                  {
                    key: "update_config",
                    value: function (e, t) {
                      if (
                        ((this._default_expiry = this._expire_days =
                          e.cookie_expiration),
                        this.set_disabled(e.disable_persistence),
                        this.set_cross_subdomain(e.cross_subdomain_cookie),
                        this.set_secure(e.secure_cookie),
                        e.persistence !== t.persistence)
                      ) {
                        var n = this._buildStorage(e),
                          r = this.props;
                        (this.clear(),
                          (this._storage = n),
                          (this.props = r),
                          this.save());
                      }
                    },
                  },
                  {
                    key: "set_disabled",
                    value: function (e) {
                      ((this._disabled = e),
                        this._disabled ? this.remove() : this.save());
                    },
                  },
                  {
                    key: "set_cross_subdomain",
                    value: function (e) {
                      e !== this._cross_subdomain &&
                        ((this._cross_subdomain = e),
                        this.remove(),
                        this.save());
                    },
                  },
                  {
                    key: "set_secure",
                    value: function (e) {
                      e !== this._secure &&
                        ((this._secure = e), this.remove(), this.save());
                    },
                  },
                  {
                    key: "set_event_timer",
                    value: function (e, t) {
                      var n = this.props[ce] || {};
                      ((n[e] = t), (this.props[ce] = n), this.save());
                    },
                  },
                  {
                    key: "remove_event_timer",
                    value: function (e) {
                      var t = (this.props[ce] || {})[e];
                      return (
                        R(t) || (delete this.props[ce][e], this.save()),
                        t
                      );
                    },
                  },
                  {
                    key: "get_property",
                    value: function (e) {
                      return this.props[e];
                    },
                  },
                  {
                    key: "set_property",
                    value: function (e, t) {
                      ((this.props[e] = t), this.save());
                    },
                  },
                ]),
                e
              );
            })(),
            na = (function () {
              function e() {
                (o(this, e), (this._events = {}), (this._events = {}));
              }
              return (
                a(e, [
                  {
                    key: "on",
                    value: function (e, t) {
                      var n = this;
                      return (
                        this._events[e] || (this._events[e] = []),
                        this._events[e].push(t),
                        function () {
                          n._events[e] = n._events[e].filter(function (e) {
                            return e !== t;
                          });
                        }
                      );
                    },
                  },
                  {
                    key: "emit",
                    value: function (e, t) {
                      var n,
                        r = l(this._events[e] || []);
                      try {
                        for (r.s(); !(n = r.n()).done; ) {
                          (0, n.value)(t);
                        }
                      } catch (a) {
                        r.e(a);
                      } finally {
                        r.f();
                      }
                      var i,
                        o = l(this._events["*"] || []);
                      try {
                        for (o.s(); !(i = o.n()).done; ) {
                          (0, i.value)(e, t);
                        }
                      } catch (a) {
                        o.e(a);
                      } finally {
                        o.f();
                      }
                    },
                  },
                ]),
                e
              );
            })(),
            ra = (function () {
              function e(t) {
                var n = this;
                (o(this, e),
                  (this._debugEventEmitter = new na()),
                  (this._checkStep = function (e, t) {
                    return (
                      n._checkStepEvent(e, t) &&
                      n._checkStepUrl(e, t) &&
                      n._checkStepElement(e, t)
                    );
                  }),
                  (this._checkStepEvent = function (e, t) {
                    return (
                      null == t ||
                      !t.event ||
                      (null == e ? void 0 : e.event) ===
                        (null == t ? void 0 : t.event)
                    );
                  }),
                  (this._instance = t),
                  (this._actionEvents = new Set()),
                  (this._actionRegistry = new Set()));
              }
              return (
                a(
                  e,
                  [
                    {
                      key: "init",
                      value: function () {
                        var e,
                          t,
                          n = this;
                        R(
                          null == (e = this._instance)
                            ? void 0
                            : e._addCaptureHook,
                        ) ||
                          null == (t = this._instance) ||
                          t._addCaptureHook(function (e, t) {
                            n.on(e, t);
                          });
                      },
                    },
                    {
                      key: "register",
                      value: function (e) {
                        var t,
                          n,
                          r = this;
                        if (
                          !R(
                            null == (t = this._instance)
                              ? void 0
                              : t._addCaptureHook,
                          ) &&
                          (e.forEach(function (e) {
                            var t, n;
                            (null == (t = r._actionRegistry) || t.add(e),
                              null == (n = e.steps) ||
                                n.forEach(function (e) {
                                  var t;
                                  null == (t = r._actionEvents) ||
                                    t.add((null == e ? void 0 : e.event) || "");
                                }));
                          }),
                          null != (n = this._instance) && n.autocapture)
                        ) {
                          var i,
                            o = new Set();
                          (e.forEach(function (e) {
                            var t;
                            null == (t = e.steps) ||
                              t.forEach(function (e) {
                                null != e &&
                                  e.selector &&
                                  o.add(null == e ? void 0 : e.selector);
                              });
                          }),
                            null == (i = this._instance) ||
                              i.autocapture.setElementSelectors(o));
                        }
                      },
                    },
                    {
                      key: "on",
                      value: function (e, t) {
                        var n,
                          r = this;
                        null != t &&
                          0 != e.length &&
                          (this._actionEvents.has(e) ||
                            this._actionEvents.has(
                              null == t ? void 0 : t.event,
                            )) &&
                          this._actionRegistry &&
                          (null == (n = this._actionRegistry)
                            ? void 0
                            : n.size) > 0 &&
                          this._actionRegistry.forEach(function (e) {
                            r._checkAction(t, e) &&
                              r._debugEventEmitter.emit(
                                "actionCaptured",
                                e.name,
                              );
                          });
                      },
                    },
                    {
                      key: "_addActionHook",
                      value: function (e) {
                        this.onAction("actionCaptured", function (t) {
                          return e(t);
                        });
                      },
                    },
                    {
                      key: "_checkAction",
                      value: function (e, t) {
                        if (null == (null == t ? void 0 : t.steps)) return !1;
                        var n,
                          r = l(t.steps);
                        try {
                          for (r.s(); !(n = r.n()).done; ) {
                            var i = n.value;
                            if (this._checkStep(e, i)) return !0;
                          }
                        } catch (o) {
                          r.e(o);
                        } finally {
                          r.f();
                        }
                        return !1;
                      },
                    },
                    {
                      key: "onAction",
                      value: function (e, t) {
                        return this._debugEventEmitter.on(e, t);
                      },
                    },
                    {
                      key: "_checkStepUrl",
                      value: function (t, n) {
                        if (null != n && n.url) {
                          var r,
                            i =
                              null == t || null == (r = t.properties)
                                ? void 0
                                : r.$current_url;
                          if (!i || "string" != typeof i) return !1;
                          if (
                            !e._matchString(
                              i,
                              null == n ? void 0 : n.url,
                              (null == n ? void 0 : n.url_matching) ||
                                "contains",
                            )
                          )
                            return !1;
                        }
                        return !0;
                      },
                    },
                    {
                      key: "_checkStepElement",
                      value: function (t, n) {
                        if (
                          ((null != n && n.href) ||
                            (null != n && n.tag_name) ||
                            (null != n && n.text)) &&
                          !this._getElementsList(t).some(function (t) {
                            return (
                              !(
                                null != n &&
                                n.href &&
                                !e._matchString(
                                  t.href || "",
                                  null == n ? void 0 : n.href,
                                  (null == n ? void 0 : n.href_matching) ||
                                    "exact",
                                )
                              ) &&
                              (null == n ||
                                !n.tag_name ||
                                t.tag_name ===
                                  (null == n ? void 0 : n.tag_name)) &&
                              !(
                                null != n &&
                                n.text &&
                                !e._matchString(
                                  t.text || "",
                                  null == n ? void 0 : n.text,
                                  (null == n ? void 0 : n.text_matching) ||
                                    "exact",
                                ) &&
                                !e._matchString(
                                  t.$el_text || "",
                                  null == n ? void 0 : n.text,
                                  (null == n ? void 0 : n.text_matching) ||
                                    "exact",
                                )
                              )
                            );
                          })
                        )
                          return !1;
                        if (null != n && n.selector) {
                          var r,
                            i =
                              null == t || null == (r = t.properties)
                                ? void 0
                                : r.$element_selectors;
                          if (!i) return !1;
                          if (!i.includes(null == n ? void 0 : n.selector))
                            return !1;
                        }
                        return !0;
                      },
                    },
                    {
                      key: "_getElementsList",
                      value: function (e) {
                        return null ==
                          (null == e ? void 0 : e.properties.$elements)
                          ? []
                          : null == e
                            ? void 0
                            : e.properties.$elements;
                      },
                    },
                  ],
                  [
                    {
                      key: "_matchString",
                      value: function (t, n, r) {
                        switch (r) {
                          case "regex":
                            return !!c && Ei(t, n);
                          case "exact":
                            return n === t;
                          case "contains":
                            var i = e
                              ._escapeStringRegexp(n)
                              .replace(/_/g, ".")
                              .replace(/%/g, ".*");
                            return Ei(t, i);
                          default:
                            return !1;
                        }
                      },
                    },
                    {
                      key: "_escapeStringRegexp",
                      value: function (e) {
                        return e
                          .replace(/[|\\{}()[\]^$+*?.]/g, "\\$&")
                          .replace(/-/g, "\\x2d");
                      },
                    },
                  ],
                ),
                e
              );
            })(),
            ia = $("[Surveys]"),
            oa = "seenSurvey_",
            aa = (function () {
              function e(t) {
                (o(this, e),
                  (this._instance = t),
                  (this._eventToSurveys = new Map()),
                  (this._actionToSurveys = new Map()));
              }
              return (
                a(e, [
                  {
                    key: "register",
                    value: function (e) {
                      var t;
                      R(
                        null == (t = this._instance)
                          ? void 0
                          : t._addCaptureHook,
                      ) ||
                        (this._setupEventBasedSurveys(e),
                        this._setupActionBasedSurveys(e));
                    },
                  },
                  {
                    key: "_setupActionBasedSurveys",
                    value: function (e) {
                      var t = this,
                        n = e.filter(function (e) {
                          var t, n;
                          return (
                            (null == (t = e.conditions) ? void 0 : t.actions) &&
                            (null == (n = e.conditions) ||
                            null == (n = n.actions) ||
                            null == (n = n.values)
                              ? void 0
                              : n.length) > 0
                          );
                        });
                      0 !== n.length &&
                        (null == this._actionMatcher &&
                          ((this._actionMatcher = new ra(this._instance)),
                          this._actionMatcher.init(),
                          this._actionMatcher._addActionHook(function (e) {
                            t.onAction(e);
                          })),
                        n.forEach(function (e) {
                          var n, r, i, o, a;
                          e.conditions &&
                            null != (n = e.conditions) &&
                            n.actions &&
                            null != (r = e.conditions) &&
                            null != (r = r.actions) &&
                            r.values &&
                            (null == (i = e.conditions) ||
                            null == (i = i.actions) ||
                            null == (i = i.values)
                              ? void 0
                              : i.length) > 0 &&
                            (null == (o = t._actionMatcher) ||
                              o.register(e.conditions.actions.values),
                            null == (a = e.conditions) ||
                              null == (a = a.actions) ||
                              null == (a = a.values) ||
                              a.forEach(function (n) {
                                if (n && n.name) {
                                  var r = t._actionToSurveys.get(n.name);
                                  (r && r.push(e.id),
                                    t._actionToSurveys.set(
                                      n.name,
                                      r || [e.id],
                                    ));
                                }
                              }));
                        }));
                    },
                  },
                  {
                    key: "_setupEventBasedSurveys",
                    value: function (e) {
                      var t,
                        n = this;
                      0 !==
                        e.filter(function (e) {
                          var t, n;
                          return (
                            (null == (t = e.conditions) ? void 0 : t.events) &&
                            (null == (n = e.conditions) ||
                            null == (n = n.events) ||
                            null == (n = n.values)
                              ? void 0
                              : n.length) > 0
                          );
                        }).length &&
                        (null == (t = this._instance) ||
                          t._addCaptureHook(function (e, t) {
                            n.onEvent(e, t);
                          }),
                        e.forEach(function (e) {
                          var t;
                          null == (t = e.conditions) ||
                            null == (t = t.events) ||
                            null == (t = t.values) ||
                            t.forEach(function (t) {
                              if (t && t.name) {
                                var r = n._eventToSurveys.get(t.name);
                                (r && r.push(e.id),
                                  n._eventToSurveys.set(t.name, r || [e.id]));
                              }
                            });
                        }));
                    },
                  },
                  {
                    key: "onEvent",
                    value: function (e, t) {
                      var n,
                        r =
                          (null == (n = this._instance) ||
                          null == (n = n.persistence)
                            ? void 0
                            : n.props[Ne]) || [];
                      if ("survey shown" === e && t && r.length > 0) {
                        var i;
                        ia.info(
                          "survey event matched, removing survey from activated surveys",
                          {
                            event: e,
                            eventPayload: t,
                            existingActivatedSurveys: r,
                          },
                        );
                        var o =
                          null == t || null == (i = t.properties)
                            ? void 0
                            : i.$survey_id;
                        if (o) {
                          var a = r.indexOf(o);
                          a >= 0 &&
                            (r.splice(a, 1), this._updateActivatedSurveys(r));
                        }
                      } else
                        this._eventToSurveys.has(e) &&
                          (ia.info(
                            "survey event matched, updating activated surveys",
                            { event: e, surveys: this._eventToSurveys.get(e) },
                          ),
                          this._updateActivatedSurveys(
                            r.concat(this._eventToSurveys.get(e) || []),
                          ));
                    },
                  },
                  {
                    key: "onAction",
                    value: function (e) {
                      var t,
                        n =
                          (null == (t = this._instance) ||
                          null == (t = t.persistence)
                            ? void 0
                            : t.props[Ne]) || [];
                      this._actionToSurveys.has(e) &&
                        this._updateActivatedSurveys(
                          n.concat(this._actionToSurveys.get(e) || []),
                        );
                    },
                  },
                  {
                    key: "_updateActivatedSurveys",
                    value: function (e) {
                      var t;
                      null == (t = this._instance) ||
                        null == (t = t.persistence) ||
                        t.register(i({}, Ne, r(new Set(e))));
                    },
                  },
                  {
                    key: "getSurveys",
                    value: function () {
                      var e;
                      return (
                        (null == (e = this._instance) ||
                        null == (e = e.persistence)
                          ? void 0
                          : e.props[Ne]) || []
                      );
                    },
                  },
                  {
                    key: "getEventToSurveys",
                    value: function () {
                      return this._eventToSurveys;
                    },
                  },
                  {
                    key: "_getActionMatcher",
                    value: function () {
                      return this._actionMatcher;
                    },
                  },
                ]),
                e
              );
            })(),
            sa = (function () {
              function e(t) {
                (o(this, e),
                  (this._surveyManager = null),
                  (this._isFetchingSurveys = !1),
                  (this._isInitializingSurveys = !1),
                  (this._surveyCallbacks = []),
                  (this._instance = t),
                  (this._surveyEventReceiver = null));
              }
              return (
                a(e, [
                  {
                    key: "onRemoteConfig",
                    value: function (e) {
                      var t = e.surveys;
                      if (H(t))
                        return ia.warn(
                          "Flags not loaded yet. Not loading surveys.",
                        );
                      var n = Z(t);
                      ((this._hasSurveys = n ? t.length > 0 : t),
                        ia.info(
                          "flags response received, hasSurveys: " +
                            this._hasSurveys,
                        ),
                        this._hasSurveys && this.loadIfEnabled());
                    },
                  },
                  {
                    key: "reset",
                    value: function () {
                      localStorage.removeItem("lastSeenSurveyDate");
                      for (var e = [], t = 0; t < localStorage.length; t++) {
                        var n = localStorage.key(t);
                        ((null != n && n.startsWith(oa)) ||
                          (null != n && n.startsWith("inProgressSurvey_"))) &&
                          e.push(n);
                      }
                      e.forEach(function (e) {
                        return localStorage.removeItem(e);
                      });
                    },
                  },
                  {
                    key: "loadIfEnabled",
                    value: function () {
                      var e = this;
                      if (!this._surveyManager)
                        if (this._isInitializingSurveys)
                          ia.info("Already initializing surveys, skipping...");
                        else if (this._instance.config.disable_surveys)
                          ia.info("Disabled. Not loading surveys.");
                        else if (this._hasSurveys) {
                          var t = null == y ? void 0 : y.__PosthogExtensions__;
                          if (t) {
                            this._isInitializingSurveys = !0;
                            try {
                              var n = t.generateSurveys;
                              if (n)
                                return void this._completeSurveyInitialization(
                                  n,
                                );
                              var r = t.loadExternalDependency;
                              if (!r)
                                return void this._handleSurveyLoadError(
                                  "PostHog loadExternalDependency extension not found.",
                                );
                              r(this._instance, "surveys", function (n) {
                                n || !t.generateSurveys
                                  ? e._handleSurveyLoadError(
                                      "Could not load surveys script",
                                      n,
                                    )
                                  : e._completeSurveyInitialization(
                                      t.generateSurveys,
                                    );
                              });
                            } catch (t) {
                              throw (
                                this._handleSurveyLoadError(
                                  "Error initializing surveys",
                                  t,
                                ),
                                t
                              );
                            } finally {
                              this._isInitializingSurveys = !1;
                            }
                          } else ia.error("PostHog Extensions not found.");
                        } else ia.info("No surveys to load.");
                    },
                  },
                  {
                    key: "_completeSurveyInitialization",
                    value: function (e) {
                      ((this._surveyManager = e(this._instance)),
                        (this._surveyEventReceiver = new aa(this._instance)),
                        ia.info("Surveys loaded successfully"),
                        this._notifySurveyCallbacks({ isLoaded: !0 }));
                    },
                  },
                  {
                    key: "_handleSurveyLoadError",
                    value: function (e, t) {
                      (ia.error(e, t),
                        this._notifySurveyCallbacks({
                          isLoaded: !1,
                          error: e,
                        }));
                    },
                  },
                  {
                    key: "onSurveysLoaded",
                    value: function (e) {
                      var t = this;
                      return (
                        this._surveyCallbacks.push(e),
                        this._surveyManager &&
                          this._notifySurveyCallbacks({ isLoaded: !0 }),
                        function () {
                          t._surveyCallbacks = t._surveyCallbacks.filter(
                            function (t) {
                              return t !== e;
                            },
                          );
                        }
                      );
                    },
                  },
                  {
                    key: "getSurveys",
                    value: function (e, t) {
                      var n = this;
                      if (
                        (void 0 === t && (t = !1),
                        this._instance.config.disable_surveys)
                      )
                        return (
                          ia.info("Disabled. Not loading surveys."),
                          e([])
                        );
                      var r = this._instance.get_property(Ze);
                      if (r && !t) return e(r, { isLoaded: !0 });
                      if (this._isFetchingSurveys)
                        return e([], {
                          isLoaded: !1,
                          error: "Surveys are already being loaded",
                        });
                      try {
                        ((this._isFetchingSurveys = !0),
                          this._instance._send_request({
                            url: this._instance.requestRouter.endpointFor(
                              "api",
                              "/api/surveys/?token=" +
                                this._instance.config.token,
                            ),
                            method: "GET",
                            timeout:
                              this._instance.config.surveys_request_timeout_ms,
                            callback: function (t) {
                              var r;
                              n._isFetchingSurveys = !1;
                              var o = t.statusCode;
                              if (200 !== o || !t.json) {
                                var a =
                                  "Surveys API could not be loaded, status: " +
                                  o;
                                return (
                                  ia.error(a),
                                  e([], { isLoaded: !1, error: a })
                                );
                              }
                              var s,
                                l = t.json.surveys || [],
                                c = l.filter(function (e) {
                                  return (
                                    (function (e) {
                                      return !(!e.start_date || e.end_date);
                                    })(e) &&
                                    ((function (e) {
                                      var t;
                                      return !(
                                        null == (t = e.conditions) ||
                                        null == (t = t.events) ||
                                        null == (t = t.values) ||
                                        !t.length
                                      );
                                    })(e) ||
                                      (function (e) {
                                        var t;
                                        return !(
                                          null == (t = e.conditions) ||
                                          null == (t = t.actions) ||
                                          null == (t = t.values) ||
                                          !t.length
                                        );
                                      })(e))
                                  );
                                });
                              return (
                                c.length > 0 &&
                                  (null == (s = n._surveyEventReceiver) ||
                                    s.register(c)),
                                null == (r = n._instance.persistence) ||
                                  r.register(i({}, Ze, l)),
                                e(l, { isLoaded: !0 })
                              );
                            },
                          }));
                      } catch (e) {
                        throw ((this._isFetchingSurveys = !1), e);
                      }
                    },
                  },
                  {
                    key: "_notifySurveyCallbacks",
                    value: function (e) {
                      var t,
                        n = l(this._surveyCallbacks);
                      try {
                        for (n.s(); !(t = n.n()).done; ) {
                          var r = t.value;
                          try {
                            e.isLoaded ? this.getSurveys(r) : r([], e);
                          } catch (e) {
                            ia.error("Error in survey callback", e);
                          }
                        }
                      } catch (i) {
                        n.e(i);
                      } finally {
                        n.f();
                      }
                    },
                  },
                  {
                    key: "getActiveMatchingSurveys",
                    value: function (e, t) {
                      if ((void 0 === t && (t = !1), !H(this._surveyManager)))
                        return this._surveyManager.getActiveMatchingSurveys(
                          e,
                          t,
                        );
                      ia.warn("init was not called");
                    },
                  },
                  {
                    key: "_getSurveyById",
                    value: function (e) {
                      var t = null;
                      return (
                        this.getSurveys(function (n) {
                          var r;
                          t =
                            null !==
                              (r = n.find(function (t) {
                                return t.id === e;
                              })) && void 0 !== r
                              ? r
                              : null;
                        }),
                        t
                      );
                    },
                  },
                  {
                    key: "_checkSurveyEligibility",
                    value: function (e) {
                      if (H(this._surveyManager))
                        return {
                          eligible: !1,
                          reason:
                            "SDK is not enabled or survey functionality is not yet loaded",
                        };
                      var t = "string" == typeof e ? this._getSurveyById(e) : e;
                      return t
                        ? this._surveyManager.checkSurveyEligibility(t)
                        : { eligible: !1, reason: "Survey not found" };
                    },
                  },
                  {
                    key: "canRenderSurvey",
                    value: function (e) {
                      if (H(this._surveyManager))
                        return (
                          ia.warn("init was not called"),
                          {
                            visible: !1,
                            disabledReason:
                              "SDK is not enabled or survey functionality is not yet loaded",
                          }
                        );
                      var t = this._checkSurveyEligibility(e);
                      return { visible: t.eligible, disabledReason: t.reason };
                    },
                  },
                  {
                    key: "canRenderSurveyAsync",
                    value: function (e, t) {
                      var n = this;
                      return H(this._surveyManager)
                        ? (ia.warn("init was not called"),
                          Promise.resolve({
                            visible: !1,
                            disabledReason:
                              "SDK is not enabled or survey functionality is not yet loaded",
                          }))
                        : new Promise(function (r) {
                            n.getSurveys(function (t) {
                              var i,
                                o =
                                  null !==
                                    (i = t.find(function (t) {
                                      return t.id === e;
                                    })) && void 0 !== i
                                    ? i
                                    : null;
                              if (o) {
                                var a = n._checkSurveyEligibility(o);
                                r({
                                  visible: a.eligible,
                                  disabledReason: a.reason,
                                });
                              } else
                                r({
                                  visible: !1,
                                  disabledReason: "Survey not found",
                                });
                            }, t);
                          });
                    },
                  },
                  {
                    key: "renderSurvey",
                    value: function (e, t) {
                      if (H(this._surveyManager))
                        ia.warn("init was not called");
                      else {
                        var n = this._getSurveyById(e),
                          r = null == v ? void 0 : v.querySelector(t);
                        n
                          ? r
                            ? this._surveyManager.renderSurvey(n, r)
                            : ia.warn("Survey element not found")
                          : ia.warn("Survey not found");
                      }
                    },
                  },
                ]),
                e
              );
            })(),
            la = (function (e) {
              return (
                (e.SHOWN = "survey shown"),
                (e.DISMISSED = "survey dismissed"),
                (e.SENT = "survey sent"),
                e
              );
            })({}),
            ca = (function (e) {
              return (
                (e.SURVEY_ID = "$survey_id"),
                (e.SURVEY_NAME = "$survey_name"),
                (e.SURVEY_RESPONSE = "$survey_response"),
                (e.SURVEY_ITERATION = "$survey_iteration"),
                (e.SURVEY_ITERATION_START_DATE =
                  "$survey_iteration_start_date"),
                (e.SURVEY_PARTIALLY_COMPLETED = "$survey_partially_completed"),
                (e.SURVEY_SUBMISSION_ID = "$survey_submission_id"),
                (e.SURVEY_QUESTIONS = "$survey_questions"),
                (e.SURVEY_COMPLETED = "$survey_completed"),
                e
              );
            })({}),
            ua = $("[RateLimiter]"),
            da = (function () {
              function e(t) {
                var n,
                  r,
                  i = this;
                (o(this, e),
                  (this.serverLimits = {}),
                  (this.lastEventRateLimited = !1),
                  (this.checkForLimiting = function (e) {
                    var t = e.text;
                    if (t && t.length)
                      try {
                        (JSON.parse(t).quota_limited || []).forEach(
                          function (e) {
                            (ua.info((e || "events") + " is quota limited."),
                              (i.serverLimits[e] = new Date().getTime() + 6e4));
                          },
                        );
                      } catch (e) {
                        return void ua.warn(
                          'could not rate limit - continuing. Error: "' +
                            (null == e ? void 0 : e.message) +
                            '"',
                          { text: t },
                        );
                      }
                  }),
                  (this.instance = t),
                  (this.captureEventsPerSecond =
                    (null == (n = t.config.rate_limiting)
                      ? void 0
                      : n.events_per_second) || 10),
                  (this.captureEventsBurstLimit = Math.max(
                    (null == (r = t.config.rate_limiting)
                      ? void 0
                      : r.events_burst_limit) ||
                      10 * this.captureEventsPerSecond,
                    this.captureEventsPerSecond,
                  )),
                  (this.lastEventRateLimited =
                    this.clientRateLimitContext(!0).isRateLimited));
              }
              return (
                a(e, [
                  {
                    key: "clientRateLimitContext",
                    value: function (e) {
                      var t, n, r;
                      void 0 === e && (e = !1);
                      var i = new Date().getTime(),
                        o =
                          null !==
                            (t =
                              null == (n = this.instance.persistence)
                                ? void 0
                                : n.ge
                            ),},},],},